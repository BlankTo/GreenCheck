/*! For license information please see main.a9e13dd5.js.LICENSE.txt */
(()=>{"use strict";var t={730:(t,e,n)=>{var r=n(43),i=n(853);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(t,e,n,r,i,s,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=O&&t[O]||t["@@iterator"])?t:null}var R,F=Object.assign;function V(t){if(void 0===R)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);R=e&&e[1]||""}return"\n"+R+t}var z=!1;function B(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?V(t):""}function j(t){switch(t.tag){case 5:return V(t.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function U(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case x:return"Portal";case E:return"Profiler";case k:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case T:return(t.displayName||"Context")+".Consumer";case I:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case M:return null!==(e=t.displayName||null)?e:U(t.type)||"Memo";case N:e=t._payload,t=t._init;try{return U(t(e))}catch(n){}}return null}function q(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(e);case 8:return e===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function H(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=H(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,s.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function G(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=H(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Y(t,e){var n=e.checked;return F({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function $(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function X(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){X(t,e);var n=W(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Z(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return F({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(et(n)){if(1<n.length)throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function st(t,e){var n=W(e.value),r=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function gt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function mt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=gt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var yt=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wt=null;function _t(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var xt=null,St=null,kt=null;function Et(t){if(t=bi(t)){if("function"!==typeof xt)throw Error(s(280));var e=t.stateNode;e&&(e=_i(e),xt(t.stateNode,t.type,e))}}function It(t){St?kt?kt.push(t):kt=[t]:St=t}function Tt(){if(St){var t=St,e=kt;if(kt=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Ct(t,e){return t(e)}function Dt(){}var At=!1;function Mt(t,e,n){if(At)return t(e,n);At=!0;try{return Ct(t,e,n)}finally{At=!1,(null!==St||null!==kt)&&(Dt(),Tt())}}function Nt(t,e){var n=t.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Pt=!1;if(u)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Pt=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch(ut){Pt=!1}function Lt(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Rt=!1,Ft=null,Vt=!1,zt=null,Bt={onError:function(t){Rt=!0,Ft=t}};function jt(t,e,n,r,i,s,o,a,l){Rt=!1,Ft=null,Lt.apply(Bt,arguments)}function Ut(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function qt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(Ut(t)!==t)throw Error(s(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ut(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Wt(i),t;if(o===r)return Wt(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t))?Kt(t):null}function Kt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Kt(t);if(null!==e)return e;t=t.sibling}return null}var Gt=i.unstable_scheduleCallback,Qt=i.unstable_cancelCallback,Yt=i.unstable_shouldYield,$t=i.unstable_requestPaint,Xt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Zt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,se=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=he(a):0!==(s&=o)&&(r=he(s))}else 0!==(o=n&~i)?r=he(o):0!==s&&(r=he(s));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(s=e&-e)||16===i&&0!==(4194240&s)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-oe(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ge(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function me(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oe(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var be=0;function we(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var _e,xe,Se,ke,Ee,Ie=!1,Te=[],Ce=null,De=null,Ae=null,Me=new Map,Ne=new Map,Pe=[],Oe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":De=null;break;case"mouseover":case"mouseout":Ae=null;break;case"pointerover":case"pointerout":Me.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ne.delete(e.pointerId)}}function Re(t,e,n,r,i,s){return null===t||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==e&&(null!==(e=bi(e))&&xe(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Fe(t){var e=vi(t.target);if(null!==e){var n=Ut(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=qt(n)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ve(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ye(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=bi(n))&&xe(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);wt=r,n.target.dispatchEvent(r),wt=null,e.shift()}return!0}function ze(t,e,n){Ve(t)&&n.delete(e)}function Be(){Ie=!1,null!==Ce&&Ve(Ce)&&(Ce=null),null!==De&&Ve(De)&&(De=null),null!==Ae&&Ve(Ae)&&(Ae=null),Me.forEach(ze),Ne.forEach(ze)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Ie||(Ie=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function Ue(t){function e(e){return je(e,t)}if(0<Te.length){je(Te[0],t);for(var n=1;n<Te.length;n++){var r=Te[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ce&&je(Ce,t),null!==De&&je(De,t),null!==Ae&&je(Ae,t),Me.forEach(e),Ne.forEach(e),n=0;n<Pe.length;n++)(r=Pe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Pe.length&&null===(n=Pe[0]).blockedOn;)Fe(n),null===n.blockedOn&&Pe.shift()}var qe=w.ReactCurrentBatchConfig,We=!0;function He(t,e,n,r){var i=be,s=qe.transition;qe.transition=null;try{be=1,Ge(t,e,n,r)}finally{be=i,qe.transition=s}}function Ke(t,e,n,r){var i=be,s=qe.transition;qe.transition=null;try{be=4,Ge(t,e,n,r)}finally{be=i,qe.transition=s}}function Ge(t,e,n,r){if(We){var i=Ye(t,e,n,r);if(null===i)Wr(t,e,r,Qe,n),Le(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ce=Re(Ce,t,e,n,r,i),!0;case"dragenter":return De=Re(De,t,e,n,r,i),!0;case"mouseover":return Ae=Re(Ae,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Me.set(s,Re(Me.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ne.set(s,Re(Ne.get(s)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Le(t,r),4&e&&-1<Oe.indexOf(t)){for(;null!==i;){var s=bi(i);if(null!==s&&_e(s),null===(s=Ye(t,e,n,r))&&Wr(t,e,r,Qe,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(t,e,r,null,n)}}var Qe=null;function Ye(t,e,n,r){if(Qe=null,null!==(t=vi(t=_t(r))))if(null===(e=Ut(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=qt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qe=t,null}function $e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Zt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Xe=null,Je=null,Ze=null;function tn(){if(Ze)return Ze;var t,e,n=Je,r=n.length,i="value"in Xe?Xe.value:Xe.textContent,s=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[s-e];e++);return Ze=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function sn(t){function e(e,n,r,i,s){for(var o in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return kn}var In=F({},hn,{key:function(t){if(t.key){var e=_n[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Tn=sn(In),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=F({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(Mn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Rn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),zn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==Pn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!qn[t.type]:"textarea"===e}function Hn(t,e,n,r){It(r),0<(e=Kr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kn=null,Gn=null;function Qn(t){Vr(t,0)}function Yn(t){if(G(wi(t)))return t}function $n(t,e){if("change"===t)return e}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Zn="function"===typeof tr.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(t){if("value"===t.propertyName&&Yn(Gn)){var e=[];Hn(e,Gn,t,_t(t)),Mt(Qn,e)}}function rr(t,e,n){"focusin"===t?(er(),Gn=n,(Kn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Gn)}function sr(t,e){if("click"===t)return Yn(e)}function or(t,e){if("input"===t||"change"===t)return Yn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Q((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mr)))}function _r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},kr={};function Er(t){if(Sr[t])return Sr[t];if(!xr[t])return t;var e,n=xr[t];for(e in n)if(n.hasOwnProperty(e)&&e in kr)return Sr[t]=n[e];return t}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ir=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Dr=Er("transitionend"),Ar=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){Ar.set(t,e),l(e,[t])}for(var Pr=0;Pr<Mr.length;Pr++){var Or=Mr[Pr];Nr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Nr(Ir,"onAnimationEnd"),Nr(Tr,"onAnimationIteration"),Nr(Cr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,a,l,c){if(jt.apply(this,arguments),Rt){if(!Rt)throw Error(s(198));var u=Ft;Rt=!1,Ft=null,Vt||(Vt=!0,zt=u)}}(r,e,void 0,t),t.currentTarget=null}function Vr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break t;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break t;Fr(i,a,c),s=l}}}if(Vt)throw t=zt,Vt=!1,zt=null,t}function zr(t,e){var n=e[gi];void 0===n&&(n=e[gi]=new Set);var r=t+"__bubble";n.has(r)||(qr(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),qr(n,t,r,e)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Ur(t){if(!t[jr]){t[jr]=!0,o.forEach((function(e){"selectionchange"!==e&&(Rr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[jr]||(e[jr]=!0,Br("selectionchange",!1,e))}}function qr(t,e,n,r){switch($e(e)){case 1:var i=He;break;case 4:i=Ke;break;default:i=Ge}n=i.bind(null,e,n,t),i=void 0,!Pt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wr(t,e,n,r,i){var s=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue t}a=a.parentNode}}r=r.return}Mt((function(){var r=s,i=_t(n),o=[];t:{var a=Ar.get(t);if(void 0!==a){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ir:case Tr:case Cr:l=yn;break;case Dr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Nt(p,d))&&u.push(Hr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===wt||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Ut(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)t:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break t;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Wn(a))if(Xn)m=or;else{m=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(t,r))?Hn(o,m,n,i):(y&&y(t,a,r),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=r?wi(r):window,t){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(On)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Un?Bn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(v=tn()):(Je="value"in(Xe=i)?Xe.value:Xe.textContent,Un=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,t,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=jn(n))&&(b.data=v))),(v=Rn?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(zn=!0,Vn);case"textInput":return(t=e.data)===Vn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!On&&Bn(t,e)?(t=tn(),Ze=Je=Xe=null,Un=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,e)}))}function Hr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Kr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Nt(t,n))&&r.unshift(Hr(t,s,i)),null!=(s=Nt(t,e))&&r.push(Hr(t,s,i))),t=t.return}return r}function Gr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Qr(t,e,n,r,i){for(var s=e._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Nt(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Nt(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(t){return("string"===typeof t?t:""+t).replace(Yr,"\n").replace($r,"")}function Jr(t,e,n){if(e=Xr(e),Xr(t)!==e&&n)throw Error(s(425))}function Zr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(t){return si.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void Ue(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ue(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[di])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function bi(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function wi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function _i(t){return t[fi]||null}var xi=[],Si=-1;function ki(t){return{current:t}}function Ei(t){0>Si||(t.current=xi[Si],xi[Si]=null,Si--)}function Ii(t,e){Si++,xi[Si]=t.current,t.current=e}var Ti={},Ci=ki(Ti),Di=ki(!1),Ai=Ti;function Mi(t,e){var n=t.type.contextTypes;if(!n)return Ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ni(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Pi(){Ei(Di),Ei(Ci)}function Oi(t,e,n){if(Ci.current!==Ti)throw Error(s(168));Ii(Ci,e),Ii(Di,n)}function Li(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(s(108,q(t)||"Unknown",i));return F({},n,r)}function Ri(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ii(Ci,t),Ii(Di,Di.current),!0}function Fi(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=Li(t,e,Ai),r.__reactInternalMemoizedMergedChildContext=t,Ei(Di),Ei(Ci),Ii(Ci,t)):Ei(Di),Ii(Di,n)}var Vi=null,zi=!1,Bi=!1;function ji(t){null===Vi?Vi=[t]:Vi.push(t)}function Ui(){if(!Bi&&null!==Vi){Bi=!0;var t=0,e=be;try{var n=Vi;for(be=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(t+1)),Gt(Zt,Ui),i}finally{be=e,Bi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(t,e){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=t,Ki=e}function Zi(t,e,n){Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,Yi=t;var r=$i;t=Xi;var i=32-oe(r)-1;r&=~(1<<i),n+=1;var s=32-oe(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-oe(e)+i|n<<i|r,Xi=s+t}else $i=1<<s|n<<i|r,Xi=t}function ts(t){null!==t.return&&(Ji(t,1),Zi(t,1,0))}function es(t){for(;t===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;t===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(t,e){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function as(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ns=t,rs=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ns=t,rs=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=e,n.return=t,t.child=n,ns=t,rs=null,!0);default:return!1}}function ls(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function cs(t){if(is){var e=rs;if(e){var n=e;if(!as(t,e)){if(ls(t))throw Error(s(418));e=ci(n.nextSibling);var r=ns;e&&as(t,e)?os(r,n):(t.flags=-4097&t.flags|2,is=!1,ns=t)}}else{if(ls(t))throw Error(s(418));t.flags=-4097&t.flags|2,is=!1,ns=t}}}function us(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ns=t}function hs(t){if(t!==ns)return!1;if(!is)return us(t),is=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=rs)){if(ls(t))throw ds(),Error(s(418));for(;e;)os(t,e),e=ci(e.nextSibling)}if(us(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){rs=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}rs=null}}else rs=ns?ci(t.stateNode.nextSibling):null;return!0}function ds(){for(var t=rs;t;)t=ci(t.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(t){null===ss?ss=[t]:ss.push(t)}var gs=w.ReactCurrentBatchConfig;function ms(t,e){if(t&&t.defaultProps){for(var n in e=F({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ys=ki(null),vs=null,bs=null,ws=null;function _s(){ws=bs=vs=null}function xs(t){var e=ys.current;Ei(ys),t._currentValue=e}function Ss(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ks(t,e){vs=t,ws=bs=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(wa=!0),t.firstContext=null)}function Es(t){var e=t._currentValue;if(ws!==t)if(t={context:t,memoizedValue:e,next:null},null===bs){if(null===vs)throw Error(s(308));bs=t,vs.dependencies={lanes:0,firstContext:t}}else bs=bs.next=t;return e}var Is=null;function Ts(t){null===Is?Is=[t]:Is.push(t)}function Cs(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Ts(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ds(t,r)}function Ds(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ms(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ps(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Os(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ds(t,n)}return null===(i=r.interleaved)?(e.next=e,Ts(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ds(t,n)}function Ls(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Rs(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=e:s=s.next=e}else i=s=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fs(t,e,n,r){var i=t.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=t.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break t;h=F({},h,d);break t;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===s&&(i.shared.lanes=0);Fl|=o,t.lanes=o,t.memoizedState=h}}function Vs(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var zs=(new r.Component).refs;function Bs(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:F({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var js={isMounted:function(t){return!!(t=t._reactInternals)&&Ut(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),s=Ps(r,i);s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Os(t,s,i))&&(rc(e,t,i,r),Ls(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ec(),i=nc(t),s=Ps(r,i);s.tag=1,s.payload=e,void 0!==n&&null!==n&&(s.callback=n),null!==(e=Os(t,s,i))&&(rc(e,t,i,r),Ls(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ec(),r=nc(t),i=Ps(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Os(t,i,r))&&(rc(e,t,r,n),Ls(e,t,r))}};function Us(t,e,n,r,i,s,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,s,o):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(t,e,n){var r=!1,i=Ti,s=e.contextType;return"object"===typeof s&&null!==s?s=Es(s):(i=Ni(e)?Ai:Ci.current,s=(r=null!==(r=e.contextTypes)&&void 0!==r)?Mi(t,i):Ti),e=new e(n,s),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=js,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ws(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&js.enqueueReplaceState(e,e.state,null)}function Hs(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=zs,Ms(t);var s=e.contextType;"object"===typeof s&&null!==s?i.context=Es(s):(s=Ni(e)?Ai:Ci.current,i.context=Mi(t,s)),i.state=t.memoizedState,"function"===typeof(s=e.getDerivedStateFromProps)&&(Bs(t,e,s,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&js.enqueueReplaceState(i,i.state,null),Fs(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Ks(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs;e===zs&&(e=i.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Gs(t,e){throw t=Object.prototype.toString.call(e),Error(s(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qs(t){return(0,t._init)(t._payload)}function Ys(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Oc(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Vc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var s=n.type;return s===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&Qs(s)===e.type)?((r=i(e,n.props)).ref=Ks(t,e,n),r.return=t,r):((r=Lc(n.type,n.key,n.props,null,t.mode,r)).ref=Ks(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=zc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,s){return null===e||7!==e.tag?((e=Rc(n,t.mode,r,s)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Vc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case _:return(n=Lc(e.type,e.key,e.props,null,t.mode,n)).ref=Ks(t,null,e),n.return=t,n;case x:return(e=zc(e,t.mode,n)).return=t,e;case N:return d(t,(0,e._init)(e._payload),n)}if(et(e)||L(e))return(e=Rc(e,t.mode,n,null)).return=t,e;Gs(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(t,e,n,r):null;case x:return n.key===i?u(t,e,n,r):null;case N:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||L(n))return null!==i?null:h(t,e,n,r,null);Gs(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case x:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case N:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||L(r))return h(e,t=t.get(n)||null,r,i,null);Gs(e,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,a[g],l);if(null===y){null===h&&(h=m);break}t&&h&&null===y.alternate&&e(i,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(i,h),is&&Ji(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(t&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return t&&h.forEach((function(t){return e(i,t)})),is&&Ji(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}t&&g&&null===b.alternate&&e(i,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),is&&Ji(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(t&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return t&&g.forEach((function(t){return e(i,t)})),is&&Ji(i,m),u}return function t(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:t:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break t}n(r,u);break}e(r,u),u=u.sibling}o.type===S?((s=Rc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case x:t:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break t}n(r,s);break}e(r,s),s=s.sibling}(s=zc(o,r.mode,l)).return=r,r=s}return a(r);case N:return t(r,s,(u=o._init)(o._payload),l)}if(et(o))return g(r,s,o,l);if(L(o))return m(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Xs=Ys(!1),Js={},Zs=ki(Js),to=ki(Js),eo=ki(Js);function no(t){if(t===Js)throw Error(s(174));return t}function ro(t,e){switch(Ii(eo,e),Ii(to,t),Ii(Zs,Js),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(Zs),Ii(Zs,e)}function io(){Ei(Zs),Ei(to),Ei(eo)}function so(t){no(eo.current);var e=no(Zs.current),n=lt(e,t.type);e!==n&&(Ii(to,t),Ii(Zs,n))}function oo(t){to.current===t&&(Ei(Zs),Ei(to))}var ao=ki(0);function lo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var co=[];function uo(){for(var t=0;t<co.length;t++)co[t]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,go=null,mo=null,yo=null,vo=!1,bo=!1,wo=0,_o=0;function xo(){throw Error(s(321))}function So(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function ko(t,e,n,r,i,o){if(po=o,go=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ho.current=null===t||null===t.memoizedState?aa:la,t=n(r,i),bo){o=0;do{if(bo=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=mo=null,e.updateQueue=null,ho.current=ca,t=n(r,i)}while(bo)}if(ho.current=oa,e=null!==mo&&null!==mo.next,po=0,yo=mo=go=null,vo=!1,e)throw Error(s(300));return t}function Eo(){var t=0!==wo;return wo=0,t}function Io(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?go.memoizedState=yo=t:yo=yo.next=t,yo}function To(){if(null===mo){var t=go.alternate;t=null!==t?t.memoizedState:null}else t=mo.next;var e=null===yo?go.memoizedState:yo.next;if(null!==e)yo=e,mo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(mo=t).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?go.memoizedState=yo=t:yo=yo.next=t}return yo}function Co(t,e){return"function"===typeof e?e(t):e}function Do(t){var e=To(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,go.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,e.memoizedState)||(wa=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,go.lanes|=o,Fl|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ao(t){var e=To(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);ar(o,e.memoizedState)||(wa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Mo(){}function No(t,e){var n=go,r=To(),i=e(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Wo(Lo.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Oo.bind(null,n,r,i,e),void 0,null),null===Al)throw Error(s(349));0!==(30&po)||Po(n,e,i)}return i}function Po(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=go.updateQueue)?(e={lastEffect:null,stores:null},go.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Oo(t,e,n,r){e.value=n,e.getSnapshot=r,Ro(e)&&Fo(t)}function Lo(t,e,n){return n((function(){Ro(e)&&Fo(t)}))}function Ro(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Fo(t){var e=Ds(t,1);null!==e&&rc(e,t,1,-1)}function Vo(t){var e=Io();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=na.bind(null,go,t),[e.memoizedState,t]}function zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=go.updateQueue)?(e={lastEffect:null,stores:null},go.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Bo(){return To().memoizedState}function jo(t,e,n,r){var i=Io();go.flags|=t,i.memoizedState=zo(1|e,n,void 0,void 0===r?null:r)}function Uo(t,e,n,r){var i=To();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=zo(e,n,s,r))}go.flags|=t,i.memoizedState=zo(1|e,n,s,r)}function qo(t,e){return jo(8390656,8,t,e)}function Wo(t,e){return Uo(2048,8,t,e)}function Ho(t,e){return Uo(4,2,t,e)}function Ko(t,e){return Uo(4,4,t,e)}function Go(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Qo(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Uo(4,4,Go.bind(null,e,t),n)}function Yo(){}function $o(t,e){var n=To();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&So(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Xo(t,e){var n=To();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&So(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jo(t,e,n){return 0===(21&po)?(t.baseState&&(t.baseState=!1,wa=!0),t.memoizedState=n):(ar(n,e)||(n=ge(),go.lanes|=n,Fl|=n,t.baseState=!0),e)}function Zo(t,e){var n=be;be=0!==n&&4>n?n:4,t(!0);var r=fo.transition;fo.transition={};try{t(!1),e()}finally{be=n,fo.transition=r}}function ta(){return To().memoizedState}function ea(t,e,n){var r=nc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(t))ia(e,n);else if(null!==(n=Cs(t,e,n,r))){rc(n,t,r,ec()),sa(n,e,r)}}function na(t,e,n){var r=nc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(t))ia(e,i);else{var s=t.alternate;if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=e.interleaved;return null===l?(i.next=i,Ts(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=Cs(t,e,i,r))&&(rc(n,t,r,i=ec()),sa(n,e,r))}}function ra(t){var e=t.alternate;return t===go||null!==e&&e===go}function ia(t,e){bo=vo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sa(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var oa={readContext:Es,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:Es,useCallback:function(t,e){return Io().memoizedState=[t,void 0===e?null:e],t},useContext:Es,useEffect:qo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,jo(4194308,4,Go.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jo(4194308,4,t,e)},useInsertionEffect:function(t,e){return jo(4,2,t,e)},useMemo:function(t,e){var n=Io();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Io();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ea.bind(null,go,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Io().memoizedState=t},useState:Vo,useDebugValue:Yo,useDeferredValue:function(t){return Io().memoizedState=t},useTransition:function(){var t=Vo(!1),e=t[0];return t=Zo.bind(null,t[1]),Io().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=go,i=Io();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=e(),null===Al)throw Error(s(349));0!==(30&po)||Po(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,qo(Lo.bind(null,r,o,t),[t]),r.flags|=2048,zo(9,Oo.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Io(),e=Al.identifierPrefix;if(is){var n=Xi;e=":"+e+"R"+(n=($i&~(1<<32-oe($i)-1)).toString(32)+n),0<(n=wo++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=_o++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Es,useCallback:$o,useContext:Es,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:Yo,useDeferredValue:function(t){return Jo(To(),mo.memoizedState,t)},useTransition:function(){return[Do(Co)[0],To().memoizedState]},useMutableSource:Mo,useSyncExternalStore:No,useId:ta,unstable_isNewReconciler:!1},ca={readContext:Es,useCallback:$o,useContext:Es,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Xo,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(t){var e=To();return null===mo?e.memoizedState=t:Jo(e,mo.memoizedState,t)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Mo,useSyncExternalStore:No,useId:ta,unstable_isNewReconciler:!1};function ua(t,e){try{var n="",r=e;do{n+=j(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:t,source:e,stack:i,digest:null}}function ha(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,n){(n=Ps(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,e)},n}function ga(t,e,n){(n=Ps(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){da(0,e)}}var s=t.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,e),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new fa;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ic.bind(null,t,e,n),e.then(t,t))}function ya(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function va(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=Ps(-1,1)).tag=2,Os(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ba=w.ReactCurrentOwner,wa=!1;function _a(t,e,n,r){e.child=null===t?Xs(e,null,n,r):$s(e,t.child,n,r)}function xa(t,e,n,r,i){n=n.render;var s=e.ref;return ks(e,i),r=ko(t,e,n,r,s,i),n=Eo(),null===t||wa?(is&&n&&ts(e),e.flags|=1,_a(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Sa(t,e,n,r,i){if(null===t){var s=n.type;return"function"!==typeof s||Pc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Lc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,ka(t,e,s,r,i))}if(s=t.child,0===(t.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&t.ref===e.ref)return Ha(t,e,i)}return e.flags|=1,(t=Oc(s,r)).ref=e.ref,t.return=e,e.child=t}function ka(t,e,n,r,i){if(null!==t){var s=t.memoizedProps;if(lr(s,r)&&t.ref===e.ref){if(wa=!1,e.pendingProps=r=s,0===(t.lanes&i))return e.lanes=t.lanes,Ha(t,e,i);0!==(131072&t.flags)&&(wa=!0)}}return Ta(t,e,n,r,i)}function Ea(t,e,n){var r=e.pendingProps,i=r.children,s=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return t=null!==s?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ii(Ol,Pl),Pl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ii(Ol,Pl),Pl|=r;return _a(t,e,i,n),e.child}function Ia(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ta(t,e,n,r,i){var s=Ni(n)?Ai:Ci.current;return s=Mi(e,s),ks(e,i),n=ko(t,e,n,r,s,i),r=Eo(),null===t||wa?(is&&r&&ts(e),e.flags|=1,_a(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Ca(t,e,n,r,i){if(Ni(n)){var s=!0;Ri(e)}else s=!1;if(ks(e,i),null===e.stateNode)Wa(t,e),qs(e,n,r),Hs(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Es(c):c=Mi(e,c=Ni(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(e,o,r,c),As=!1;var d=e.memoizedState;o.state=d,Fs(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Di.current||As?("function"===typeof u&&(Bs(e,n,u,r),l=e.memoizedState),(a=As||Us(e,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ns(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ms(e.type,a),o.props=c,h=e.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Es(l):l=Mi(e,l=Ni(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(e,o,r,l),As=!1,d=e.memoizedState,o.state=d,Fs(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Di.current||As?("function"===typeof f&&(Bs(e,n,f,r),p=e.memoizedState),(c=As||Us(e,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Da(t,e,n,r,s,i)}function Da(t,e,n,r,i,s){Ia(t,e);var o=0!==(128&e.flags);if(!r&&!o)return i&&Fi(e,n,!1),Ha(t,e,s);r=e.stateNode,ba.current=e;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):_a(t,e,a,s),e.memoizedState=r.state,i&&Fi(e,n,!0),e.child}function Aa(t){var e=t.stateNode;e.pendingContext?Oi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Oi(0,e.context,!1),ro(t,e.containerInfo)}function Ma(t,e,n,r,i){return fs(),ps(i),e.flags|=256,_a(t,e,n,r),e.child}var Na,Pa,Oa,La,Ra={dehydrated:null,treeContext:null,retryLane:0};function Fa(t){return{baseLanes:t,cachePool:null,transitions:null}}function Va(t,e,n){var r,i=e.pendingProps,o=ao.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Ii(ao,1&o),null===t)return cs(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),t=Rc(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Fa(n),e.memoizedState=Ra,t):za(e,l));if(null!==(o=t.memoizedState)&&null!==(r=o.dehydrated))return function(t,e,n,r,i,o,a){if(n)return 256&e.flags?(e.flags&=-257,Ba(t,e,a,r=ha(Error(s(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Rc(o,i,a,null)).flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,0!==(1&e.mode)&&$s(e,t.child,null,a),e.child.memoizedState=Fa(a),e.memoizedState=Ra,o);if(0===(1&e.mode))return Ba(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(t,e,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&t.childLanes),wa||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(t,i),rc(r,t,i,-1))}return mc(),Ba(t,e,a,r=ha(Error(s(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Cc.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,rs=ci(i.nextSibling),ns=e,is=!0,ss=null,null!==t&&(Gi[Qi++]=$i,Gi[Qi++]=Xi,Gi[Qi++]=Yi,$i=t.id,Xi=t.overflow,Yi=e),e=za(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,o,n);if(a){a=i.fallback,l=e.mode,r=(o=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==o?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Rc(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Ra,i}return t=(a=t.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function za(t,e){return(e=Fc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ba(t,e,n,r){return null!==r&&ps(r),$s(e,t.child,null,n),(t=za(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function ja(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Ss(t.return,e,n)}function Ua(t,e,n,r,i){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(_a(t,e,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ja(t,n,e);else if(19===t.tag)ja(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ii(ao,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===lo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ua(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===lo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ua(e,!0,n,null,s);break;case"together":Ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wa(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ha(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Fl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Oc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Oc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ka(t,e){if(!is)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ga(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Qa(t,e,n){var r=e.pendingProps;switch(es(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(e),null;case 1:case 17:return Ni(e.type)&&Pi(),Ga(e),null;case 3:return r=e.stateNode,io(),Ei(Di),Ei(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(hs(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==ss&&(ac(ss),ss=null))),Pa(t,e),Ga(e),null;case 5:oo(e);var i=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Oa(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(s(166));return Ga(e),null}if(t=no(Zs.current),hs(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[di]=e,r[fi]=o,t=0!==(1&e.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":$(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":it(r,o),zr("invalid",r)}for(var l in vt(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),ot(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[fi]=r,Na(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(n,r),n){case"dialog":zr("cancel",t),zr("close",t),i=r;break;case"iframe":case"object":case"embed":zr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],t);i=r;break;case"source":zr("error",t),i=r;break;case"img":case"image":case"link":zr("error",t),zr("load",t),i=r;break;case"details":zr("toggle",t),i=r;break;case"input":$(t,r),i=Y(t,r),zr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),zr("invalid",t)}for(o in vt(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?mt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",t):null!=u&&b(t,o,u,l))}switch(n){case"input":K(t),Z(t,r,!1);break;case"textarea":K(t),ot(t);break;case"option":null!=r.value&&t.setAttribute("value",""+W(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?nt(t,!!r.multiple,o,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Ga(e),null;case 6:if(t&&null!=e.stateNode)La(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(s(166));if(n=no(eo.current),no(Zs.current),hs(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(o=r.nodeValue!==n)&&null!==(t=ns))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Ga(e),null;case 13:if(Ei(ao),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&e.mode)&&0===(128&e.flags))ds(),fs(),e.flags|=98560,o=!1;else if(o=hs(e),null!==r&&null!==r.dehydrated){if(null===t){if(!o)throw Error(s(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=e}else fs(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Ga(e),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ao.current)?0===Ll&&(Ll=3):mc())),null!==e.updateQueue&&(e.flags|=4),Ga(e),null);case 4:return io(),Pa(t,e),null===t&&Ur(e.stateNode.containerInfo),Ga(e),null;case 10:return xs(e.type._context),Ga(e),null;case 19:if(Ei(ao),null===(o=e.memoizedState))return Ga(e),null;if(r=0!==(128&e.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=lo(t))){for(e.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ii(ao,1&ao.current|2),e.child}t=t.sibling}null!==o.tail&&Xt()>ql&&(e.flags|=128,r=!0,Ka(o,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=lo(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(e),null}else 2*Xt()-o.renderingStartTime>ql&&1073741824!==n&&(e.flags|=128,r=!0,Ka(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Xt(),e.sibling=null,n=ao.current,Ii(ao,r?1&n|2:1&n),e):(Ga(e),null);case 22:case 23:return dc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Pl)&&(Ga(e),6&e.subtreeFlags&&(e.flags|=8192)):Ga(e),null;case 24:case 25:return null}throw Error(s(156,e.tag))}function Ya(t,e){switch(es(e),e.tag){case 1:return Ni(e.type)&&Pi(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return io(),Ei(Di),Ei(Ci),uo(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(Ei(ao),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(s(340));fs()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(ao),null;case 4:return io(),null;case 10:return xs(e.type._context),null;case 22:case 23:return dc(),null;default:return null}}Na=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Oa=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(t,i),r=Y(t,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=rt(t,i),r=rt(t,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Zr)}for(u in vt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},La=function(t,e,n,r){n!==r&&(e.flags|=4)};var $a=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function tl(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(t,e,r)}else n.current=null}function el(t,e,n){try{n()}catch(r){Ec(t,e,r)}}var nl=!1;function rl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(e,n,s)}i=i.next}while(i!==r)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sl(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[gi],delete e[mi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Zr));else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var hl=null,dl=!1;function fl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(se&&"function"===typeof se.onCommitFiberUnmount)try{se.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:Xa||tl(n,e);case 6:var r=hl,i=dl;hl=null,fl(t,e,n),dl=i,null!==(hl=r)&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(t=hl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),Ue(t)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(t,e,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,e,o),i=i.next}while(i!==r)}fl(t,e,n);break;case 1:if(!Xa&&(tl(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,e,a)}fl(t,e,n);break;case 21:fl(t,e,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(t,e,n),Xa=r):fl(t,e,n);break;default:fl(t,e,n)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var r=Dc.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break t;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)yl(e,t),e=e.sibling}function yl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),vl(t),4&r){try{rl(3,t,t.return),il(3,t)}catch(m){Ec(t,t.return,m)}try{rl(5,t,t.return)}catch(m){Ec(t,t.return,m)}}break;case 1:ml(e,t),vl(t),512&r&&null!==n&&tl(n,n.return);break;case 5:if(ml(e,t),vl(t),512&r&&null!==n&&tl(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(m){Ec(t,t.return,m)}}if(4&r&&null!=(i=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),bt(l,a);var u=bt(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?mt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):b(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":st(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?nt(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?nt(i,!!o.multiple,o.defaultValue,!0):nt(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Ec(t,t.return,m)}}break;case 6:if(ml(e,t),vl(t),4&r){if(null===t.stateNode)throw Error(s(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Ec(t,t.return,m)}}break;case 3:if(ml(e,t),vl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ue(e.containerInfo)}catch(m){Ec(t,t.return,m)}break;case 4:default:ml(e,t),vl(t);break;case 13:ml(e,t),vl(t),8192&(i=t.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Xt())),4&r&&gl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Xa=(u=Xa)||h,ml(e,t),Xa=u):ml(e,t),vl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Za=t,h=t.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:tl(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Za=p):xl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=gt("display",a))}catch(m){Ec(t,t.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(t,t.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),vl(t),4&r&&gl(t);case 21:}}function vl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(al(n)){var r=n;break t}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),ul(t,ll(t),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(t,ll(t),o);break;default:throw Error(s(161))}}catch(a){Ec(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function bl(t,e,n){Za=t,wl(t,e,n)}function wl(t,e,n){for(var r=0!==(1&t.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=$a;var c=Xa;if($a=o,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Za=l):Sl(i);for(;null!==s;)Za=s,wl(s,e,n),s=s.sibling;Za=i,$a=a,Xa=c}_l(t)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(t)}}function _l(t){for(;null!==Za;){var e=Za;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Xa||il(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ms(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Vs(e,o,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Vs(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ue(d)}}}break;default:throw Error(s(163))}Xa||512&e.flags&&sl(e)}catch(f){Ec(e,e.return,f)}}if(e===t){Za=null;break}if(null!==(n=e.sibling)){n.return=e.return,Za=n;break}Za=e.return}}function xl(t){for(;null!==Za;){var e=Za;if(e===t){Za=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Za=n;break}Za=e.return}}function Sl(t){for(;null!==Za;){var e=Za;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{il(4,e)}catch(l){Ec(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Ec(e,i,l)}}var s=e.return;try{sl(e)}catch(l){Ec(e,s,l)}break;case 5:var o=e.return;try{sl(e)}catch(l){Ec(e,o,l)}}}catch(l){Ec(e,e.return,l)}if(e===t){Za=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Za=a;break}Za=e.return}}var kl,El=Math.ceil,Il=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Dl=0,Al=null,Ml=null,Nl=0,Pl=0,Ol=ki(0),Ll=0,Rl=null,Fl=0,Vl=0,zl=0,Bl=null,jl=null,Ul=0,ql=1/0,Wl=null,Hl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,$l=0,Xl=0,Jl=null,Zl=-1,tc=0;function ec(){return 0!==(6&Dl)?Xt():-1!==Zl?Zl:Zl=Xt()}function nc(t){return 0===(1&t.mode)?1:0!==(2&Dl)&&0!==Nl?Nl&-Nl:null!==gs.transition?(0===tc&&(tc=ge()),tc):0!==(t=be)?t:t=void 0===(t=window.event)?16:$e(t.type)}function rc(t,e,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));ye(t,n,r),0!==(2&Dl)&&t===Al||(t===Al&&(0===(2&Dl)&&(Vl|=n),4===Ll&&lc(t,Nl)),ic(t,r),1===n&&0===Dl&&0===(1&e.mode)&&(ql=Xt()+500,zi&&Ui()))}function ic(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-oe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=fe(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}(t,e);var r=de(t,t===Al?Nl:0);if(0===r)null!==n&&Qt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Qt(n),1===e)0===t.tag?function(t){zi=!0,ji(t)}(cc.bind(null,t)):ji(cc.bind(null,t)),oi((function(){0===(6&Dl)&&Ui()})),n=null;else{switch(we(r)){case 1:n=Zt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Ac(n,sc.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sc(t,e){if(Zl=-1,tc=0,0!==(6&Dl))throw Error(s(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var r=de(t,t===Al?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=yc(t,r);else{e=r;var i=Dl;Dl|=2;var o=gc();for(Al===t&&Nl===e||(Wl=null,ql=Xt()+500,fc(t,e));;)try{bc();break}catch(l){pc(t,l)}_s(),Il.current=o,Dl=i,null!==Ml?e=0:(Al=null,Nl=0,e=Ll)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=oc(t,i))),1===e)throw n=Rl,fc(t,0),lc(t,r),ic(t,Xt()),n;if(6===e)lc(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=yc(t,r))&&(0!==(o=pe(t))&&(r=o,e=oc(t,o))),1===e))throw n=Rl,fc(t,0),lc(t,r),ic(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(s(345));case 2:case 5:xc(t,jl,Wl);break;case 3:if(lc(t,r),(130023424&r)===r&&10<(e=Ul+500-Xt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){ec(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(xc.bind(null,t,jl,Wl),e);break}xc(t,jl,Wl);break;case 4:if(lc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-oe(r);o=1<<a,(a=e[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){t.timeoutHandle=ri(xc.bind(null,t,jl,Wl),r);break}xc(t,jl,Wl);break;default:throw Error(s(329))}}}return ic(t,Xt()),t.callbackNode===n?sc.bind(null,t):null}function oc(t,e){var n=Bl;return t.current.memoizedState.isDehydrated&&(fc(t,e).flags|=256),2!==(t=yc(t,e))&&(e=jl,jl=n,null!==e&&ac(e)),t}function ac(t){null===jl?jl=t:jl.push.apply(jl,t)}function lc(t,e){for(e&=~zl,e&=~Vl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),r=1<<n;t[n]=-1,e&=~r}}function cc(t){if(0!==(6&Dl))throw Error(s(327));Sc();var e=de(t,0);if(0===(1&e))return ic(t,Xt()),null;var n=yc(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=oc(t,r))}if(1===n)throw n=Rl,fc(t,0),lc(t,e),ic(t,Xt()),n;if(6===n)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xc(t,jl,Wl),ic(t,Xt()),null}function uc(t,e){var n=Dl;Dl|=1;try{return t(e)}finally{0===(Dl=n)&&(ql=Xt()+500,zi&&Ui())}}function hc(t){null!==Yl&&0===Yl.tag&&0===(6&Dl)&&Sc();var e=Dl;Dl|=1;var n=Cl.transition,r=be;try{if(Cl.transition=null,be=1,t)return t()}finally{be=r,Cl.transition=n,0===(6&(Dl=e))&&Ui()}}function dc(){Pl=Ol.current,Ei(Ol)}function fc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(es(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Ei(Di),Ei(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(ao);break;case 10:xs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=t,Ml=t=Oc(t.current,null),Nl=Pl=e,Ll=0,Rl=null,zl=Vl=Fl=0,jl=Bl=null,null!==Is){for(e=0;e<Is.length;e++)if(null!==(r=(n=Is[e]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return t}function pc(t,e){for(;;){var n=Ml;try{if(_s(),ho.current=oa,vo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=mo=go=null,bo=!1,wo=0,Tl.current=null,null===n||null===n.return){Ll=1,Rl=e,Ml=null;break}t:{var o=t,a=n.return,l=n,c=e;if(e=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,e),1&p.mode&&ma(o,u,e),c=u;var g=(e=p).updateQueue;if(null===g){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break t}if(0===(1&e)){ma(o,u,e),mc();break t}c=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,e),ps(ua(c,l));break t}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===Bl?Bl=[o]:Bl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Rs(o,pa(0,c,e));break t;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e,Rs(o,ga(o,l,e));break t}}o=o.return}while(null!==o)}_c(n)}catch(w){e=w,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function gc(){var t=Il.current;return Il.current=oa,null===t?oa:t}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Vl)||lc(Al,Nl)}function yc(t,e){var n=Dl;Dl|=2;var r=gc();for(Al===t&&Nl===e||(Wl=null,fc(t,e));;)try{vc();break}catch(i){pc(t,i)}if(_s(),Dl=n,Il.current=r,null!==Ml)throw Error(s(261));return Al=null,Nl=0,Ll}function vc(){for(;null!==Ml;)wc(Ml)}function bc(){for(;null!==Ml&&!Yt();)wc(Ml)}function wc(t){var e=kl(t.alternate,t,Pl);t.memoizedProps=t.pendingProps,null===e?_c(t):Ml=e,Tl.current=null}function _c(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Qa(n,e,Pl)))return void(Ml=n)}else{if(null!==(n=Ya(n,e)))return n.flags&=32767,void(Ml=n);if(null===t)return Ll=6,void(Ml=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Ml=e);Ml=e=t}while(null!==e);0===Ll&&(Ll=5)}function xc(t,e,n){var r=be,i=Cl.transition;try{Cl.transition=null,be=1,function(t,e,n,r){do{Sc()}while(null!==Yl);if(0!==(6&Dl))throw Error(s(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-oe(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}(t,o),t===Al&&(Ml=Al=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Ac(ee,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=be;be=1;var l=Dl;Dl|=4,Tl.current=null,function(t,e){if(ti=We,fr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break t}var a=0,l=-1,c=-1,u=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},We=!1,Za=e;null!==Za;)if(t=(e=Za).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Za=t;else for(;null!==Za;){e=Za;try{var g=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:ms(e.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(_){Ec(e,e.return,_)}if(null!==(t=e.sibling)){t.return=e.return,Za=t;break}Za=e.return}g=nl,nl=!1}(t,n),yl(n,t),pr(ei),We=!!ti,ei=ti=null,t.current=n,bl(n,t,i),$t(),Dl=l,be=a,Cl.transition=o}else t.current=n;if(Ql&&(Ql=!1,Yl=t,$l=i),o=t.pendingLanes,0===o&&(Gl=null),function(t){if(se&&"function"===typeof se.onCommitFiberRoot)try{se.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ic(t,Xt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=Kl,Kl=null,t;0!==(1&$l)&&0!==t.tag&&Sc(),o=t.pendingLanes,0!==(1&o)?t===Jl?Xl++:(Xl=0,Jl=t):Xl=0,Ui()}(t,e,n,r)}finally{Cl.transition=i,be=r}return null}function Sc(){if(null!==Yl){var t=we($l),e=Cl.transition,n=be;try{if(Cl.transition=null,be=16>t?16:t,null===Yl)var r=!1;else{if(t=Yl,Yl=null,$l=0,0!==(6&Dl))throw Error(s(331));var i=Dl;for(Dl|=4,Za=t.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else t:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break t}Za=o.return}}var b=t.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else t:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Ec(l,l.return,x)}if(l===a){Za=null;break t}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break t}Za=l.return}}if(Dl=i,Ui(),se&&"function"===typeof se.onPostCommitFiberRoot)try{se.onPostCommitFiberRoot(ie,t)}catch(x){}r=!0}return r}finally{be=n,Cl.transition=e}}return!1}function kc(t,e,n){t=Os(t,e=pa(0,e=ua(n,e),1),1),e=ec(),null!==t&&(ye(t,1,e),ic(t,e))}function Ec(t,e,n){if(3===t.tag)kc(t,t,n);else for(;null!==e;){if(3===e.tag){kc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){e=Os(e,t=ga(e,t=ua(n,t),1),1),t=ec(),null!==e&&(ye(e,1,t),ic(e,t));break}}e=e.return}}function Ic(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ec(),t.pingedLanes|=t.suspendedLanes&n,Al===t&&(Nl&n)===n&&(4===Ll||3===Ll&&(130023424&Nl)===Nl&&500>Xt()-Ul?fc(t,0):zl|=n),ic(t,e)}function Tc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=ec();null!==(t=Ds(t,e))&&(ye(t,e,n),ic(t,n))}function Cc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),Tc(t,n)}function Dc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(e),Tc(t,n)}function Ac(t,e){return Gt(t,e)}function Mc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(t,e,n,r){return new Mc(t,e,n,r)}function Pc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Oc(t,e){var n=t.alternate;return null===n?((n=Nc(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,r,i,o){var a=2;if(r=t,"function"===typeof t)Pc(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Rc(n.children,i,o,e);case k:a=8,i|=8;break;case E:return(t=Nc(12,n,e,2|i)).elementType=E,t.lanes=o,t;case D:return(t=Nc(13,n,e,i)).elementType=D,t.lanes=o,t;case A:return(t=Nc(19,n,e,i)).elementType=A,t.lanes=o,t;case P:return Fc(n,i,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case I:a=10;break t;case T:a=9;break t;case C:a=11;break t;case M:a=14;break t;case N:a=16,r=null;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Nc(a,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Rc(t,e,n,r){return(t=Nc(7,t,r,e)).lanes=n,t}function Fc(t,e,n,r){return(t=Nc(22,t,r,e)).elementType=P,t.lanes=n,t.stateNode={isHidden:!1},t}function Vc(t,e,n){return(t=Nc(6,t,null,e)).lanes=n,t}function zc(t,e,n){return(e=Nc(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=me(0),this.expirationTimes=me(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=me(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(t,e,n,r,i,s,o,a,l){return t=new Bc(t,e,n,a,l),1===e?(e=1,!0===s&&(e|=8)):e=0,s=Nc(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),t}function Uc(t){if(!t)return Ti;t:{if(Ut(t=t._reactInternals)!==t||1!==t.tag)throw Error(s(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ni(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(s(171))}if(1===t.tag){var n=t.type;if(Ni(n))return Li(t,n,e)}return e}function qc(t,e,n,r,i,s,o,a,l){return(t=jc(n,r,!0,t,0,s,0,a,l)).context=Uc(null),n=t.current,(s=Ps(r=ec(),i=nc(n))).callback=void 0!==e&&null!==e?e:null,Os(n,s,i),t.current.lanes=i,ye(t,i,r),ic(t,r),t}function Wc(t,e,n,r){var i=e.current,s=ec(),o=nc(i);return n=Uc(n),null===e.context?e.context=n:e.pendingContext=n,(e=Ps(s,o)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Os(i,e,o))&&(rc(t,i,o,s),Ls(t,i,o)),o}function Hc(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Kc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Gc(t,e){Kc(t,e),(t=t.alternate)&&Kc(t,e)}kl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Di.current)wa=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return wa=!1,function(t,e,n){switch(e.tag){case 3:Aa(e),fs();break;case 5:so(e);break;case 1:Ni(e.type)&&Ri(e);break;case 4:ro(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ii(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(Ii(ao,1&ao.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Va(t,e,n):(Ii(ao,1&ao.current),null!==(t=Ha(t,e,n))?t.sibling:null);Ii(ao,1&ao.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return qa(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ao,ao.current),r)break;return null;case 22:case 23:return e.lanes=0,Ea(t,e,n)}return Ha(t,e,n)}(t,e,n);wa=0!==(131072&t.flags)}else wa=!1,is&&0!==(1048576&e.flags)&&Zi(e,Ki,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wa(t,e),t=e.pendingProps;var i=Mi(e,Ci.current);ks(e,n),i=ko(null,e,r,t,i,n);var o=Eo();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ni(r)?(o=!0,Ri(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(e),i.updater=js,e.stateNode=i,i._reactInternals=e,Hs(e,r,t,n),e=Da(null,e,r,!0,o,n)):(e.tag=0,is&&o&&ts(e),_a(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Pc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===M)return 14}return 2}(r),t=ms(r,t),i){case 0:e=Ta(null,e,r,t,n);break t;case 1:e=Ca(null,e,r,t,n);break t;case 11:e=xa(null,e,r,t,n);break t;case 14:e=Sa(null,e,r,ms(r.type,t),n);break t}throw Error(s(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ta(t,e,r,i=e.elementType===r?i:ms(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ca(t,e,r,i=e.elementType===r?i:ms(r,i),n);case 3:t:{if(Aa(e),null===t)throw Error(s(387));r=e.pendingProps,i=(o=e.memoizedState).element,Ns(t,e),Fs(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Ma(t,e,r,n,i=ua(Error(s(423)),e));break t}if(r!==i){e=Ma(t,e,r,n,i=ua(Error(s(424)),e));break t}for(rs=ci(e.stateNode.containerInfo.firstChild),ns=e,is=!0,ss=null,n=Xs(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){e=Ha(t,e,n);break t}_a(t,e,r,n)}e=e.child}return e;case 5:return so(e),null===t&&cs(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(e.flags|=32),Ia(t,e),_a(t,e,a,n),e.child;case 6:return null===t&&cs(e),null;case 13:return Va(t,e,n);case 4:return ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=$s(e,null,r,n):_a(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,xa(t,e,r,i=e.elementType===r?i:ms(r,i),n);case 7:return _a(t,e,e.pendingProps,n),e.child;case 8:case 12:return _a(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ii(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Di.current){e=Ha(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ps(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ss(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ks(e,n),r=r(i=Es(i)),e.flags|=1,_a(t,e,r,n),e.child;case 14:return i=ms(r=e.type,e.pendingProps),Sa(t,e,r,i=ms(r.type,i),n);case 15:return ka(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ms(r,i),Wa(t,e),e.tag=1,Ni(r)?(t=!0,Ri(e)):t=!1,ks(e,n),qs(e,r,i),Hs(e,r,i,n),Da(null,e,r,!0,t,n);case 19:return qa(t,e,n);case 22:return Ea(t,e,n)}throw Error(s(156,e.tag))};var Qc="function"===typeof reportError?reportError:function(t){console.error(t)};function Yc(t){this._internalRoot=t}function $c(t){this._internalRoot=t}function Xc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zc(){}function tu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var t=Hc(o);a.call(t)}}Wc(e,o,t,i)}else o=function(t,e,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var t=Hc(o);s.call(t)}}var o=qc(e,r,t,0,null,!1,0,"",Zc);return t._reactRootContainer=o,t[pi]=o.current,Ur(8===t.nodeType?t.parentNode:t),hc(),o}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var a=r;r=function(){var t=Hc(l);a.call(t)}}var l=jc(t,0,!1,null,0,!1,0,"",Zc);return t._reactRootContainer=l,t[pi]=l.current,Ur(8===t.nodeType?t.parentNode:t),hc((function(){Wc(e,l,n,r)})),l}(n,e,t,i,r);return Hc(o)}$c.prototype.render=Yc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(s(409));Wc(t,e,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;hc((function(){Wc(null,t,null,null)})),e[pi]=null}},$c.prototype.unstable_scheduleHydration=function(t){if(t){var e=ke();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pe.length&&0!==e&&e<Pe[n].priority;n++);Pe.splice(n,0,t),0===n&&Fe(t)}},_e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),ic(e,Xt()),0===(6&Dl)&&(ql=Xt()+500,Ui()))}break;case 13:hc((function(){var e=Ds(t,1);if(null!==e){var n=ec();rc(e,t,1,n)}})),Gc(t,1)}},xe=function(t){if(13===t.tag){var e=Ds(t,134217728);if(null!==e)rc(e,t,134217728,ec());Gc(t,134217728)}},Se=function(t){if(13===t.tag){var e=nc(t),n=Ds(t,e);if(null!==n)rc(n,t,e,ec());Gc(t,e)}},ke=function(){return be},Ee=function(t,e){var n=be;try{return be=t,e()}finally{be=n}},xt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_i(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":st(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=uc,Dt=hc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,_i,It,Tt,uc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ru),se=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(e))throw Error(s(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Xc(t))throw Error(s(299));var n=!1,r="",i=Qc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=jc(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,Ur(8===t.nodeType?t.parentNode:t),new Yc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw t=Object.keys(t).join(","),Error(s(268,t))}return t=null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return hc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(s(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Xc(t))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=qc(e,null,t,1,null!=n?n:null,i,0,o,a),t[pi]=e.current,Ur(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $c(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(s(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(s(40));return!!t._reactRootContainer&&(hc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=uc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return tu(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},391:(t,e,n)=>{var r=n(950);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},950:(t,e,n)=>{!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(730)},153:(t,e,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)o.call(e,r)&&!l.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===s[r]&&(s[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:s,_owner:a.current}}e.Fragment=s,e.jsx=c,e.jsxs=c},202:(t,e)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}function v(){}function b(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var i,s={},o=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)x.call(e,i)&&!k.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:t,key:o,ref:a,props:s,_owner:S.current}}function I(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var T=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function D(t,e,i,s,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=t),t=""===s?"."+C(l,0):s,_(o)?(i="",null!=t&&(i=t.replace(T,"$&/")+"/"),D(o,e,i,"",(function(t){return t}))):null!=o&&(I(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+t)),e.push(o)),1;if(l=0,s=""===s?".":s+":",_(t))for(var c=0;c<t.length;c++){var u=s+C(a=t[c],c);l+=D(a,e,i,u,o)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(a=t.next()).done;)l+=D(a=a.value,e,i,u=s+C(a,c++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function A(t,e,n){if(null==t)return t;var r=[],i=0;return D(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function M(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var N={current:null},P={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};e.Children={map:A,forEach:function(t,e,n){A(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return A(t,(function(){e++})),e},toArray:function(t){return A(t,(function(t){return t}))||[]},only:function(t){if(!I(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=o,e.PureComponent=b,e.StrictMode=s,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=g({},t.props),s=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=S.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x.call(e,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:s,ref:o,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=I,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=P.transition;P.transition={};try{t()}finally{P.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return N.current.useCallback(t,e)},e.useContext=function(t){return N.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return N.current.useDeferredValue(t)},e.useEffect=function(t,e){return N.current.useEffect(t,e)},e.useId=function(){return N.current.useId()},e.useImperativeHandle=function(t,e,n){return N.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return N.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return N.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return N.current.useMemo(t,e)},e.useReducer=function(t,e,n){return N.current.useReducer(t,e,n)},e.useRef=function(t){return N.current.useRef(t)},e.useState=function(t){return N.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return N.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return N.current.useTransition()},e.version="18.2.0"},43:(t,e,n)=>{t.exports=n(202)},579:(t,e,n)=>{t.exports=n(153)},234:(t,e)=>{function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<s(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=t[a],c=a+1,u=t[c];if(0>s(l,n))c<i&&0>s(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function s(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function _(t){if(m=!1,w(t),!g)if(null!==r(c))g=!0,P(x);else{var e=r(u);null!==e&&O(_,e.startTime-t)}}function x(t,n){g=!1,m&&(m=!1,v(I),I=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||t&&!D());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,E=null,I=-1,T=5,C=-1;function D(){return!(e.unstable_now()-C<T)}function A(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?S():(k=!1,E=null)}}else k=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,N=M.port2;M.port1.onmessage=A,S=function(){N.postMessage(null)}}else S=function(){y(A,0)};function P(t){E=t,k||(k=!0,S())}function O(t,n){I=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,P(x))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,s){var o=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(t.sortIndex=s,n(u,t),null===r(c)&&t===r(u)&&(m?(v(I),I=-1):m=!0,O(_,s-o))):(t.sortIndex=a,n(c,t),g||p||(g=!0,P(x))),t},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},853:(t,e,n)=>{t.exports=n(234)}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,n),s.exports}n.m=t,n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,r)=>(n.f[r](t,e),e)),[])),n.u=t=>"static/js/"+t+".493ca200.chunk.js",n.miniCssF=t=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={},e="greencheck:";n.l=(r,i,s,o)=>{if(t[r])t[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",e+s),a.src=r),t[r]=[i];var d=(e,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((t=>t(n))),e)return e(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/GreenCheck/",(()=>{var t={792:0};n.f.j=(e,r)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=t[e]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(e),a=new Error;n.l(o,(r=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+e,e)}};var e=(e,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((e=>0!==t[e]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(e&&e(r);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},r=self.webpackChunkgreencheck=self.webpackChunkgreencheck||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),(()=>{var t={};n.r(t),n.d(t,{FirebaseError:()=>To,SDK_VERSION:()=>Ma,_DEFAULT_ENTRY_NAME:()=>ga,_addComponent:()=>wa,_addOrOverwriteComponent:()=>_a,_apps:()=>ya,_clearComponents:()=>Ta,_components:()=>ba,_getProvider:()=>Sa,_isFirebaseApp:()=>Ea,_isFirebaseServerApp:()=>Ia,_registerComponent:()=>xa,_removeServiceInstance:()=>ka,_serverApps:()=>va,deleteApp:()=>Ra,getApp:()=>Oa,getApps:()=>La,initializeApp:()=>Na,initializeServerApp:()=>Pa,onLog:()=>Va,registerVersion:()=>Fa,setLogLevel:()=>za});var e=n(43),r=n(391);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function s(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function o(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return t+.5|0}const l=(t,e,n)=>Math.max(Math.min(t,n),e);function c(t){return l(a(2.55*t),0,255)}function u(t){return l(a(255*t),0,255)}function h(t){return l(a(t/2.55)/100,0,1)}function d(t){return l(a(100*t),0,100)}const f={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},p=[..."0123456789ABCDEF"],g=t=>p[15&t],m=t=>p[(240&t)>>4]+p[15&t],y=t=>(240&t)>>4===(15&t);function v(t){var e=(t=>y(t.r)&&y(t.g)&&y(t.b)&&y(t.a))(t)?g:m;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const b=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function w(t,e,n){const r=e*Math.min(n,1-n),i=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function _(t,e,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+t/60)%6;return n-n*e*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function x(t,e,n){const r=w(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function S(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),s=Math.min(e,n,r),o=(i+s)/2;let a,l,c;return i!==s&&(c=i-s,l=o>.5?c/(2-i-s):c/(i+s),a=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),a=60*a+.5),[0|a,l||0,o]}function k(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(u)}function E(t,e,n){return k(w,t,e,n)}function I(t){return(t%360+360)%360}function T(t){const e=b.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?c(+e[5]):u(+e[5]));const i=I(+e[2]),s=+e[3]/100,o=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return k(x,t,e,n)}(i,s,o):"hsv"===e[1]?function(t,e,n){return k(_,t,e,n)}(i,s,o):E(i,s,o),{r:n[0],g:n[1],b:n[2],a:r}}const C={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},D={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let A;function M(t){A||(A=function(){const t={},e=Object.keys(D),n=Object.keys(C);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,C[s]);s=parseInt(D[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),A.transparent=[0,0,0,0]);const e=A[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const N=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const P=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,O=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function L(t,e,n){if(t){let r=S(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=E(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function R(t,e){return t?Object.assign(e||{},t):t}function F(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=u(t[3]))):(e=R(t,{r:0,g:0,b:0,a:1})).a=u(e.a),e}function V(t){return"r"===t.charAt(0)?function(t){const e=N.exec(t);let n,r,i,s=255;if(e){if(e[7]!==n){const t=+e[7];s=e[8]?c(t):l(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?c(n):l(n,0,255)),r=255&(e[4]?c(r):l(r,0,255)),i=255&(e[6]?c(i):l(i,0,255)),{r:n,g:r,b:i,a:s}}}(t):T(t)}class z{constructor(t){if(t instanceof z)return t;const e=typeof t;let n;"object"===e?n=F(t):"string"===e&&(n=function(t){var e,n=t.length;return"#"===t[0]&&(4===n||5===n?e={r:255&17*f[t[1]],g:255&17*f[t[2]],b:255&17*f[t[3]],a:5===n?17*f[t[4]]:255}:7!==n&&9!==n||(e={r:f[t[1]]<<4|f[t[2]],g:f[t[3]]<<4|f[t[4]],b:f[t[5]]<<4|f[t[6]],a:9===n?f[t[7]]<<4|f[t[8]]:255})),e}(t)||M(t)||V(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=R(this._rgb);return t&&(t.a=h(t.a)),t}set rgb(t){this._rgb=F(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(h(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"))}(this._rgb):void 0}hexString(){return this._valid?v(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=S(t),n=e[0],r=d(e[1]),i=d(e[2]);return t.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(h(t.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const s=e===i?.5:e,o=2*s-1,a=n.a-r.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=O(h(t.r)),i=O(h(t.g)),s=O(h(t.b));return{r:u(P(r+n*(O(h(e.r))-r))),g:u(P(i+n*(O(h(e.g))-i))),b:u(P(s+n*(O(h(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new z(this.rgb)}alpha(t){return this._rgb.a=u(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=a(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return L(this._rgb,2,t),this}darken(t){return L(this._rgb,2,-t),this}saturate(t){return L(this._rgb,1,t),this}desaturate(t){return L(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=S(t);n[0]=I(n[0]+e),n=E(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function B(){}const j=(()=>{let t=0;return()=>t++})();function U(t){return null===t||"undefined"===typeof t}function q(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function W(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function H(t){return("number"===typeof t||t instanceof Number)&&isFinite(+t)}function K(t,e){return H(t)?t:e}function G(t,e){return"undefined"===typeof t?e:t}const Q=(t,e)=>"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Y(t,e,n){if(t&&"function"===typeof t.call)return t.apply(n,e)}function $(t,e,n,r){let i,s,o;if(q(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(W(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function X(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function J(t){if(q(t))return t.map(J);if(W(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=J(t[n[i]]);return e}return t}function Z(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function tt(t,e,n,r){if(!Z(t))return;const i=e[t],s=n[t];W(i)&&W(s)?et(i,s,r):e[t]=J(s)}function et(t,e,n){const r=q(e)?e:[e],i=r.length;if(!W(t))return t;const s=(n=n||{}).merger||tt;let o;for(let a=0;a<i;++a){if(o=r[a],!W(o))continue;const e=Object.keys(o);for(let r=0,i=e.length;r<i;++r)s(e[r],t,o,n)}return t}function nt(t,e){return et(t,e,{merger:rt})}function rt(t,e,n){if(!Z(t))return;const r=e[t],i=n[t];W(r)&&W(i)?nt(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=J(i))}const it={"":t=>t,x:t=>t.x,y:t=>t.y};function st(t,e){const n=it[e]||(it[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function ot(t){return t.charAt(0).toUpperCase()+t.slice(1)}const at=t=>"undefined"!==typeof t,lt=t=>"function"===typeof t,ct=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};const ut=Math.PI,ht=2*ut,dt=ht+ut,ft=Number.POSITIVE_INFINITY,pt=ut/180,gt=ut/2,mt=ut/4,yt=2*ut/3,vt=Math.log10,bt=Math.sign;function wt(t,e,n){return Math.abs(t-e)<n}function _t(t){const e=Math.round(t);t=wt(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(vt(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function xt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function St(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function kt(t){return t*(ut/180)}function Et(t){return t*(180/ut)}function It(t){if(!H(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Tt(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*ut&&(s+=ht),{angle:s,distance:i}}function Ct(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Dt(t,e){return(t-e+dt)%ht-ut}function At(t){return(t%ht+ht)%ht}function Mt(t,e,n,r){const i=At(t),s=At(e),o=At(n),a=At(s-i),l=At(o-i),c=At(i-s),u=At(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Nt(t,e,n){return Math.max(e,Math.min(n,t))}function Pt(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Ot(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Lt=(t,e,n,r)=>Ot(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Rt=(t,e,n)=>Ot(t,n,(r=>t[r][e]>=n));const Ft=["push","pop","shift","splice","unshift"];function Vt(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(Ft.forEach((e=>{delete t[e]})),delete t._chartjs)}function zt(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Bt="undefined"===typeof window?function(t){return t()}:window.requestAnimationFrame;function jt(t,e){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];n=s,r||(r=!0,Bt.call(window,(()=>{r=!1,t.apply(e,n)})))}}const Ut=t=>"start"===t?"left":"end"===t?"right":"center",qt=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Wt(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(i=Nt(Math.min(Lt(a,l,c).lo,n?r:Lt(e,l,o.getPixelForValue(c)).lo),0,r-1)),s=d?Nt(Math.max(Lt(a,o.axis,u,!0).hi+1,n?0:Lt(e,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:r-i}return{start:i,count:s}}function Ht(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Kt=t=>0===t||1===t,Gt=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*ht/n),Qt=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ht/n)+1,Yt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*gt),easeOutSine:t=>Math.sin(t*gt),easeInOutSine:t=>-.5*(Math.cos(ut*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Kt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Kt(t)?t:Gt(t,.075,.3),easeOutElastic:t=>Kt(t)?t:Qt(t,.075,.3),easeInOutElastic(t){const e=.1125;return Kt(t)?t:t<.5?.5*Gt(2*t,e,.45):.5+.5*Qt(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Yt.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Yt.easeInBounce(2*t):.5*Yt.easeOutBounce(2*t-1)+.5};function $t(t){if(t&&"object"===typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Xt(t){return $t(t)?t:new z(t)}function Jt(t){return $t(t)?t:new z(t).saturate(.5).darken(.1).hexString()}const Zt=["x","y","borderWidth","radius","tension"],te=["color","borderColor","backgroundColor"];const ee=new Map;function ne(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=ee.get(n);return r||(r=new Intl.NumberFormat(t,e),ee.set(n,r)),r}(e,n).format(t)}const re={values:t=>q(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),s=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t));return n}(t,n)}const o=vt(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ne(t,r,l)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(vt(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?re.numeric.call(this,t,e,n):""}};var ie={formatters:re};const se=Object.create(null),oe=Object.create(null);function ae(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const e=n[r];t=t[e]||(t[e]=Object.create(null))}return t}function le(t,e,n){return"string"===typeof e?et(ae(t,e),n):et(ae(t,""),e)}class ce{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Jt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Jt(e.borderColor),this.hoverColor=(t,e)=>Jt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return le(this,t,e)}get(t){return ae(this,t)}describe(t,e){return le(oe,t,e)}override(t,e){return le(se,t,e)}route(t,e,n,r){const i=ae(this,t),s=ae(this,n),o="_"+e;Object.defineProperties(i,{[o]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[o],e=s[r];return W(t)?Object.assign({},e,t):G(t,e)},set(t){this[o]=t}}})}apply(t){t.forEach((t=>t(this)))}}var ue=new ce({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:te},numbers:{type:"number",properties:Zt}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ie.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function he(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function de(t,e,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||q(h)){if(q(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||q(d)||(o=he(t,i,s,o,d))}else o=he(t,i,s,o,h);t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function fe(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function pe(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function ge(t,e,n,r){me(t,e,n,r,null)}function me(t,e,n,r,i){let s,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let m=(p||0)*pt;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:i?t.ellipse(n,r,i/2,g,0,0,ht):t.arc(n,r,g,0,ht),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=yt,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=yt,t.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+mt)*l,h=Math.cos(m+mt)*(i?i/2-c:l),a=Math.sin(m+mt)*l,d=Math.sin(m+mt)*(i?i/2-c:l),t.arc(n-h,r-a,c,m-ut,m-gt),t.arc(n+d,r-o,c,m-gt,m),t.arc(n+h,r+a,c,m,m+gt),t.arc(n-d,r+o,c,m+gt,m+ut),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}m+=mt;case"rectRot":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+d,r-o),t.lineTo(n+h,r+a),t.lineTo(n-d,r+o),t.closePath();break;case"crossRot":m+=mt;case"cross":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"star":h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o),m+=mt,h=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-h,r-a),t.lineTo(n+h,r+a),t.moveTo(n+d,r-o),t.lineTo(n-d,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function ye(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ve(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function be(t){t.restore()}function we(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!==!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function _e(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function xe(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Se(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ke(t,e,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=q(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),U(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Se(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),U(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),xe(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Ee(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ut,ut,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ut,gt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,gt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-gt,!0),t.lineTo(n+o.topLeft,r)}const Ie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Te=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ce(t,e){const n=(""+t).match(Ie);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const De=t=>+t||0;function Ae(t,e){const n={},r=W(e),i=r?Object.keys(e):e,s=W(t)?r?n=>G(t[n],t[e[n]]):e=>t[e]:()=>t;for(const o of i)n[o]=De(s(o));return n}function Me(t){return Ae(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ne(t){return Ae(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Pe(t){const e=Me(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Oe(t,e){t=t||{},e=e||ue.font;let n=G(t.size,e.size);"string"===typeof n&&(n=parseInt(n,10));let r=G(t.style,e.style);r&&!(""+r).match(Te)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:G(t.family,e.family),lineHeight:Ce(G(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:G(t.weight,e.weight),string:""};return i.string=function(t){return!t||U(t.size)||U(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Le(t,e,n,r){let i,s,o,a=!0;for(i=0,s=t.length;i<s;++i)if(o=t[i],void 0!==o&&(void 0!==e&&"function"===typeof o&&(o=o(e),a=!1),void 0!==n&&q(o)&&(o=o[n%o.length],a=!1),void 0!==o))return r&&!a&&(r.cacheable=!1),o}function Re(t,e){return Object.assign(Object.create(t),e)}function Fe(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>t[0];const i=(arguments.length>2?arguments[2]:void 0)||t;"undefined"===typeof n&&(n=Qe("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>Fe([r,...t],e,i,n)};return new Proxy(s,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>Ue(n,r,(()=>function(t,e,n,r){let i;for(const s of e)if(i=Qe(Be(s,t),n),"undefined"!==typeof i)return je(t,i)?Ke(n,r,t,i):i}(r,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Ye(t).includes(e),ownKeys:t=>Ye(t),set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function Ve(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ze(t,r),setContext:e=>Ve(t,e,n,r),override:i=>Ve(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>Ue(t,e,(()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];lt(a)&&o.isScriptable(e)&&(a=function(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);a.delete(t),je(t,l)&&(l=Ke(i._scopes,i,t,l));return l}(e,a,t,n));q(a)&&a.length&&(a=function(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&r(t))return e[s.index%e.length];if(W(e[0])){const n=e,r=i._scopes.filter((t=>t!==n));e=[];for(const l of n){const n=Ke(r,i,t,l);e.push(Ve(n,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable));je(e,a)&&(a=Ve(a,i,s&&s[e],o));return a}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function ze(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:lt(n)?n:()=>n,isIndexable:lt(r)?r:()=>r}}const Be=(t,e)=>t?t+ot(e):e,je=(t,e)=>W(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Ue(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function qe(t,e,n){return lt(t)?t(e,n):t}const We=(t,e)=>!0===t?e:"string"===typeof t?st(e,t):void 0;function He(t,e,n,r,i){for(const s of e){const e=We(n,s);if(e){t.add(e);const s=qe(e._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===e&&"undefined"!==typeof r&&n!==r)return null}return!1}function Ke(t,e,n,r){const i=e._rootScopes,s=qe(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Ge(a,o,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=Ge(a,o,s,l,r),null!==l))&&Fe(Array.from(a),[""],i,s,(()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];if(q(i)&&W(n))return n;return i||{}}(e,n,r))))}function Ge(t,e,n,r,i){for(;n;)n=He(t,e,n,r,i);return n}function Qe(t,e){for(const n of e){if(!n)continue;const e=n[t];if("undefined"!==typeof e)return e}}function Ye(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function $e(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={r:i.parse(st(u,s),c)};return o}const Xe=Number.EPSILON||1e-14,Je=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ze=t=>"x"===t?"y":"x";function tn(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Ct(s,i),l=Ct(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+d*(o.x-i.x),y:s.y+d*(o.y-i.y)}}}function en(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Ze(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Je(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Je(t,o+1),l){if(c){const t=c[e]-l[e];i[o]=0!==t?(c[n]-l[n])/t:0}s[o]=a?c?bt(i[o-1])!==bt(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}!function(t,e,n){const r=t.length;let i,s,o,a,l,c=Je(t,0);for(let u=0;u<r-1;++u)l=c,c=Je(t,u+1),l&&c&&(wt(e[u],0,Xe)?n[u]=n[u+1]=0:(i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])))}(t,i,s),function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Ze(n),i=t.length;let s,o,a,l=Je(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Je(t,c+1),!a)continue;const i=a[n],u=a[r];o&&(s=(i-o[n])/3,a["cp1".concat(n)]=i-s,a["cp1".concat(r)]=u-s*e[c]),l&&(s=(l[n]-i)/3,a["cp2".concat(n)]=i+s,a["cp2".concat(r)]=u+s*e[c])}}(t,s,e)}function nn(t,e,n){return Math.max(Math.min(t,n),e)}function rn(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)en(t,i);else{let n=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=tn(n,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}e.capBezierPoints&&function(t,e){let n,r,i,s,o,a=ye(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&ye(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=nn(i.cp1x,e.left,e.right),i.cp1y=nn(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=nn(i.cp2x,e.left,e.right),i.cp2y=nn(i.cp2y,e.top,e.bottom)))}(t,n)}function sn(){return"undefined"!==typeof window&&"undefined"!==typeof document}function on(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function an(t,e,n){let r;return"string"===typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const ln=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const cn=["top","right","bottom","left"];function un(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=cn[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const hn=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function dn(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=ln(n),s="border-box"===i.boxSizing,o=un(i,"padding"),a=un(i,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o,a,l=!1;if(hn(i,s,t.target))o=i,a=s;else{const t=e.getBoundingClientRect();o=r.clientX-t.left,a=r.clientY-t.top,l=!0}return{x:o,y:a,box:l}}(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const fn=t=>Math.round(10*t)/10;function pn(t,e,n,r){const i=ln(t),s=un(i,"margin"),o=an(i.maxWidth,t,"clientWidth")||ft,a=an(i.maxHeight,t,"clientHeight")||ft,l=function(t,e,n){let r,i;if(void 0===e||void 0===n){const s=on(t);if(s){const t=s.getBoundingClientRect(),o=ln(s),a=un(o,"border","width"),l=un(o,"padding");e=t.width-l.width-a.width,n=t.height-l.height-a.height,r=an(o.maxWidth,s,"clientWidth"),i=an(o.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||ft,maxHeight:i||ft}}(t,e,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const t=un(i,"border","width"),e=un(i,"padding");c-=e.width+t.width,u-=e.height+t.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=fn(Math.min(c,o,l.maxWidth)),u=fn(Math.min(u,a,l.maxHeight)),c&&!u&&(u=fn(c/2));return(void 0!==e||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=fn(Math.floor(u*r))),{width:c,height:u}}function gn(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(t.height,"px"),o.style.width="".concat(t.width,"px")),(t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s)&&(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0)}const mn=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sn()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function yn(t,e){const n=function(t,e){return ln(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function vn(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function bn(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function wn(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=vn(t,i,n),a=vn(i,s,n),l=vn(s,e,n),c=vn(o,a,n),u=vn(a,l,n);return vn(c,u,n)}function _n(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function xn(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Sn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function kn(t){return"angle"===t?{between:Mt,compare:Dt,normalize:At}:{between:Pt,compare:(t,e)=>t-e,normalize:t=>t}}function En(t){let{start:e,end:n,count:r,loop:i,style:s}=t;return{start:e%r,end:n%r,loop:i&&(n-e+1)%r===0,style:s}}function In(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=kn(r),{start:u,end:h,loop:d,style:f}=function(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=kn(r),l=e.length;let c,u,{start:h,end:d,loop:f}=t;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(e[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:t.style}}(t,e,n),p=[];let g,m,y,v=!1,b=null;const w=()=>v||l(i,y,g)&&0!==a(i,y),_=()=>!v||0===a(s,g)||l(s,y,g);for(let x=u,S=u;x<=h;++x)m=e[x%o],m.skip||(g=c(m[r]),g!==y&&(v=l(g,i,s),null===b&&w()&&(b=0===a(g,i)?x:S),null!==b&&_()&&(p.push(En({start:b,end:x,loop:d,count:o,style:f})),b=null),S=x,y=g));return null!==b&&p.push(En({start:b,end:h,loop:d,count:o,style:f})),p}function Tn(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=In(r[i],t.points,e);s.length&&n.push(...s)}return n}function Cn(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),s=Dn(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(t,e,r,i){const s=a?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=s;for(;n[e%l].skip;)e+=s;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:r,style:i}),u=i,h=e%l)}}for(const p of e){h=a?h:p.start;let t,e=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];t=Dn(r.setContext(Re(i,{type:"segment",p0:e,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),An(t,u)&&f(h,d-1,p.loop,u),e=s,u=t}h<d-1&&f(h,d-1,p.loop,u)}return c}(t,e,n,r):e}function Dn(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function An(t,e){if(!e)return!1;const n=[],r=function(t,e){return $t(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}class Mn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],s=e.duration;i.forEach((r=>r({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(n-e.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=Bt.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=0;this._charts.forEach(((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,o=i.length-1,a=!1;for(;o>=0;--o)s=i[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(t),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Nn=new Mn;const Pn="transparent",On={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=Xt(t||Pn),i=r.valid&&Xt(e||Pn);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Ln{constructor(t,e,n,r){const i=e[n];r=Le([t.to,r,i,t.from]);const s=Le([t.from,i,r]);this._active=!0,this._fn=t.fn||On[t.type||typeof s],this._easing=Yt[t.easing]||Yt.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Le([t.to,e,r,t.from]),this._from=Le([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,o=this._to;let a;if(this._active=i!==o&&(s||e<n),!this._active)return this._target[r]=o,void this._notify(!0);e<0?this._target[r]=i:(a=e/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[r]=this._fn(i,o,a))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}class Rn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!W(t))return;const e=Object.keys(ue.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((r=>{const i=t[r];if(!W(i))return;const s={};for(const t of e)s[t]=i[t];(q(i.properties)&&i.properties||[r]).forEach((t=>{t!==r&&n.has(t)||n.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(!n)return void(t.options=e);n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const e=t[r[i]];e&&e.active()&&n.push(e.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const c=e[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(i[l]=u=new Ln(h,t,l,c),r.push(u)):t[l]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Nn.add(this._chart,n),!0):void 0}}function Fn(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:r?s:i,end:r?i:s}}function Vn(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function zn(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.keys,s="single"===r.mode;let o,a,l,c;if(null!==e){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],H(c)&&(s||0===e||bt(e)===bt(c))&&(e+=c)}return e}}function Bn(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function jn(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Un(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function qn(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=function(t,e,n){return"".concat(t.id,".").concat(e.id,".").concat(n.stack||n.type)}(s,o,r),h=e.length;let d;for(let f=0;f<h;++f){const t=e[f],{[l]:n,[c]:s}=t;d=(t._stacks||(t._stacks={}))[c]=jn(i,u,n),d[a]=s,d._top=Un(d,o,!0,r.type),d._bottom=Un(d,o,!1,r.type);(d._visualValues||(d._visualValues={}))[a]=s}}function Wn(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Hn(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Kn=t=>"reset"===t||"none"===t,Gn=(t,e)=>e?t:Object.assign({},t);class Qn{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Bn(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Hn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=G(n.xAxisID,Wn(t,"x")),s=e.yAxisID=G(n.yAxisID,Wn(t,"y")),o=e.rAxisID=G(n.rAxisID,Wn(t,"r")),a=e.indexAxis,l=e.iAxisID=r(a,i,s,o),c=e.vAxisID=r(a,s,i,o);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Vt(this._data,this),t._stacked&&Hn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(W(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}(e);else if(n!==e){if(n){Vt(n,this);const t=this._cachedMeta;Hn(t),t._parsed=[]}e&&Object.isExtensible(e)&&(i=this,(r=e)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Ft.forEach((t=>{const e="_onData"+ot(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const o=n.apply(this,i);return r._chartjs.listeners.forEach((t=>{"function"===typeof t[e]&&t[e](...i)})),o}})})))),this._syncList=[],this._data=e}var r,i}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=Bn(e.vScale,e),e.stack!==n.stack&&(r=!0,Hn(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&qn(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,o=i.axis;let a,l,c,u=0===t&&e===r.length||n._sorted,h=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=q(r[t])?this.parseArrayData(n,r,t,e):W(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<e;++a)n._parsed[a+t]=l=c[a],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&qn(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:s}=t,o=i.axis,a=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[o]:c||i.parse(l[f],f),[a]:s.parse(e[f],f)};return u}parseArrayData(t,e,n,r){const{xScale:i,yScale:s}=t,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=e[c],o[a]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(t,e,n,r){const{xScale:i,yScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=e[h],l[c]={x:i.parse(st(d,o),h),y:s.parse(st(d,a),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,s=e[t.axis];return zn({keys:Vn(r,!0),values:e._stacks[t.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let s=null===i?NaN:i;const o=r&&n._stacks[e.axis];r&&o&&(r.values=o,s=zn(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,s=r.length,o=this._getOtherScale(t),a=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Vn(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=r[h];const e=d[o.axis];return!H(d[t.axis])||c>e||u<e}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,t,d,a),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,t,d,a);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r][t.axis],H(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return W(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(G(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=Fn(t,n),i=Fn(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||r.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,o,a),c=o;c<o+a;++c){const e=r[c];e.hidden||(e.active&&l?s.push(e):e.draw(t,i))}for(c=0;c<s.length;++c)s[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return Re(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return Re(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===e,i=this._cachedDataOpts,s=t+"-"+e,o=i[s],a=this.enableOptionSharing&&at(n);if(o)return Gn(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=r?["".concat(t,"Hover"),"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(ue.elements[t]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,r,e)),u);return f.$shared&&(f.$shared=a,i[s]=Object.freeze(Gn(f,a))),f}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(e),o=i[s];if(o)return o;let a;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),s=r.getOptionScopes(this.getDataset(),i);a=r.createResolver(s,this.getContext(t,n,e))}const l=new Rn(r,a&&a.animations);return a&&a._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Kn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:s}}updateElement(t,e,n,r){Kn(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Kn(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const r=n.length,i=e.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=t+e;let o;const a=t=>{for(t.length+=e,o=t.length-1;o>=s;o--)t[o]=t[o-e]};for(a(i),o=t;o<s;++o)i[o]=new this.dataElementType;this._parsing&&a(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&Hn(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Yn(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=zt(r.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let r,i,s,o,a=e._length;const l=()=>{32767!==s&&-32768!==s&&(at(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(r=0,i=n.length;r<i;++r)s=e.getPixelForValue(n[r]),l();for(o=void 0,r=0,i=e.ticks.length;r<i;++r)s=e.getPixelForTick(r),l();return a}function $n(t,e,n,r){return q(t)?function(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Xn(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=e[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push($n(d,h,s,c));return l}function Jn(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Zn(t,e,n,r){let i=e.borderSkipped;const s={};if(!i)return void(t.borderSkipped=s);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[tr(u,o,a,l)]=!0,i=c)),s[tr(i,o,a,l)]=!0,t.borderSkipped=s}function tr(t,e,n,r){var i,s,o;return r?(o=n,t=er(t=(i=t)===(s=e)?o:i===o?s:i,n,e)):t=er(t,e,n),t}function er(t,e,n){return"start"===t?e:"end"===t?n:t}function nr(t,e,n){let{inflateAmount:r}=e;t.inflateAmount="auto"===r?1===n?.33:0:r}o(Qn,"defaults",{}),o(Qn,"datasetElementType",null),o(Qn,"dataElementType",null);class rr extends Qn{parsePrimitiveData(t,e,n,r){return Xn(t,e,n,r)}parseArrayData(t,e,n,r){return Xn(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:s}=t,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===i.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=e[h],f={},f[i.axis]=i.parse(st(p,l),h),u.push($n(st(p,c),f,s,h));return u}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),s=i._custom,o=Jn(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,r);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=i||U(e[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(e._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||Jn(e._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,t[d].active?"active":r));const m=g.options||t[d].options;Zn(g,m,p,s),nr(g,m,c.ratio),this.updateElement(t[d],d,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),i=n.options.stacked,s=[],o=t=>{const n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(U(r)||isNaN(r))return!0};for(const a of r)if((void 0===e||!o(a))&&((!1===i||-1===s.indexOf(a.stack)||void 0===i&&void 0===a.stack)&&s.push(a.stack),a.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,s;for(i=0,s=e.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=t.barThickness;return{min:o||Yn(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,o=i||0,a=this.getParsed(t),l=a._custom,c=Jn(l);let u,h,d=a[e.axis],f=0,p=n?this.applyStack(e,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&bt(d)!==bt(l.barEnd)&&(f=0),f+=d);const g=U(i)||c?f:i;let m=e.getPixelForValue(g);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(t,e,n){return 0!==t?bt(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(h,e,o)*s,d===o&&(m-=h/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),l=Math.min(t,i),f=Math.max(t,i);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[e.axis]._visualValues[r]=e.getValueForPixel(u)-e.getValueForPixel(m))}if(m===e.getPixelForValue(o)){const t=bt(h)*e.getLineWidthForValue(o)/2;m+=t,h-=t}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,s=G(r.maxBarThickness,1/0);let o,a;if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,l="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}(t,e,r,n):function(t,e,n,r){const i=n.barThickness;let s,o;return U(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}(t,e,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(t)[n.axis],t),a=Math.min(s,e.min*e.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[e.axis]&&n[i].draw(this._ctx)}}o(rr,"id","bar"),o(rr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),o(rr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ir extends Qn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let s=0;s<i.length;s++){const t=e[n+s];i[s]._custom=G(t[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let s=0;s<i.length;s++){const t=e[n+s];i[s]._custom=G(t&&t.r&&+t.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y),l=s._custom;return{label:n[t]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(e,r),c=s.axis,u=o.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,e.active?"active":r),i&&(d.options.radius=0)),this.updateElement(e,h,d,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=G(n&&n._custom,i),r}}o(ir,"id","bubble"),o(ir,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),o(ir,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class sr extends Qn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,o=t=>+n[t];if(W(n[t])){const{key:t="value"}=this._parsing;o=e=>+st(n[e],t)}for(i=t,s=t+e;i<s;++i)r._parsed[i]=o(i)}}_getRotation(){return kt(this.options.rotation-90)}_getCircumference(){return kt(this.options.circumference)}_getRotationExtents(){let t=ht,e=-ht;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(t,e,n){let r=1,i=1,s=0,o=0;if(e<ht){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(t,e,r)=>Mt(t,a,l,!0)?1:Math.max(e,e*n,r,r*n),p=(t,e,r)=>Mt(t,a,l,!0)?-1:Math.min(e,e*n,r,r*n),g=f(0,c,h),m=f(gt,u,d),y=p(ut,c,h),v=p(ut+gt,u,d);r=(g-y)/2,i=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),w=Q(this.options.radius,b),_=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,r.total=this.calculateTotal(),this.outerRadius=w-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/ht)}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=i&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=e,this.updateElement(n,g,s,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?ht*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ne(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,s,o,a;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),t=s.data,o=s.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)a=o.resolveDataElementOptions(r),"inner"!==a.borderAlign&&(e=Math.max(e,a.borderWidth||0,a.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(G(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}o(sr,"id","doughnut"),o(sr,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),o(sr,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),o(sr,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class or extends Qn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,s=this.chart._animationsDisabled;let{start:o,count:a}=Wt(e,r,s);this._drawStart=o,this._drawCount=a,Ht(e)&&(o=0,a=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},t),this.updateElements(r,o,a,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(e,r),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=xt(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,y=e+n,v=t.length;let b=e>0&&this.getParsed(e-1);for(let w=0;w<v;++w){const n=t[w],f=m?n:{};if(w<e||w>=y){f.skip=!0;continue}const v=this.getParsed(w),_=U(v[d]),x=f[h]=s.getPixelForValue(v[h],w),S=f[d]=i||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],w);f.skip=isNaN(x)||isNaN(S)||_,f.stop=w>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[w]),u&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":r)),m||this.updateElement(n,w,f,r),b=v}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}o(or,"id","line"),o(or,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),o(or,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ar extends Qn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ne(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return $e.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(t,e,n,r){const i="reset"===r,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*ut;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,r,f);for(h=e;h<e+n;h++){const e=t[h];let n=d,p=d+this._computeAngle(h,r,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,e.active?"active":r)};this.updateElement(e,h,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?kt(this.resolveDataElementOptions(t,e).angle||n):0}}o(ar,"id","polarArea"),o(ar,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),o(ar,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map(((e,i)=>{const s=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class lr extends sr{}o(lr,"id","pie"),o(lr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class cr extends Qn{getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return $e.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,s,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let o=e;o<e+n;o++){const e=t[o],n=this.resolveDataElementOptions(o,e.active?"active":r),a=i.getPointPositionForValue(o,this.getParsed(o).r),l=s?i.xCenter:a.x,c=s?i.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,o,u,r)}}}o(cr,"id","radar"),o(cr,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),o(cr,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ur extends Qn{getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,s=this.getParsed(t),o=r.getLabelForValue(s.x),a=i.getLabelForValue(s.y);return{label:n[t]||"",value:"("+o+", "+a+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:s}=Wt(e,n,r);if(this._drawStart=i,this._drawCount=s,Ht(e)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const o=this.resolveDatasetElementOptions(t);o.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:o},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=xt(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=e>0&&this.getParsed(e-1);for(let b=e;b<e+n;++b){const e=t[b],n=this.getParsed(b),c=y?e:{},p=U(n[f]),w=c[d]=s.getPixelForValue(n[d],b),_=c[f]=i||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(w)||isNaN(_)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,e.active?"active":r)),y||this.updateElement(e,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,s)/2}}o(ur,"id","scatter"),o(ur,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),o(ur,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function hr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class dr{static override(t){Object.assign(dr.prototype,t)}constructor(t){o(this,"options",void 0),this.options=t||{}}init(){}formats(){return hr()}parse(){return hr()}format(){return hr()}add(){return hr()}diff(){return hr()}startOf(){return hr()}endOf(){return hr()}}var fr=dr;function pr(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const t=a._reversePixels?Rt:Lt;if(!r)return t(s,e,n);if(i._sharedOptions){const r=s[0],i="function"===typeof r.getRange&&r.getRange(e);if(i){const r=t(s,e,n-i),o=t(s,e,n+i);return{lo:r.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function gr(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:t,data:n}=s[a],{lo:l,hi:c}=pr(s[a],e,o,i);for(let e=l;e<=c;++e){const i=n[e];i.skip||r(i,t,e)}}}function mr(t,e,n,r,i){const s=[];if(!i&&!t.isPointInArea(e))return s;return gr(t,n,e,(function(n,o,a){(i||ye(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function yr(t,e,n,r,i,s){let o=[];const a=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,s=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return gr(t,n,e,(function(n,c,u){const h=n.inRange(e.x,e.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||t.isPointInArea(d))&&!h)return;const f=a(e,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function vr(t,e,n,r,i,s){return s||t.isPointInArea(e)?"r"!==n||r?yr(t,e,n,r,i,s):function(t,e,n,r){let i=[];return gr(t,n,e,(function(t,n,s){const{startAngle:o,endAngle:a}=t.getProps(["startAngle","endAngle"],r),{angle:l}=Tt(t,{x:e.x,y:e.y});Mt(l,o,a)&&i.push({element:t,datasetIndex:n,index:s})})),i}(t,e,n,i):[]}function br(t,e,n,r,i){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return gr(t,n,e,((t,r,l)=>{t[o](e[n],i)&&(s.push({element:t,datasetIndex:r,index:l}),a=a||t.inRange(e.x,e.y,i))})),r&&!a?[]:s}var wr={evaluateInteractionItems:gr,modes:{index(t,e,n,r){const i=dn(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?mr(t,i,s,r,o):vr(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,n,r){const i=dn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?mr(t,i,s,r,o):vr(t,i,s,!1,r,o);if(a.length>0){const e=a[0].datasetIndex,n=t.getDatasetMeta(e).data;a=[];for(let t=0;t<n.length;++t)a.push({element:n[t],datasetIndex:e,index:t})}return a},point:(t,e,n,r)=>mr(t,dn(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=dn(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return vr(t,i,s,n.intersect,r,o)},x:(t,e,n,r)=>br(t,dn(e,t),"x",n.intersect,r),y:(t,e,n,r)=>br(t,dn(e,t),"y",n.intersect,r)}};const _r=["left","top","right","bottom"];function xr(t,e){return t.filter((t=>t.pos===e))}function Sr(t,e){return t.filter((t=>-1===_r.indexOf(t.pos)&&t.box.axis===e))}function kr(t,e){return t.sort(((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Er(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!_r.includes(r))continue;const s=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*r:o&&e.availableWidth,a.height=i):(a.width=r,a.height=c?c*i:o&&e.availableHeight)}return n}function Ir(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Tr(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Cr(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!W(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?s.height:s.width),n.size=e.size/e.count,t[i]+=n.size}s.getPadding&&Tr(o,s.getPadding());const a=Math.max(0,e.outerWidth-Ir(o,t,"left","right")),l=Math.max(0,e.outerHeight-Ir(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Dr(t,e){const n=e.maxPadding;function r(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{r[t]=Math.max(e[t],n[t])})),r}return r(t?["left","right"]:["top","bottom"])}function Ar(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Dr(a.horizontal,e));const{same:o,other:h}=Cr(e,n,a,r);c|=o&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Ar(i,e,n,r)||u}function Mr(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Nr(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const t=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const r=e.w*c,s=l.size||t.height;at(l.start)&&(o=l.start),t.fullSize?Mr(t,i.left,o,n.outerWidth-i.right-i.left,s):Mr(t,e.left+l.placed,o,r,s),l.start=o,l.placed+=r,o=t.bottom}else{const r=e.h*c,o=l.size||t.width;at(l.start)&&(s=l.start),t.fullSize?Mr(t,s,i.top,o,n.outerHeight-i.bottom-i.top):Mr(t,s,e.top+l.placed,o,r),l.start=s,l.placed+=r,s=t.right}}e.x=s,e.y=o}var Pr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Pe(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=function(t){const e=function(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=i),e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=kr(e.filter((t=>t.box.fullSize)),!0),r=kr(xr(e,"left"),!0),i=kr(xr(e,"right")),s=kr(xr(e,"top"),!0),o=kr(xr(e,"bottom")),a=Sr(e,"x"),l=Sr(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:xr(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;$(t.boxes,(t=>{"function"===typeof t.beforeLayout&&t.beforeLayout()}));const u=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},i);Tr(d,Pe(r));const f=Object.assign({maxPadding:d,w:s,h:o,x:i.left,y:i.top},i),p=Er(l.concat(c),h);Ar(a.fullSize,f,h,p),Ar(l,f,h,p),Ar(c,f,h,p)&&Ar(l,f,h,p),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Nr(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,Nr(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},$(a.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class Or{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Lr extends Or{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Rr="$chartjs",Fr={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vr=t=>null===t||""===t;const zr=!!mn&&{passive:!0};function Br(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,zr)}function jr(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Ur(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||jr(n.addedNodes,r),e=e&&!jr(n.removedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function qr(t,e,n){const r=t.canvas,i=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||jr(n.removedNodes,r),e=e&&!jr(n.addedNodes,r);e&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}const Wr=new Map;let Hr=0;function Kr(){const t=window.devicePixelRatio;t!==Hr&&(Hr=t,Wr.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function Gr(t,e,n){const r=t.canvas,i=r&&on(r);if(!i)return;const s=jt(((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()}),window),o=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||s(n,r)}));return o.observe(i),function(t,e){Wr.size||window.addEventListener("resize",Kr),Wr.set(t,e)}(t,s),o}function Qr(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Wr.delete(t),Wr.size||window.removeEventListener("resize",Kr)}(t)}function Yr(t,e,n){const r=t.canvas,i=jt((e=>{null!==t.ctx&&n(function(t,e){const n=Fr[t.type]||t.type,{x:r,y:i}=dn(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,zr)}(r,e,i),i}class $r extends Or{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Rr]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Vr(i)){const e=yn(t,"width");void 0!==e&&(t.width=e)}if(Vr(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=yn(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Rr])return!1;const n=e[Rr].initial;["height","width"].forEach((t=>{const r=n[t];U(r)?e.removeAttribute(t):e.setAttribute(t,r)}));const r=n.style||{};return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[Rr],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:Ur,detach:qr,resize:Gr}[e]||Yr;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:Qr,detach:Qr,resize:Qr}[e]||Br)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return pn(t,e,n,r)}isAttached(t){const e=on(t);return!(!e||!e.isConnected)}}class Xr{constructor(){o(this,"x",void 0),o(this,"y",void 0),o(this,"active",!1),o(this,"options",void 0),o(this,"$animations",void 0)}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return xt(this.x)&&xt(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach((t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),r}}function Jr(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return function(t,e,n,r){let i,s=0,o=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===o&&(e.push(t[i]),s++,o=n[s*r])}(e,c,s,o/i),c;const u=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const s=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}(r);for(let o=0,a=s.length-1;o<a;o++){const t=s[o];if(t>i)return t}return Math.max(i,1)}(s,e,i);if(o>0){let t,n;const r=o>1?Math.round((l-a)/(o-1)):null;for(Zr(e,c,u,U(r)?0:a-r,a),t=0,n=o-1;t<n;t++)Zr(e,c,u,s[t],s[t+1]);return Zr(e,c,u,l,U(r)?e.length:l+r),c}return Zr(e,c,u),c}function Zr(t,e,n,r,i){const s=G(r,0),o=Math.min(G(i,t.length),t.length);let a,l,c,u=0;for(n=Math.ceil(n),i&&(a=i-r,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(e.push(t[l]),u++,c=Math.round(s+u*n))}o(Xr,"defaults",{}),o(Xr,"defaultRoutes",void 0);const ti=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,ei=(t,e)=>Math.min(e||t,t);function ni(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function ri(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l,c=t.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,o-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function ii(t){return t.drawTicks?t.tickLength:0}function si(t,e){if(!t.display)return 0;const n=Oe(t.font,e),r=Pe(t.padding);return(q(t.text)?t.text.length:1)*n.lineHeight+r.height}function oi(t,e,n){let r=Ut(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class ai extends Xr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=K(t,Number.POSITIVE_INFINITY),e=K(e,Number.NEGATIVE_INFINITY),n=K(n,Number.POSITIVE_INFINITY),r=K(r,Number.NEGATIVE_INFINITY),{min:K(t,n),max:K(e,r),minDefined:H(t),maxDefined:H(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)e=o[a].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),s||(r=Math.max(r,e.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:K(n,K(r,n)),max:K(r,K(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Y(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,s=Q(e,(i-r)/2),o=(t,e)=>n&&0===t?0:t+e;return{min:o(r,-Math.abs(s)),max:o(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?ni(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Jr(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Y(this.options.afterUpdate,[this])}beforeSetDimensions(){Y(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Y(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Y(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Y(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=Y(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){Y(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Y(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=ei(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let s,o,a,l=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Nt(this.chart.width-u,0,this.maxWidth);s=t.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(t.offset?.5:1)),o=this.maxHeight-ii(t.grid)-e.padding-si(t.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=Et(Math.min(Math.asin(Nt((c.highest.height+6)/s,-1,1)),Math.asin(Nt(o/a,-1,1))-Math.asin(Nt(h/a,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Y(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Y(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=si(r,e.options.font);if(o?(t.width=this.maxWidth,t.height=ii(i)+s):(t.height=this.maxHeight,t.width=ii(i)+s),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:s}=this._getLabelSizes(),a=2*n.padding,l=kt(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const e=n.mirror?0:u*i.width+c*s.height;t.height=Math.min(this.maxHeight,t.height+e+a)}else{const e=n.mirror?0:c*i.width+u*s.height;t.width=Math.min(this.maxWidth,t.width+e+a)}this._calculatePadding(e,r,u,c)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=r*t.width,h=n*e.height):(u=n*t.height,h=r*e.width):"start"===i?h=e.width:"end"===i?u=t.width:"inner"!==i&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Y(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)U(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=ni(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,s=[],o=[],a=Math.floor(e/ei(e,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,w=0;for(l=0;l<e;l+=a){if(h=t[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,U(h)||q(h)){if(q(h))for(c=0,u=h.length;c<u;++c)v=h[c],U(v)||q(v)||(m=he(r,p.data,p.gc,m,v),y+=g)}else m=he(r,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),w=Math.max(y,w)}!function(t,e){$(t,(t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}}))}(i,e);const _=s.indexOf(b),x=o.indexOf(w),S=t=>({width:s[t]||0,height:o[t]||0});return{first:S(0),last:S(e-1),widest:S(_),highest:S(x),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Nt(this._alignToPixels?fe(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Re(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Re(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=kt(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),s=t.autoSkipPadding||0,o=i?i.widest.width+s:0,a=i?i.highest.height+s:0;return this.isHorizontal()?a*n>o*r?o/n:a/r:a*r<o*n?a/n:o/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:o}=r,a=i.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=ii(i),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(t){return fe(n,t,f)};let m,y,v,b,w,_,x,S,k,E,I,T;if("top"===s)m=g(this.bottom),_=this.bottom-u,S=m-p,E=g(t.top)+p,T=t.bottom;else if("bottom"===s)m=g(this.top),E=t.top,T=g(t.bottom)-p,_=m+p,S=this.top+u;else if("left"===s)m=g(this.right),w=this.right-u,x=m-p,k=g(t.left)+p,I=t.right;else if("right"===s)m=g(this.left),k=t.left,I=g(t.right)-p,w=m+p,x=this.left+u;else if("x"===e){if("center"===s)m=g((t.top+t.bottom)/2+.5);else if(W(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}E=t.top,T=t.bottom,_=m+p,S=_+u}else if("y"===e){if("center"===s)m=g((t.left+t.right)/2);else if(W(s)){const t=Object.keys(s)[0],e=s[t];m=g(this.chart.scales[t].getPixelForValue(e))}w=m-p,x=w-u,k=t.left,I=t.right}const C=G(r.ticks.maxTicksLimit,c),D=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=D){const t=this.getContext(y),e=i.setContext(t),r=o.setContext(t),s=e.lineWidth,c=e.color,u=r.dash||[],d=r.dashOffset,f=e.tickWidth,p=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;v=ri(this,y,a),void 0!==v&&(b=fe(n,v,s),l?w=x=k=I=b:_=S=E=T=b,h.push({tx1:w,ty1:_,tx2:x,ty2:S,x1:k,y1:E,x2:I,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=i,h=ii(n.grid),d=h+c,f=u?-c:d,p=-kt(this.labelRotation),g=[];let m,y,v,b,w,_,x,S,k,E,I,T,C="middle";if("top"===r)_=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===r)_=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,w=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(h);x=t.textAlign,w=t.x}else if("x"===e){if("center"===r)_=(t.top+t.bottom)/2+d;else if(W(r)){const t=Object.keys(r)[0],e=r[t];_=this.chart.scales[t].getPixelForValue(e)+d}x=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)w=(t.left+t.right)/2-d;else if(W(r)){const t=Object.keys(r)[0],e=r[t];w=this.chart.scales[t].getPixelForValue(e)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===e&&("start"===a?C="top":"end"===a&&(C="bottom"));const D=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const t=i.setContext(this.getContext(m));S=this.getPixelForTick(m)+i.labelOffset,k=this._resolveTickFontOptions(m),E=k.lineHeight,I=q(b)?b.length:1;const e=I/2,n=t.color,a=t.textStrokeColor,c=t.textStrokeWidth;let h,d=x;if(s?(w=S,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===r?"near"===l||0!==p?-I*E+E/2:"center"===l?-D.highest.height/2-e*E+E:-D.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?D.highest.height/2-e*E:D.highest.height-I*E,u&&(T*=-1),0===p||t.showLabelBackdrop||(w+=E/2*Math.sin(p))):(_=S,T=(1-I)*E/2),t.showLabelBackdrop){const e=Pe(t.backdropPadding),n=D.heights[m],r=D.widths[m];let i=T-e.top,s=0-e.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(x){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===y-1?s-=r:m>0&&(s-=r/2)}h={left:s,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:k,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:C,translation:[w,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-kt(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=t+i,o=this._getLabelSizes().widest.width;let a,l;return"left"===e?r?(l=this.right+i,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));if(n>=0){return e.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,s;const o=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,s=r.length;i<s;++i){const t=r[i];e.drawOnChartArea&&o({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&o({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const o=r.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=fe(t,this.left,s)-s/2,c=fe(t,this.right,o)+o/2,u=h=a):(u=fe(t,this.top,s)-s/2,h=fe(t,this.bottom,o)+o/2,l=c=a),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&ve(e,n);const r=this.getLabelItems(t);for(const i of r){const t=i.options,n=i.font;ke(e,i.label,0,i.textOffset,n,t)}n&&be(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=Oe(n.font),s=Pe(n.padding),o=n.align;let a=i.lineHeight/2;"bottom"===e||"center"===e||W(e)?(a+=s.bottom,q(n.text)&&(a+=i.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-i,m=a-s;if(t.isHorizontal()){if(d=qt(r,s,a),W(n)){const t=Object.keys(n)[0],r=n[t];f=u[t].getPixelForValue(r)+g-e}else f="center"===n?(c.bottom+c.top)/2+g-e:ti(t,n,e);h=a-s}else{if(W(n)){const t=Object.keys(n)[0],r=n[t];d=u[t].getPixelForValue(r)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:ti(t,n,e);f=qt(r,o,i),p="left"===n?-gt:gt}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,e,o);ke(t,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:oi(o,e,r),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=G(t.grid&&t.grid.z,-1),r=G(t.border&&t.border.z,0);return this._isVisible()&&this.draw===ai.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=e.length;i<s;++i){const s=e[i];s[n]!==this.id||t&&s.type!==t||r.push(s)}return r}_resolveTickFontOptions(t){return Oe(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class li{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=et(Object.create(null),[n?ue.get(n):{},ue.get(e),t.defaults]);ue.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ue.route(s,i,l,a)}))}(e,t.defaultRoutes);t.descriptors&&ue.describe(e,t.descriptors)}(t,s,n),this.override&&ue.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in ue[r]&&(delete ue[r][n],this.override&&delete se[n])}}class ci{constructor(){this.controllers=new li(Qn,"datasets",!0),this.elements=new li(Xr,"elements"),this.plugins=new li(Object,"plugins"),this.scales=new li(ai,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e)}remove(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e)}addControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.controllers)}addElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.elements)}addPlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.plugins)}addScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("register",e,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.controllers)}removeElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.elements)}removePlugins(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.plugins)}removeScales(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._each("unregister",e,this.scales)}_each(t,e,n){[...e].forEach((e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):$(e,(e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)}))}))}_exec(t,e,n){const r=ot(t);Y(n["before"+r],[],n),e[t](n),Y(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var ui=new ci;class hi{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const i=r?this._descriptors(t).filter(r):this._descriptors(t),s=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall")),s}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===Y(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){U(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=G(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(ui.plugins.items);for(let s=0;s<r.length;s++)n.push(ui.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const t=i[s];-1===n.indexOf(t)&&(n.push(t),e[t.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,e,n,r){let{plugins:i,localIds:s}=e;const o=[],a=t.getContext();for(const l of i){const e=l.id,i=di(n[e],r);null!==i&&o.push({plugin:l,options:fi(t.config,{plugin:l,local:s[e]},i,a)})}return o}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function di(t,e){return e||!1!==t?!0===t?{}:t:null}function fi(t,e,n,r){let{plugin:i,local:s}=e;const o=t.pluginScopeKeys(i),a=t.getOptionScopes(n,o);return s&&i.defaults&&a.push(i.defaults),t.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function pi(t,e){const n=ue.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function gi(t){if("x"===t||"y"===t||"r"===t)return t}function mi(t){if(gi(t))return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(const s of n){const e=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&gi(t[0].toLowerCase());if(e)return e}var i;throw new Error("Cannot determine type of '".concat(t,"' axis. Please provide 'axis' or 'position' option."))}function yi(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function vi(t,e){const n=se[t.type]||{scales:{}},r=e.scales||{},i=pi(t.type,e),s=Object.create(null);return Object.keys(r).forEach((e=>{const o=r[e];if(!W(o))return console.error("Invalid scale configuration for scale: ".concat(e));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const a=mi(e,o,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return yi(t,"x",n[0])||yi(t,"y",n[0])}return{}}(e,t),ue.scales[o.type]),l=function(t,e){return t===e?"_index_":"_value_"}(a,i),c=n.scales||{};s[e]=nt(Object.create(null),[{axis:a},o,c[a],c[l]])})),t.data.datasets.forEach((n=>{const i=n.type||t.type,o=n.indexAxis||pi(i,e),a=(se[i]||{}).scales||{};Object.keys(a).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),i=n[e+"AxisID"]||e;s[i]=s[i]||Object.create(null),nt(s[i],[{axis:e},r[i],a[t]])}))})),Object.keys(s).forEach((t=>{const e=s[t];nt(e,[ue.scales[e.type],ue.scale])})),s}function bi(t){const e=t.options||(t.options={});e.plugins=G(e.plugins,{}),e.scales=vi(t,e)}function wi(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const _i=new Map,xi=new Set;function Si(t,e){let n=_i.get(t);return n||(n=e(),_i.set(t,n),xi.add(n)),n}const ki=(t,e,n)=>{const r=st(e,n);void 0!==r&&t.add(r)};class Ei{constructor(t){this._config=function(t){return(t=t||{}).data=wi(t.data),bi(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=wi(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),bi(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Si(t,(()=>[["datasets.".concat(t),""]]))}datasetAnimationScopeKeys(t,e){return Si("".concat(t,".transition.").concat(e),(()=>[["datasets.".concat(t,".transitions.").concat(e),"transitions.".concat(e)],["datasets.".concat(t),""]]))}datasetElementScopeKeys(t,e){return Si("".concat(t,"-").concat(e),(()=>[["datasets.".concat(t,".elements.").concat(e),"datasets.".concat(t),"elements.".concat(e),""]]))}pluginScopeKeys(t){const e=t.id,n=this.type;return Si("".concat(n,"-plugin-").concat(e),(()=>[["plugins.".concat(e),...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,s=this._cachedScopes(t,n),o=s.get(e);if(o)return o;const a=new Set;e.forEach((e=>{t&&(a.add(t),e.forEach((e=>ki(a,t,e)))),e.forEach((t=>ki(a,r,t))),e.forEach((t=>ki(a,se[i]||{},t))),e.forEach((t=>ki(a,ue,t))),e.forEach((t=>ki(a,oe,t)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),xi.has(e)&&s.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,se[e]||{},ue.datasets[e]||{},{type:e},ue,oe]}resolveNamedOptions(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:o}=Ii(this._resolverCache,t,r);let a=s;if(function(t,e){const{isScriptable:n,isIndexable:r}=ze(t);for(const i of e){const e=n(i),s=r(i),o=(s||e)&&t[i];if(e&&(lt(o)||Ti(o))||s&&q(o))return!0}return!1}(s,e)){i.$shared=!1;a=Ve(s,n=lt(n)?n():n,this.createResolver(t,n,o))}for(const l of e)i[l]=a[l];return i}createResolver(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=Ii(this._resolverCache,t,n);return W(e)?Ve(i,e,void 0,r):i}}function Ii(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:Fe(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},r.set(i,s)}return s}const Ti=t=>W(t)&&Object.getOwnPropertyNames(t).some((e=>lt(t[e])));const Ci=["top","bottom","left","right","chartArea"];function Di(t,e){return"top"===t||"bottom"===t||-1===Ci.indexOf(t)&&"x"===e}function Ai(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Mi(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Y(n&&n.onComplete,[t],e)}function Ni(t){const e=t.chart,n=e.options.animation;Y(n&&n.onProgress,[t],e)}function Pi(t){return sn()&&"string"===typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Oi={},Li=t=>{const e=Pi(t);return Object.values(Oi).filter((t=>t.canvas===e)).pop()};function Ri(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const s=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=s)}}}function Fi(t,e,n){return t.options.clip?t[n]:e[n]}class Vi{static register(){ui.add(...arguments),zi()}static unregister(){ui.remove(...arguments),zi()}constructor(t,e){const n=this.config=new Ei(e),r=Pi(t),i=Li(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!sn()||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Lr:$r}(r)),this.platform.updateConfig(n);const o=this.platform.acquireContext(r,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=j(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new hi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}((t=>this.update(t)),s.resizeDelay||0),this._dataChanges=[],Oi[this.id]=this,o&&a?(Nn.listen(this,"complete",Mi),Nn.listen(this,"progress",Ni),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return U(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ui}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():gn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return pe(this.canvas,this.ctx),this}stop(){return Nn.stop(this),this}resize(t,e){Nn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,t,e,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,gn(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Y(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){$(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let i=[];e&&(i=i.concat(Object.keys(e).map((t=>{const n=e[t],r=mi(t,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}})))),$(i,(e=>{const i=e.options,s=i.id,o=mi(s,i),a=G(i.type,e.dtype);void 0!==i.position&&Di(i.position,o)===Di(e.dposition)||(i.position=e.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(ui.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,t)})),$(r,((t,e)=>{t||delete n[e]})),$(n,(t=>{Pr.configure(this,t,t.options),Pr.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(Ai("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||pi(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=ui.getController(s),{datasetElementType:r,dataElementType:o}=ue.datasets[s];Object.assign(e,{dataElementType:ui.getElement(o),datasetElementType:r&&ui.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){$(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:t}=this.getDatasetMeta(l),e=!r&&-1===i.indexOf(t);t.buildOrUpdateElements(e),s=Math.max(+t.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||$(i,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ai("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){$(this.scales,(t=>{Pr.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);ct(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e){Ri(t,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),r=n(0);for(let i=1;i<e;i++)if(!ct(r,n(i)))return;return Array.from(r).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Pr.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],$(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,lt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Nn.has(this)?this.attached&&!Nn.running(this)&&Nn.start(this):(this.draw(),Mi({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,i=function(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Fi(n,e,"left"),right:Fi(n,e,"right"),top:Fi(r,e,"top"),bottom:Fi(r,e,"bottom")}:e}(t,this.chartArea),s={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(r&&ve(e,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),t.controller.draw(),r&&be(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return ye(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=wr.modes[e];return"function"===typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter((t=>t&&t._dataset===e)).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Re(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"===typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),s=i.controller._resolveAnimations(void 0,r);at(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),s.update(i,{visible:n}),this.update((e=>e.datasetIndex===t?r:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Nn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),pe(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Oi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};$(this.options.events,(t=>n(t,r)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let s;const o=()=>{r("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){$(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},$(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,s,o,a;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,a=t.length;o<a;++o){s=t[o];const e=s&&this.getDatasetMeta(s.datasetIndex).controller;e&&e[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((t=>{let{datasetIndex:e,index:n}=t;const r=this.getDatasetMeta(e);if(!r)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:r.data[n],index:n}}));!X(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),s=i(e,t),o=n?t:i(t,e);s.length&&this.updateHoverStyle(s,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,s=e,o=this._getActiveElements(t,r,n,s),a=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,a);n&&(this._lastEvent=null,Y(i.onHover,[t,o,this],this),a&&Y(i.onClick,[t,o,this],this));const c=!X(o,r);return(c||e)&&(this._active=o,this._updateHoverStyles(o,r,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function zi(){return $(Vi.instances,(t=>t._plugins.invalidate()))}function Bi(t,e,n,r){const i=Ae(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-e)/2,o=Math.min(s,r*e/2),a=t=>{const e=(n-Math.min(s,t))*r/2;return Nt(t,0,Math.min(s,e))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Nt(i.innerStart,0,o),innerEnd:Nt(i.innerEnd,0,o)}}function ji(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Ui(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const t=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==t?p*t/(t+r):p))/2}const g=(p-Math.max(.001,p*h-n/ut)/h)/2,m=l+g+f,y=i-g-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:_}=Bi(e,d,h,y-m),x=h-v,S=h-b,k=m+v/x,E=y-b/S,I=d+w,T=d+_,C=m+w/I,D=y-_/T;if(t.beginPath(),s){const e=(k+E)/2;if(t.arc(o,a,h,k,e),t.arc(o,a,h,e,E),b>0){const e=ji(S,E,o,a);t.arc(e.x,e.y,b,E,y+gt)}const n=ji(T,y,o,a);if(t.lineTo(n.x,n.y),_>0){const e=ji(T,D,o,a);t.arc(e.x,e.y,_,y+gt,D+Math.PI)}const r=(y-_/d+(m+w/d))/2;if(t.arc(o,a,d,y-_/d,r,!0),t.arc(o,a,d,r,m+w/d,!0),w>0){const e=ji(I,C,o,a);t.arc(e.x,e.y,w,C+Math.PI,m-gt)}const i=ji(x,m,o,a);if(t.lineTo(i.x,i.y),v>0){const e=ji(x,k,o,a);t.arc(e.x,e.y,v,m-gt,k)}}else{t.moveTo(o,a);const e=Math.cos(k)*h+o,n=Math.sin(k)*h+a;t.lineTo(e,n);const r=Math.cos(E)*h+o,i=Math.sin(E)*h+a;t.lineTo(r,i)}t.closePath()}function qi(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(s){Ui(t,e,n,r,p,i);for(let e=0;e<s;++e)t.stroke();isNaN(a)||(p=o+(a%ht||ht))}f&&function(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+gt,r-gt),t.closePath(),t.clip()}(t,e,p),s||(Ui(t,e,n,r,p,i),t.stroke())}o(Vi,"defaults",ue),o(Vi,"instances",Oi),o(Vi,"overrides",se),o(Vi,"registry",ui),o(Vi,"version","4.4.2"),o(Vi,"getChart",Li);class Wi extends Xr{constructor(t){super(),o(this,"circumference",void 0),o(this,"endAngle",void 0),o(this,"fullCircles",void 0),o(this,"innerRadius",void 0),o(this,"outerRadius",void 0),o(this,"pixelMargin",void 0),o(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=Tt(r,{x:t,y:e}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=G(u,a-o)>=ht||Mt(i,o,a),f=Pt(s,l+h,c+h);return d&&f}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:a,spacing:l}=this.options,c=(r+i)/2,u=(s+o+l+a)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ht?Math.floor(n/ht):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const a=r*(1-Math.sin(Math.min(ut,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Ui(t,e,n,r,l,i);for(let e=0;e<s;++e)t.fill();isNaN(a)||(l=o+(a%ht||ht))}Ui(t,e,n,r,l,i),t.fill()}(t,this,a,i,s),qi(t,this,a,i,s),t.restore()}}function Hi(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;t.lineCap=G(n.borderCapStyle,e.borderCapStyle),t.setLineDash(G(n.borderDash,e.borderDash)),t.lineDashOffset=G(n.borderDashOffset,e.borderDashOffset),t.lineJoin=G(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=G(n.borderWidth,e.borderWidth),t.strokeStyle=G(n.borderColor,e.borderColor)}function Ki(t,e,n){t.lineTo(n.x,n.y)}function Gi(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Qi(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Gi(i,n,r),u=function(t){return t.stepped?we:t.tension||"monotone"===t.cubicInterpolationMode?_e:Ki}(s);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=c;++h)d=i[(a+(g?c-h:h))%o],d.skip||(p?(t.moveTo(d.x,d.y),p=!1):u(t,f,d,g,s.stepped),f=d);return l&&(d=i[(a+(g?c:0))%o],u(t,f,d,g,s.stepped)),!!l}function Yi(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=Gi(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,g,m=0,y=0;const v=t=>(o+(c?a-t:t))%s,b=()=>{f!==p&&(t.lineTo(m,p),t.lineTo(m,f),t.lineTo(m,g))};for(l&&(h=i[v(0)],t.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=i[v(u)],h.skip)continue;const e=h.x,n=h.y,r=0|e;r===d?(n<f?f=n:n>p&&(p=n),m=(y*m+e)/++y):(b(),t.lineTo(e,n),d=r,y=0,f=p=n),g=n}b()}function $i(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&"monotone"!==e.cubicInterpolationMode&&!e.stepped&&!n?Yi:Qi}o(Wi,"id","arc"),o(Wi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),o(Wi,"defaultRoutes",{backgroundColor:"backgroundColor"}),o(Wi,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const Xi="function"===typeof Path2D;function Ji(t,e,n,r){Xi&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Hi(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:s}=e,o=$i(e);for(const a of i)Hi(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}class Zi extends Xr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;rn(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=function(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}(n,i,s,r);return Cn(t,!0===r?[{start:o,end:a,loop:s}]:function(t,e,n,r){const i=t.length,s=[];let o,a=e,l=t[e];for(o=e+1;o<=n;++o){const n=t[o%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:e%i,end:(o-1)%i,loop:r}),e=a=n.stop?o:null):(a=o,l.skip&&(e=o)),l=n}return null!==a&&s.push({start:e%i,end:a%i,loop:r}),s}(n,o,a<o?a+i:a,!!t._fullLoop&&0===o&&a===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,s=Tn(this,{property:e,start:r,end:r});if(!s.length)return;const o=[],a=function(t){return t.stepped?bn:t.tension||"monotone"===t.cubicInterpolationMode?wn:vn}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((r-h[e])/(d[e]-h[e])),n.stepped);f[e]=t[e],o.push(f)}return 1===o.length?o[0]:o}pathSegment(t,e,n){return $i(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=$i(this);let s=this._loop;e=e||0,n=n||this.points.length-e;for(const o of r)s&=i(t,this,o,{start:e,end:e+n-1});return!!s}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Ji(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ts(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}o(Zi,"id","line"),o(Zi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),o(Zi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),o(Zi,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class es extends Xr{constructor(t){super(),o(this,"parsed",void 0),o(this,"skip",void 0),o(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return ts(this,t,"x",e)}inYRange(t,e){return ts(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!ye(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,ge(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function ns(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function rs(t,e,n,r){return t?0:Nt(e,n,r)}function is(t){const e=ns(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=Me(r);return{t:rs(i.top,s.top,0,n),r:rs(i.right,s.right,0,e),b:rs(i.bottom,s.bottom,0,n),l:rs(i.left,s.left,0,e)}}(t,n/2,r/2),s=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Ne(i),o=Math.min(e,n),a=t.borderSkipped,l=r||W(i);return{topLeft:rs(!l||a.top||a.left,s.topLeft,0,o),topRight:rs(!l||a.top||a.right,s.topRight,0,o),bottomLeft:rs(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:rs(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function ss(t,e,n,r){const i=null===e,s=null===n,o=t&&!(i&&s)&&ns(t,r);return o&&(i||Pt(e,o.left,o.right))&&(s||Pt(n,o.top,o.bottom))}function os(t,e){t.rect(e.x,e.y,e.w,e.h)}function as(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}o(es,"id","point"),o(es,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),o(es,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class ls extends Xr{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=is(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?Ee:os;var a;t.save(),s.w===i.w&&s.h===i.h||(t.beginPath(),o(t,as(s,e,i)),t.clip(),o(t,as(i,-e,s)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),o(t,as(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return ss(this,t,e,n)}inXRange(t,e){return ss(this,t,null,e)}inYRange(t,e){return ss(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}o(ls,"id","bar"),o(ls,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),o(ls,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});new WeakMap;const cs={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r.add(t.x),i+=t.y,++s}}const o=[...r].reduce(((t,e)=>t+e))/r.size;return{x:o,y:i/s}},nearest(t,e){if(!t.length)return!1;let n,r,i,s=e.x,o=e.y,a=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=Ct(e,r.getCenterPoint());t<a&&(a=t,i=r)}}if(i){const t=i.tooltipPosition();s=t.x,o=t.y}return{x:s,y:o}}};function us(t,e){return e&&(q(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hs(t){return("string"===typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ds(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function fs(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Oe(e.bodyFont),c=Oe(e.titleFont),u=Oe(e.footerFont),h=s.length,d=i.length,f=r.length,p=Pe(e.padding);let g=p.height,m=0,y=r.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){g+=f*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let v=0;const b=function(t){m=Math.max(m,n.measureText(t).width+v)};return n.save(),n.font=c.string,$(t.title,b),n.font=l.string,$(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,$(r,(t=>{$(t.before,b),$(t.lines,b),$(t.after,b)})),v=0,n.font=u.string,$(t.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function ps(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===r?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),function(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;return"left"===t&&i+s+o>e.width||"right"===t&&i-s-o<0||void 0}(c,t,e,n)&&(c="center"),c}function gs(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||ps(t,e,n,r),yAlign:r}}function ms(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ne(o);let p=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,a);const g=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+i:"right"===a&&(p+=Math.max(h,f)+i),{x:Nt(p,0,r.width-e.width),y:Nt(g,0,r.height-e.height)}}function ys(t,e,n){const r=Pe(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function vs(t){return us([],hs(t))}function bs(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ws={beforeTitle:B,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:B,beforeBody:B,beforeLabel:B,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return U(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:B,afterBody:B,beforeFooter:B,footer:B,afterFooter:B};function _s(t,e,n,r){const i=t[e].call(n,r);return"undefined"===typeof i?ws[e].call(n,r):i}class xs extends Xr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Rn(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,n=this._tooltipItems,Re(t,{tooltip:e,tooltipItems:n,type:"tooltip"})));var t,e,n}getTitle(t,e){const{callbacks:n}=e,r=_s(n,"beforeTitle",this,t),i=_s(n,"title",this,t),s=_s(n,"afterTitle",this,t);let o=[];return o=us(o,hs(r)),o=us(o,hs(i)),o=us(o,hs(s)),o}getBeforeBody(t,e){return vs(_s(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return $(t,(t=>{const e={before:[],lines:[],after:[]},i=bs(n,t);us(e.before,hs(_s(i,"beforeLabel",this,t))),us(e.lines,_s(i,"label",this,t)),us(e.after,hs(_s(i,"afterLabel",this,t))),r.push(e)})),r}getAfterBody(t,e){return vs(_s(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=_s(n,"beforeFooter",this,t),i=_s(n,"footer",this,t),s=_s(n,"afterFooter",this,t);let o=[];return o=us(o,hs(r)),o=us(o,hs(i)),o=us(o,hs(s)),o}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],s=[];let o,a,l=[];for(o=0,a=e.length;o<a;++o)l.push(ds(this.chart,e[o]));return t.filter&&(l=l.filter(((e,r,i)=>t.filter(e,r,i,n)))),t.itemSort&&(l=l.sort(((e,r)=>t.itemSort(e,r,n)))),$(l,(e=>{const n=bs(t.callbacks,e);r.push(_s(n,"labelColor",this,e)),i.push(_s(n,"labelPointStyle",this,e)),s.push(_s(n,"labelTextColor",this,e))})),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const t=cs[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const e=this._size=fs(this,n),o=Object.assign({},t,e),a=gs(this.chart,n,o),l=ms(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=Ne(o),{x:h,y:d}=t,{width:f,height:p}=e;let g,m,y,v,b,w;return"center"===i?(b=d+p/2,"left"===r?(g=h,m=g-s,v=b+s,w=b-s):(g=h+f,m=g+s,v=b-s,w=b+s),y=g):(m="left"===r?h+Math.max(a,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),w=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:w}}drawTitle(t,e,n){const r=this.title,i=r.length;let s,o,a;if(i){const l=_n(n.rtl,this.x,this.width);for(t.x=ys(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",s=Oe(n.titleFont),o=n.titleSpacing,e.fillStyle=n.titleColor,e.font=s.string,a=0;a<i;++a)e.fillText(r[a],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,a+1===i&&(t.y+=n.titleMarginBottom-o)}}_drawColorBox(t,e,n,r,i){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=i,c=Oe(i.bodyFont),u=ys(this,"left",i),h=r.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=e.y+d;if(i.usePointStyle){const e={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+a/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,ge(t,e,n,c),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,ge(t,e,n,c)}else{t.lineWidth=W(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const e=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),o=Ne(s.borderRadius);Object.values(o).some((t=>0!==t))?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Ee(t,{x:e,y:f,w:l,h:a,radius:o}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Ee(t,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,f,l,a),t.strokeRect(e,f,l,a),t.fillStyle=s.backgroundColor,t.fillRect(n,f+1,l-2,a-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Oe(n.bodyFont);let h=u.lineHeight,d=0;const f=_n(n.rtl,this.x,this.width),p=function(n){e.fillText(n,f.x(t.x+d),t.y+h/2),t.y+=h+i},g=f.textAlign(s);let m,y,v,b,w,_,x;for(e.textAlign=s,e.textBaseline="middle",e.font=u.string,t.x=ys(this,g,n),e.fillStyle=n.bodyColor,$(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,_=r.length;b<_;++b){for(m=r[b],y=this.labelTextColors[b],e.fillStyle=y,$(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(e,t,b,f,n),h=Math.max(u.lineHeight,a)),w=0,x=v.length;w<x;++w)p(v[w]),h=u.lineHeight;$(m.after,p)}d=0,h=u.lineHeight,$(this.afterBody,p),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let s,o;if(i){const a=_n(n.rtl,this.x,this.width);for(t.x=ys(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=a.textAlign(n.footerAlign),e.textBaseline="middle",s=Oe(n.footerFont),e.fillStyle=n.footerColor,e.font=s.string,o=0;o<i;++o)e.fillText(r[o],a.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:s}=this,{x:o,y:a}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Ne(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(o+u,a),"top"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+l-h,a),e.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(o+l,a+c-f),e.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(t,e,n,r),e.lineTo(o+d,a+c),e.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=cs[t.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=fs(this,t),o=Object.assign({},n,this._size),a=gs(e,t,o),l=ms(t,o,a,e);r._to===l.x&&i._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=Pe(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),xn(t,e.textDirection),i.y+=s.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),Sn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map((t=>{let{datasetIndex:e,index:n}=t;const r=this.chart.getDatasetMeta(e);if(!r)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:r.data[n],index:n}})),i=!X(n,r),s=this._positionChanged(r,e);(i||s)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(t,i,e,n),o=this._positionChanged(s,t),a=e||!X(s,i)||o;return a&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),a}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const s=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,s=cs[i.position].call(this,t,e);return!1!==s&&(n!==s.x||r!==s.y)}}o(xs,"positioners",cs);function Ss(t,e,n,r){const i=t.indexOf(e);if(-1===i)return((t,e,n,r)=>("string"===typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r);return i!==t.lastIndexOf(e)?n:i}function ks(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Es extends ai{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(U(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Nt(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:Ss(n,t,G(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=t;s<=e;s++)r.push({value:s});return r}getLabelForValue(t){return ks.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!==typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Is(t,e){const n=[],{bounds:r,step:i,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=t,d=i||1,f=c-1,{min:p,max:g}=e,m=!U(s),y=!U(o),v=!U(l),b=(g-p)/(u+1);let w,_,x,S,k=_t((g-p)/f/d)*d;if(k<1e-14&&!m&&!y)return[{value:p},{value:g}];S=Math.ceil(g/k)-Math.floor(p/k),S>f&&(k=_t(S*k/f/d)*d),U(a)||(w=Math.pow(10,a),k=Math.ceil(k*w)/w),"ticks"===r?(_=Math.floor(p/k)*k,x=Math.ceil(g/k)*k):(_=p,x=g),m&&y&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((o-s)/i,k/1e3)?(S=Math.round(Math.min((o-s)/k,c)),k=(o-s)/S,_=s,x=o):v?(_=m?s:_,x=y?o:x,S=l-1,k=(x-_)/S):(S=(x-_)/k,S=wt(S,Math.round(S),k/1e3)?Math.round(S):Math.ceil(S));const E=Math.max(It(k),It(_));w=Math.pow(10,U(a)?E:a),_=Math.round(_*w)/w,x=Math.round(x*w)/w;let I=0;for(m&&(h&&_!==s?(n.push({value:s}),_<s&&I++,wt(Math.round((_+I*k)*w)/w,s,Ts(s,b,t))&&I++):_<s&&I++);I<S;++I){const t=Math.round((_+I*k)*w)/w;if(y&&t>o)break;n.push({value:t})}return y&&h&&x!==o?n.length&&wt(n[n.length-1].value,o,Ts(o,b,t))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function Ts(t,e,n){let{horizontal:r,minRotation:i}=n;const s=kt(i),o=(r?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}o(Es,"id","category"),o(Es,"defaults",{ticks:{callback:ks}});class Cs extends ai{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return U(t)||("number"===typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=t=>r=e?r:t,o=t=>i=n?i:t;if(t){const t=bt(r),e=bt(i);t<0&&e<0?o(0):t>0&&e>0&&s(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);o(i+e),t||s(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=Is({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&St(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return ne(t,this.chart.options.locale,this.options.ticks.format)}}class Ds extends Cs{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=H(t)?t:0,this.max=H(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=kt(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}o(Ds,"id","linear"),o(Ds,"defaults",{ticks:{callback:ie.formatters.numeric}});const As=t=>Math.floor(vt(t)),Ms=(t,e)=>Math.pow(10,As(t)+e);function Ns(t){return 1===t/Math.pow(10,As(t))}function Ps(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Os(t,e){let{min:n,max:r}=e;n=K(t.min,n);const i=[],s=As(n);let o=function(t,e){let n=As(e-t);for(;Ps(t,e,n)>10;)n++;for(;Ps(t,e,n)<10;)n--;return Math.min(n,As(t))}(n,r),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=K(t.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<r;)i.push({value:f,major:Ns(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=K(t.max,f);return i.push({value:p,major:Ns(p),significand:d}),i}class Ls extends ai{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Cs.prototype.parse.apply(this,[t,e]);if(0!==n)return H(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=H(t)?Math.max(0,t):null,this.max=H(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!H(this._userMin)&&(this.min=t===Ms(this.min,0)?Ms(this.min,-1):Ms(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,s=t=>r=e?r:t;n===r&&(n<=0?(i(1),s(10)):(i(Ms(n,-1)),s(Ms(r,1)))),n<=0&&i(Ms(r,-1)),r<=0&&s(Ms(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=Os({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&St(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":ne(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=vt(t),this._valueRange=vt(this.max)-vt(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(vt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Rs(t){const e=t.ticks;if(e.display&&t.display){const t=Pe(e.backdropPadding);return G(e.font&&e.font.size,ue.font.size)+t.height}return 0}function Fs(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Vs(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ut/s:0;for(let h=0;h<s;h++){const s=o.setContext(t.getPointLabelContext(h));i[h]=s.padding;const d=t.getPointPosition(h,t.drawingArea+i[h],a),f=Oe(s.font),p=(l=t.ctx,c=f,u=q(u=t._pointLabels[h])?u:[u],{w:de(l,c.string,u),h:u.length*c.lineHeight});r[h]=p;const g=At(t.getIndexAngle(h)+a),m=Math.round(Et(g));zs(n,e,g,Fs(m,d.x,p.w,0,180),Fs(m,d.y,p.h,90,270))}var l,c,u;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Rs(s)/2,additionalAngle:o?ut/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const i=Bs(t,u,l);r.push(i),"auto"===a&&(i.visible=js(i,c),i.visible&&(c=i))}return r}(t,r,i)}function zs(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Bs(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Et(At(l.angle+gt))),u=function(t,e,n){90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e);return t}(l.y,a.h,c),h=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(c),d=function(t,e,n){"right"===n?t-=e:"center"===n&&(t-=e/2);return t}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function js(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(ye({x:n,y:r},e)||ye({x:n,y:s},e)||ye({x:i,y:r},e)||ye({x:i,y:s},e))}function Us(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!U(a)){const n=Ne(e.borderRadius),l=Pe(e.backdropPadding);t.fillStyle=a;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=o-i+l.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),Ee(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function qs(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ht);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=t.getPointPosition(s,e),i.lineTo(n.x,n.y)}}o(Ls,"id","logarithmic"),o(Ls,"defaults",{ticks:{callback:ie.formatters.logarithmic,major:{enabled:!0}}});class Ws extends Cs{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Pe(Rs(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=H(t)&&!isNaN(t)?t:0,this.max=H(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Rs(this.options))}generateTickLabels(t){Cs.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=Y(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Vs(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return At(t*(ht/(this._pointLabels.length||1))+kt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(U(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(U(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Re(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(t)-gt+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),qs(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,s=this._pointLabels.length;let o,a,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const s=r.setContext(t.getPointLabelContext(i));Us(n,s,e);const o=Oe(s.font),{x:a,y:l,textAlign:c}=e;ke(n,t._pointLabels[i],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){a=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),o=r.setContext(n),l=i.setContext(n);!function(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),qs(t,n,o,r),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}})),n.display){for(t.save(),o=s-1;o>=0;o--){const r=n.setContext(this.getPointLabelContext(o)),{color:i,lineWidth:s}=r;s&&i&&(t.lineWidth=s,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((r,o)=>{if(0===o&&this.min>=0&&!e.reverse)return;const a=n.setContext(this.getContext(o)),l=Oe(a.font);if(i=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){t.font=l.string,s=t.measureText(r.label).width,t.fillStyle=a.backdropColor;const e=Pe(a.backdropPadding);t.fillRect(-s/2-e.left,-i-l.size/2-e.top,s+e.width,l.size+e.height)}ke(t,r.label,0,-i,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),t.restore()}drawTitle(){}}o(Ws,"id","radialLinear"),o(Ws,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ie.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}}),o(Ws,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),o(Ws,"descriptors",{angleLines:{_fallback:"grid"}});const Hs={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ks=Object.keys(Hs);function Gs(t,e){return t-e}function Qs(t,e){if(U(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return"function"===typeof r&&(o=r(o)),H(o)||(o="string"===typeof r?n.parse(o,r):n.parse(o)),null===o?null:(i&&(o="week"!==i||!xt(s)&&!0!==s?n.startOf(o,i):n.startOf(o,"isoWeek",s)),+o)}function Ys(t,e,n,r){const i=Ks.length;for(let s=Ks.indexOf(t);s<i-1;++s){const t=Hs[Ks[s]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return Ks[s]}return Ks[i-1]}function $s(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=Ot(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function Xs(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return 0!==s&&n?function(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}(t,r,i,n):r}class Js extends ai{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.time||(t.time={}),r=this._adapter=new fr(t.adapters.date);r.init(e),nt(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Qs(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:o}=this.getUserBounds();function a(t){s||isNaN(t.min)||(r=Math.min(r,t.min)),o||isNaN(t.max)||(i=Math.max(i,t.max))}s&&o||(a(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||a(this.getMinMax(!1))),r=H(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=H(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?Ys(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let s=Ks.length-1;s>=Ks.indexOf(n);s--){const n=Ks[s];if(Hs[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return Ks[n?Ks.indexOf(n):0]}(this,s.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=Ks.indexOf(t)+1,n=Ks.length;e<n;++e)if(Hs[Ks[e]].common)return Ks[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&s.reverse(),Xs(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(t=this.getDecimalForValue(n[0]),r=1===n.length?1-t:(this.getDecimalForValue(n[1])-t)/2,e=this.getDecimalForValue(n[n.length-1]),i=1===n.length?e:(e-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=Nt(r,0,s),i=Nt(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||Ys(i.minUnit,e,n,this._getLabelCapacity(e)),o=G(r.ticks.stepSize,1),a="week"===s&&i.isoWeekday,l=xt(a)||!0===a,c={};let u,h,d=e;if(l&&(d=+t.startOf(d,"isoWeek",a)),d=+t.startOf(d,l?"day":s),t.diff(n,e,s)>1e5*o)throw new Error(e+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+t.add(u,o,s),h++)$s(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||$s(c,u,f),Object.keys(c).sort(Gs).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,r){const i=this.options,s=i.ticks.callback;if(s)return Y(s,[t,e,n],this);const o=i.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[e],d=l&&u&&h&&h.major;return this._adapter.format(t,r||(d?u:c))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=kt(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),s=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*s,h:n*s+o*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,Xs(this,[t],this._majorUnit),r),s=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(Qs(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return zt(t.sort(Gs))}}function Zs(t,e,n){let r,i,s,o,a=0,l=t.length-1;n?(e>=t[a].pos&&e<=t[l].pos&&({lo:a,hi:l}=Lt(t,"pos",e)),({pos:r,time:s}=t[a]),({pos:i,time:o}=t[l])):(e>=t[a].time&&e<=t[l].time&&({lo:a,hi:l}=Lt(t,"time",e)),({time:r,pos:s}=t[a]),({time:i,pos:o}=t[l]));const c=i-r;return c?s+(o-s)*(e-r)/c:s}o(Js,"id","time"),o(Js,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class to extends Js{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Zs(e,this.min),this._tableRange=Zs(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;++s)l=t[s],l>=e&&l<=n&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(s=0,o=r.length;s<o;++s)c=r[s+1],a=r[s-1],l=r[s],Math.round((c+a)/2)!==l&&i.push({time:l,pos:s/(o-1)});return i}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Zs(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Zs(this._table,n*this._tableRange+this._minPos,!0)}}o(to,"id","timeseries"),o(to,"defaults",Js.defaults);const eo="label";function no(t,e){"function"===typeof t?t(e):t&&(t.current=e)}function ro(t,e){t.labels=e}function io(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eo;const r=[];t.datasets=e.map((e=>{const i=t.datasets.find((t=>t[n]===e[n]));return i&&e.data&&!r.includes(i)?(r.push(i),Object.assign(i,e),i):{...e}}))}function so(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eo;const n={labels:[],datasets:[]};return ro(n,t.labels),io(n,t.datasets,e),n}function oo(t,n){const{height:r=150,width:i=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,p=(0,e.useRef)(null),g=(0,e.useRef)(),m=()=>{p.current&&(g.current=new Vi(p.current,{type:a,data:so(l,o),options:c&&{...c},plugins:u}),no(n,g.current))},y=()=>{no(n,null),g.current&&(g.current.destroy(),g.current=null)};return(0,e.useEffect)((()=>{!s&&g.current&&c&&function(t,e){const n=t.options;n&&e&&Object.assign(n,e)}(g.current,c)}),[s,c]),(0,e.useEffect)((()=>{!s&&g.current&&ro(g.current.config.data,l.labels)}),[s,l.labels]),(0,e.useEffect)((()=>{!s&&g.current&&l.datasets&&io(g.current.config.data,l.datasets,o)}),[s,l.datasets]),(0,e.useEffect)((()=>{g.current&&(s?(y(),setTimeout(m)):g.current.update(d))}),[s,c,l.labels,l.datasets,d]),(0,e.useEffect)((()=>{g.current&&(y(),setTimeout(m))}),[a]),(0,e.useEffect)((()=>(m(),()=>y())),[]),e.createElement("canvas",Object.assign({ref:p,role:"img",height:r,width:i},f),h)}const ao=(0,e.forwardRef)(oo);function lo(t,n){return Vi.register(n),(0,e.forwardRef)(((n,r)=>e.createElement(ao,Object.assign({},n,{ref:r,type:t}))))}const co=lo("radar",cr);var uo=n(579);const ho=()=>(0,uo.jsx)(co,{data:{labels:["Label 1","Label 2","Label 3","Label 4","Label 5"],datasets:[{label:"Dataset 1",backgroundColor:"rgba(179,181,198,0.2)",borderColor:"rgba(179,181,198,1)",pointBackgroundColor:"rgba(179,181,198,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(179,181,198,1)",data:[65,59,90,81,56]},{label:"Dataset 2",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",pointBackgroundColor:"rgba(255,99,132,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(255,99,132,1)",data:[28,48,40,19,96]}]},options:{scale:{ticks:{beginAtZero:!0}}}}),fo=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},po={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,l=a?t[i+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fo(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const o=i<t.length?n[t.charAt(i)]:64;++i;const a=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==s||null==o||null==a)throw new go;const l=e<<2|s>>4;if(r.push(l),64!==o){const t=s<<4&240|o>>2;if(r.push(t),64!==a){const t=o<<6&192|a;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class go extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mo=function(t){return function(t){const e=fo(t);return po.encodeByteArray(e,!0)}(t).replace(/\./g,"")},yo=function(t){try{return po.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=vo(t[n],e[n]));return t}const bo=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,wo=()=>{try{return bo()||(()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",PUBLIC_URL:"/GreenCheck",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&yo(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t))}},_o=()=>{var t;return null===(t=wo())||void 0===t?void 0:t.config};class xo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function So(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ko(){return"object"===typeof self&&self.self===self}function Eo(){return!function(){var t;const e=null===(t=wo())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Io(){try{return"object"===typeof indexedDB}catch(t){return!1}}class To extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t){const e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),r=this.errors[t],i=r?function(t,e){return t.replace(Do,((t,n)=>{const r=e[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,e):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new To(n,s,e)}}const Do=/\{\$([^}]+)}/g;function Ao(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(No(n)&&No(s)){if(!Mo(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function No(t){return null!==t&&"object"===typeof t}function Po(t,e){const n=new Oo(t,e);return n.subscribe.bind(n)}class Oo{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=Lo),void 0===r.error&&(r.error=Lo),void 0===r.complete&&(r.complete=Lo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}})),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Lo(){}function Ro(t){return t&&t._delegate?t._delegate:t}class Fo{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Vo="[DEFAULT]";class zo{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new xo;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo;return this.instances.has(t)}getOptions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo;return this.instancesOptions.get(t)||{}}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(r){}}getOrInitializeService(t){let{instanceIdentifier:e,options:n={}}=t,r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===Vo?void 0:i),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vo;return this.component?this.component.multipleInstances?t:Vo:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Bo{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new zo(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const jo=[];var Uo;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Uo||(Uo={}));const qo={debug:Uo.DEBUG,verbose:Uo.VERBOSE,info:Uo.INFO,warn:Uo.WARN,error:Uo.ERROR,silent:Uo.SILENT},Wo=Uo.INFO,Ho={[Uo.DEBUG]:"log",[Uo.VERBOSE]:"log",[Uo.INFO]:"info",[Uo.WARN]:"warn",[Uo.ERROR]:"error"},Ko=function(t,e){if(e<t.logLevel)return;const n=(new Date).toISOString(),r=Ho[e];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(t.name,":"),...s)};class Go{constructor(t){this.name=t,this._logLevel=Wo,this._logHandler=Ko,this._userLogHandler=null,jo.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Uo))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?qo[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.DEBUG,...e),this._logHandler(this,Uo.DEBUG,...e)}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.VERBOSE,...e),this._logHandler(this,Uo.VERBOSE,...e)}info(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.INFO,...e),this._logHandler(this,Uo.INFO,...e)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.WARN,...e),this._logHandler(this,Uo.WARN,...e)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Uo.ERROR,...e),this._logHandler(this,Uo.ERROR,...e)}}const Qo=(t,e)=>e.some((e=>t instanceof e));let Yo,$o;const Xo=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,ta=new WeakMap,ea=new WeakMap;let na={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Jo.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Zo.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ra(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($o||($o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(oa(this),n),sa(Xo.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sa(t.apply(oa(this),n))}:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=t.call(oa(this),e,...r);return Zo.set(s,e.sort?e.sort():[e]),sa(s)}}function ia(t){return"function"===typeof t?ra(t):(t instanceof IDBTransaction&&function(t){if(Jo.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{e(),r()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)}));Jo.set(t,e)}(t),Qo(t,Yo||(Yo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,na):t)}function sa(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{e(sa(t.result)),r()},s=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&Xo.set(e,t)})).catch((()=>{})),ea.set(e,t),e}(t);if(ta.has(t))return ta.get(t);const e=ia(t);return e!==t&&(ta.set(t,e),ea.set(e,t)),e}const oa=t=>ea.get(t);const aa=["get","getKey","getAll","getAllKeys","count"],la=["put","add","delete","clear"],ca=new Map;function ua(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(ca.get(e))return ca.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=la.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!aa.includes(n))return;const s=async function(t){const e=this.transaction(t,i?"readwrite":"readonly");let s=e.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&e.done]))[0]};return ca.set(e,s),s}!function(t){na=t(na)}((t=>({...t,get:(e,n,r)=>ua(e,n)||t.get(e,n,r),has:(e,n)=>!!ua(e,n)||t.has(e,n)})));class ha{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){const e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((t=>t)).join(" ")}}const da="@firebase/app",fa="0.10.0",pa=new Go("@firebase/app"),ga="[DEFAULT]",ma={[da]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ya=new Map,va=new Map,ba=new Map;function wa(t,e){try{t.container.addComponent(e)}catch(n){pa.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function _a(t,e){t.container.addOrOverwriteComponent(e)}function xa(t){const e=t.name;if(ba.has(e))return pa.debug("There were multiple attempts to register component ".concat(e,".")),!1;ba.set(e,t);for(const n of ya.values())wa(n,t);for(const n of va.values())wa(n,t);return!0}function Sa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ka(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ga;Sa(t,e).clearInstance(n)}function Ea(t){return void 0!==t.options}function Ia(t){return void 0!==t.settings}function Ta(){ba.clear()}const Ca=new Co("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Da{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fo("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ca.create("app-deleted",{appName:this._name})}}class Aa extends Da{constructor(t,e,n,r){const i=void 0!==e.automaticDataCollectionEnabled&&e.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==t.apiKey)super(t,s,r);else{super(t.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},e),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Fa(da,fa,"serverapp")}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,void 0!==t&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ra(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ca.create("server-app-deleted")}}const Ma="10.10.0";function Na(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if("object"!==typeof e){e={name:e}}const r=Object.assign({name:ga,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!==typeof i||!i)throw Ca.create("bad-app-name",{appName:String(i)});if(n||(n=_o()),!n)throw Ca.create("no-options");const s=ya.get(i);if(s){if(Mo(n,s.options)&&Mo(r,s.config))return s;throw Ca.create("duplicate-app",{appName:i})}const o=new Bo(i);for(const l of ba.values())o.addComponent(l);const a=new Da(n,r,o);return ya.set(i,a),a}function Pa(t,e){if(ko())throw Ca.create("invalid-server-app-environment");let n;void 0===e.automaticDataCollectionEnabled&&(e.automaticDataCollectionEnabled=!1),n=Ea(t)?t.options:t;const r=Object.assign(Object.assign({},e),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==e.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ca.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((t,e)=>Math.imul(31,t)+e.charCodeAt(0)|0),0));var s;const o=va.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new Bo(i);for(const c of ba.values())a.addComponent(c);const l=new Aa(n,e,i,a);return va.set(i,l),l}function Oa(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga;const e=ya.get(t);if(!e&&t===ga&&_o())return Na();if(!e)throw Ca.create("no-app",{appName:t});return e}function La(){return Array.from(ya.values())}async function Ra(t){let e=!1;const n=t.name;if(ya.has(n))e=!0,ya.delete(n);else if(va.has(n)){t.decRefCount()<=0&&(va.delete(n),e=!0)}e&&(await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function Fa(t,e,n){var r;let i=null!==(r=ma[t])&&void 0!==r?r:t;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const t=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];return s&&t.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&t.push("and"),o&&t.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void pa.warn(t.join(" "))}xa(new Fo("".concat(i,"-version"),(()=>({library:i,version:e})),"VERSION"))}function Va(t,e){if(null!==t&&"function"!==typeof t)throw Ca.create("invalid-log-argument");!function(t,e){for(const n of jo){let r=null;e&&e.level&&(r=qo[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((t=>{if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((t=>t)).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:Uo[n].toLowerCase(),message:a,args:s,type:e.name})}}}(t,e)}function za(t){var e;e=t,jo.forEach((t=>{t.setLogLevel(e)}))}const Ba="firebase-heartbeat-database",ja=1,Ua="firebase-heartbeat-store";let qa=null;function Wa(){return qa||(qa=function(t,e){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(t,e),a=sa(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(sa(o.result),t.oldVersion,t.newVersion,sa(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(Ba,ja,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Ua)}catch(n){console.warn(n)}}}).catch((t=>{throw Ca.create("idb-open",{originalErrorMessage:t.message})}))),qa}async function Ha(t,e){try{const n=(await Wa()).transaction(Ua,"readwrite"),r=n.objectStore(Ua);await r.put(e,Ka(t)),await n.done}catch(n){if(n instanceof To)pa.warn(n.message);else{const t=Ca.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});pa.warn(t.message)}}}function Ka(t){return"".concat(t.name,"!").concat(t.options.appId)}class Ga{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Ya(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Qa();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Qa(),{heartbeatsToSend:n,unsentEntries:r}=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),$a(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$a(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=mo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Qa(){return(new Date).toISOString().substring(0,10)}class Ya{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Io()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Wa()).transaction(Ua),n=await e.objectStore(Ua).get(Ka(t));return await e.done,n}catch(e){if(e instanceof To)pa.warn(e.message);else{const t=Ca.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});pa.warn(t.message)}}}(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ha(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ha(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function $a(t){return mo(JSON.stringify({version:2,heartbeats:t})).length}var Xa;Xa="",xa(new Fo("platform-logger",(t=>new ha(t)),"PRIVATE")),xa(new Fo("heartbeat",(t=>new Ga(t)),"PRIVATE")),Fa(da,fa,Xa),Fa(da,fa,"esm2017"),Fa("fire-js","");class Ja{constructor(t,e){this._delegate=t,this.firebase=e,wa(t,new Fo("app-compat",(()=>this),"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((t=>{this._delegate.checkDestroyed(),t()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ra(this._delegate))))}_getService(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga;this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){wa(this._delegate,t)}_addOrOverwriteComponent(t){_a(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Za=new Co("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const tl=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=Na(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ao(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:Fa,setLogLevel:za,onLog:Va,apps:null,SDK_VERSION:Ma,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(xa(t)&&"PUBLIC"===t.type){const o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof t[s])throw Za.create("invalid-app-argument",{appName:n});return t[s]()};void 0!==t.serviceProps&&vo(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(t){delete n[t]},useAsService:function(t,e){return"serverAuth"===e?null:e},modularAPIs:t}};function i(t){if(!Ao(n,t=t||ga))throw Za.create("no-app",{appName:t});return n[t]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((t=>n[t]))}}),i.App=e,r}(Ja);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(t){vo(n,t)},createSubscribe:Po,ErrorFactory:Co,deepExtend:vo}),n}(),el=new Go("@firebase/app-compat");if(ko()&&void 0!==self.firebase){el.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&el.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nl=tl;!function(t){Fa("@firebase/app-compat","0.2.30",t)}();nl.registerVersion("firebase","10.10.0","app-compat");var rl,il="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},sl={},ol=ol||{},al=il||self;function ll(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function cl(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ul="closure_uid_"+(1e9*Math.random()>>>0),hl=0;function dl(t,e,n){return t.call.apply(t.bind,arguments)}function fl(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pl(t,e,n){return(pl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dl:fl).apply(null,arguments)}function gl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ml(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function yl(){this.s=this.s,this.o=this.o}yl.prototype.s=!1,yl.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,ul)&&t[ul]||(t[ul]=++hl))},yl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function bl(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function wl(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(ll(e)){const n=t.length||0,r=e.length||0;t.length=n+r;for(let i=0;i<r;i++)t[n+i]=e[i]}else t.push(e)}}function _l(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}_l.prototype.h=function(){this.defaultPrevented=!0};var xl=function(){if(!al.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};al.addEventListener("test",t,e),al.removeEventListener("test",t,e)}catch(n){}return t}();function Sl(t){return/^[\s\xa0]*$/.test(t)}function kl(){var t=al.navigator;return t&&(t=t.userAgent)?t:""}function El(t){return-1!=kl().indexOf(t)}function Il(t){return Il[" "](t),t}Il[" "]=function(){};var Tl,Cl,Dl=El("Opera"),Al=El("Trident")||El("MSIE"),Ml=El("Edge"),Nl=Ml||Al,Pl=El("Gecko")&&!(-1!=kl().toLowerCase().indexOf("webkit")&&!El("Edge"))&&!(El("Trident")||El("MSIE"))&&!El("Edge"),Ol=-1!=kl().toLowerCase().indexOf("webkit")&&!El("Edge");function Ll(){var t=al.document;return t?t.documentMode:void 0}t:{var Rl="",Fl=function(){var t=kl();return Pl?/rv:([^\);]+)(\)|;)/.exec(t):Ml?/Edge\/([\d\.]+)/.exec(t):Al?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Ol?/WebKit\/(\S+)/.exec(t):Dl?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Fl&&(Rl=Fl?Fl[1]:""),Al){var Vl=Ll();if(null!=Vl&&Vl>parseFloat(Rl)){Tl=String(Vl);break t}}Tl=Rl}if(al.document&&Al){var zl=Ll();Cl=zl||(parseInt(Tl,10)||void 0)}else Cl=void 0;var Bl=Cl;function jl(t,e){if(_l.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Pl){t:{try{Il(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:Ul[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&jl.$.h.call(this)}}ml(jl,_l);var Ul={2:"touch",3:"pen",4:"mouse"};jl.prototype.h=function(){jl.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ql="closure_listenable_"+(1e6*Math.random()|0),Wl=0;function Hl(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Wl,this.fa=this.ia=!1}function Kl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Gl(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Ql(t){const e={};for(const n in t)e[n]=t[n];return e}const Yl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $l(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<Yl.length;e++)n=Yl[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xl(t){this.src=t,this.g={},this.h=0}function Jl(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=vl(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Kl(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Zl(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}Xl.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=Zl(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new Hl(e,this.src,s,!!r,i)).ia=n,t.push(e)),e};var tc="closure_lm_"+(1e6*Math.random()|0),ec={};function nc(t,e,n,r,i){if(r&&r.once)return ic(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)nc(t,e[s],n,r,i);return null}return n=hc(n),t&&t[ql]?t.O(e,n,cl(r)?!!r.capture:!!r,i):rc(t,e,n,!1,r,i)}function rc(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=cl(i)?!!i.capture:!!i,a=cc(t);if(a||(t[tc]=a=new Xl(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}const e=lc;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xl||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ac(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ic(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ic(t,e[s],n,r,i);return null}return n=hc(n),t&&t[ql]?t.P(e,n,cl(r)?!!r.capture:!!r,i):rc(t,e,n,!0,r,i)}function sc(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)sc(t,e[s],n,r,i);else r=cl(r)?!!r.capture:!!r,n=hc(n),t&&t[ql]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Zl(s=t.g[e],n,r,i))&&(Kl(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=cc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zl(e,n,r,i)),(n=-1<t?e[t]:null)&&oc(n))}function oc(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ql])Jl(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ac(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cc(e))?(Jl(n,t),0==n.h&&(n.src=null,e[tc]=null)):Kl(t)}}}function ac(t){return t in ec?ec[t]:ec[t]="on"+t}function lc(t,e){if(t.fa)t=!0;else{e=new jl(e,this);var n=t.listener,r=t.la||t.src;t.ia&&oc(t),t=n.call(r,e)}return t}function cc(t){return(t=t[tc])instanceof Xl?t:null}var uc="__closure_events_fn_"+(1e9*Math.random()>>>0);function hc(t){return"function"===typeof t?t:(t[uc]||(t[uc]=function(e){return t.handleEvent(e)}),t[uc])}function dc(){yl.call(this),this.i=new Xl(this),this.S=this,this.J=null}function fc(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"===typeof e)e=new _l(e,t);else if(e instanceof _l)e.target=e.target||t;else{var i=e;$l(e=new _l(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=pc(o,r,!0,e)&&i}if(i=pc(o=e.g=t,r,!0,e)&&i,i=pc(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=pc(o=e.g=n[s],r,!1,e)&&i}function pc(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Jl(t.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ml(dc,yl),dc.prototype[ql]=!0,dc.prototype.removeEventListener=function(t,e,n,r){sc(this,t,e,n,r)},dc.prototype.N=function(){if(dc.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Kl(n[r]);delete e.g[t],e.h--}}this.J=null},dc.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},dc.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var gc=al.JSON.stringify;function mc(){var t=Sc;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var yc=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new vc),(t=>t.reset()));class vc{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function bc(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function wc(t){al.setTimeout((()=>{throw t}),0)}let _c,xc=!1,Sc=new class{constructor(){this.h=this.g=null}add(t,e){const n=yc.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},kc=()=>{const t=al.Promise.resolve(void 0);_c=()=>{t.then(Ec)}};var Ec=()=>{for(var t;t=mc();){try{t.h.call(t.g)}catch(n){wc(n)}var e=yc;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xc=!1};function Ic(t,e){dc.call(this),this.h=t||1,this.g=e||al,this.j=pl(this.qb,this),this.l=Date.now()}function Tc(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Cc(t,e,n){if("function"===typeof t)n&&(t=pl(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pl(t.handleEvent,t)}return 2147483647<Number(e)?-1:al.setTimeout(t,e||0)}function Dc(t){t.g=Cc((()=>{t.g=null,t.i&&(t.i=!1,Dc(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}ml(Ic,dc),(rl=Ic.prototype).ga=!1,rl.T=null,rl.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fc(this,"tick"),this.ga&&(Tc(this),this.start()))}},rl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rl.N=function(){Ic.$.N.call(this),Tc(this),delete this.g};class Ac extends yl{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Dc(this)}N(){super.N(),this.g&&(al.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mc(t){yl.call(this),this.h=t,this.g={}}ml(Mc,yl);var Nc=[];function Pc(t,e,n,r){Array.isArray(n)||(n&&(Nc[0]=n.toString()),n=Nc);for(var i=0;i<n.length;i++){var s=nc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Oc(t){Gl(t.g,(function(t,e){this.g.hasOwnProperty(e)&&oc(t)}),t),t.g={}}function Lc(){this.g=!0}function Rc(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return gc(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Mc.prototype.N=function(){Mc.$.N.call(this),Oc(this)},Mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lc.prototype.Ea=function(){this.g=!1},Lc.prototype.info=function(){};var Fc={},Vc=null;function zc(){return Vc=Vc||new dc}function Bc(t){_l.call(this,Fc.Ta,t)}function jc(t){const e=zc();fc(e,new Bc(e))}function Uc(t,e){_l.call(this,Fc.STAT_EVENT,t),this.stat=e}function qc(t){const e=zc();fc(e,new Uc(e,t))}function Wc(t,e){_l.call(this,Fc.Ua,t),this.size=e}function Hc(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return al.setTimeout((function(){t()}),e)}Fc.Ta="serverreachability",ml(Bc,_l),Fc.STAT_EVENT="statevent",ml(Uc,_l),Fc.Ua="timingevent",ml(Wc,_l);var Kc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Gc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qc(){}function Yc(t){return t.h||(t.h=t.i())}function $c(){}Qc.prototype.h=null;var Xc,Jc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zc(){_l.call(this,"d")}function tu(){_l.call(this,"c")}function eu(){}function nu(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Mc(this),this.P=iu,t=Nl?125:void 0,this.V=new Ic(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ru}function ru(){this.i=null,this.g="",this.h=!1}ml(Zc,_l),ml(tu,_l),ml(eu,Qc),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},Xc=new eu;var iu=45e3,su={},ou={};function au(t,e,n){t.L=1,t.A=Iu(_u(e)),t.u=n,t.S=!0,lu(t,null)}function lu(t,e){t.G=Date.now(),du(t),t.B=_u(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),zu(n.i,"t",r),t.o=0,n=t.l.J,t.h=new ru,t.g=Bh(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Ac(pl(t.Pa,t,t.g),t.O)),Pc(t.U,t.g,"readystatechange",t.nb),e=t.I?Ql(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),jc(),function(t,e,n,r,i,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function cu(t){return!!t.g&&("GET"==t.v&&2!=t.L&&t.l.Ha)}function uu(t,e,n){let r,i=!0;for(;!t.J&&t.o<n.length;){if(r=hu(t,n),r==ou){4==e&&(t.s=4,qc(14),i=!1),Rc(t.j,t.m,null,"[Incomplete Response]");break}if(r==su){t.s=4,qc(15),Rc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Rc(t.j,t.m,r,null),yu(t,r)}cu(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,qc(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Nh(e),e.M=!0,qc(11))):(Rc(t.j,t.m,n,"[Invalid Chunked Response]"),mu(t),gu(t))}function hu(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?ou:(n=Number(e.substring(n,r)),isNaN(n)?su:(r+=1)+n>e.length?ou:(e=e.slice(r,r+n),t.o=r+n,e))}function du(t){t.Y=Date.now()+t.P,fu(t,t.P)}function fu(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=Hc(pl(t.lb,t),e)}function pu(t){t.C&&(al.clearTimeout(t.C),t.C=null)}function gu(t){0==t.l.H||t.J||Lh(t.l,t)}function mu(t){pu(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Tc(t.V),Oc(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function yu(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||Ku(n.i,t)))if(!t.K&&Ku(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Oh(n),kh(n)}Mh(n),qc(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hc(pl(n.ib,n),6e3));if(1>=Hu(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Fh(n,11)}else if((t.K||n.g==t)&&Oh(n),!Sl(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Gu(s,s.h),s.h=null))}if(r.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,Eu(r.I,r.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=zh(r,r.J?r.pa:null,r.Y),o.K){Qu(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(pu(a),du(a)),r.g=o}else Ah(r);0<n.j.length&&Ih(n)}else"stop"!=c[0]&&"close"!=c[0]||Fh(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Fh(n,7):Sh(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}jc()}catch(c){}}function vu(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ll(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(ll(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(ll(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(rl=nu.prototype).setTimeout=function(t){this.P=t},rl.nb=function(t){t=t.target;const e=this.M;e&&3==yh(t)?e.l():this.Pa(t)},rl.Pa=function(t){try{if(t==this.g)t:{const u=yh(this.g);var e=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Nl||this.g&&(this.h.h||this.g.ja()||vh(this.g)))){this.J||4!=u||7==e||jc(),pu(this);var n=this.g.da();this.ca=n;e:if(cu(this)){var r=vh(this.g);t="";var i=r.length,s=4==yh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){mu(this),gu(this);var o="";break e}this.h.i=new al.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sl(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.s=3,qc(12),mu(this),gu(this);break t}Rc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yu(this,n)}this.S?(uu(this,u,o),Nl&&this.i&&3==u&&(Pc(this.U,this.V,"tick",this.mb),this.V.start())):(Rc(this.j,this.m,o,null),yu(this,o)),4==u&&mu(this),this.i&&!this.J&&(4==u?Lh(this.l,this):(this.i=!1,du(this)))}else(function(t){const e={};t=(t.g&&2<=yh(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Sl(t[r]))continue;var n=bc(t[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,qc(12)):(this.s=0,qc(13)),mu(this),gu(this)}}}catch(u){}},rl.mb=function(){if(this.g){var t=yh(this.g),e=this.g.ja();this.o<e.length&&(pu(this),uu(this,t,e),this.i&&4!=t&&du(this))}},rl.cancel=function(){this.J=!0,mu(this)},rl.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(jc(),qc(17)),mu(this),this.s=2,gu(this)):fu(this,this.Y-t)};var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wu(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof wu){this.h=t.h,xu(this,t.j),this.s=t.s,this.g=t.g,Su(this,t.m),this.l=t.l;var e=t.i,n=new Lu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ku(this,n),this.o=t.o}else t&&(e=String(t).match(bu))?(this.h=!1,xu(this,e[1]||"",!0),this.s=Tu(e[2]||""),this.g=Tu(e[3]||"",!0),Su(this,e[4]),this.l=Tu(e[5]||"",!0),ku(this,e[6]||"",!0),this.o=Tu(e[7]||"")):(this.h=!1,this.i=new Lu(null,this.h))}function _u(t){return new wu(t)}function xu(t,e,n){t.j=n?Tu(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Su(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ku(t,e,n){e instanceof Lu?(t.i=e,function(t,e){e&&!t.j&&(Ru(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Fu(this,e),zu(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=Cu(e,Pu)),t.i=new Lu(e,t.h))}function Eu(t,e,n){t.i.set(e,n)}function Iu(t){return Eu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Tu(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cu(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Du),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Du(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wu.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Cu(e,Au,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Cu(e,Au,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cu(n,"/"==n.charAt(0)?Nu:Mu,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Cu(n,Ou)),t.join("")};var Au=/[#\/\?@]/g,Mu=/[#\?:]/g,Nu=/[#\?]/g,Pu=/[#\?@]/g,Ou=/#/g;function Lu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ru(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Fu(t,e){Ru(t),e=Bu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Vu(t,e){return Ru(t),e=Bu(t,e),t.g.has(e)}function zu(t,e,n){Fu(t,e),0<n.length&&(t.i=null,t.g.set(Bu(t,e),bl(n)),t.h+=n.length)}function Bu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(rl=Lu.prototype).add=function(t,e){Ru(this),this.i=null,t=Bu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},rl.forEach=function(t,e){Ru(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},rl.ta=function(){Ru(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let t=0;t<i.length;t++)n.push(e[r])}return n},rl.Z=function(t){Ru(this);let e=[];if("string"===typeof t)Vu(this,t)&&(e=e.concat(this.g.get(Bu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},rl.set=function(t,e){return Ru(this),this.i=null,Vu(this,t=Bu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},rl.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},rl.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var ju=class{constructor(t,e){this.g=t,this.map=e}};function Uu(t){this.l=t||qu,al.PerformanceNavigationTiming?t=0<(t=al.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(al.g&&al.g.Ka&&al.g.Ka()&&al.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qu=10;function Wu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Hu(t){return t.h?1:t.g?t.g.size:0}function Ku(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Gu(t,e){t.g?t.g.add(e):t.h=e}function Qu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Yu(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return bl(t.i)}Uu.prototype.cancel=function(){if(this.i=Yu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var $u,Xu=class{stringify(t){return al.JSON.stringify(t,void 0)}parse(t){return al.JSON.parse(t,void 0)}};function Ju(){this.g=new Xu}function Zu(t,e,n){const r=n||"";try{vu(t,(function(t,n){let i=t;cl(t)&&(i=gc(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function th(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function eh(t){this.l=t.ec||null,this.j=t.ob||!1}function nh(t,e){dc.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=rh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ml(eh,Qc),eh.prototype.g=function(){return new nh(this.l,this.j)},eh.prototype.i=($u={},function(){return $u}),ml(nh,dc);var rh=0;function ih(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function sh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,oh(t)}function oh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(rl=nh.prototype).open=function(t,e){if(this.readyState!=rh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,oh(this)},rl.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||al).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},rl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sh(this)),this.readyState=rh},rl.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,oh(this)),this.g&&(this.readyState=3,oh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof al.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ih(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},rl.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?sh(this):oh(this),3==this.readyState&&ih(this)}},rl.Za=function(t){this.g&&(this.response=this.responseText=t,sh(this))},rl.Ya=function(t){this.g&&(this.response=t,sh(this))},rl.ka=function(){this.g&&sh(this)},rl.setRequestHeader=function(t,e){this.v.append(t,e)},rl.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},rl.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(nh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ah=al.JSON.parse;function lh(t){dc.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ch,this.L=this.M=!1}ml(lh,dc);var ch="",uh=/^https?$/i,hh=["POST","PUT"];function dh(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fh(t),gh(t)}function fh(t){t.F||(t.F=!0,fc(t,"complete"),fc(t,"error"))}function ph(t){if(t.h&&"undefined"!=typeof ol&&(!t.C[1]||4!=yh(t)||2!=t.da()))if(t.v&&4==yh(t))Cc(t.La,0,t);else if(fc(t,"readystatechange"),4==yh(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.I).match(bu)[1]||null;!i&&al.self&&al.self.location&&(i=al.self.location.protocol.slice(0,-1)),r=!uh.test(i?i.toLowerCase():"")}n=r}if(n)fc(t,"complete"),fc(t,"success");else{t.m=6;try{var s=2<yh(t)?t.g.statusText:""}catch(o){s=""}t.j=s+" ["+t.da()+"]",fh(t)}}finally{gh(t)}}}function gh(t,e){if(t.g){mh(t);const r=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||fc(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function mh(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(al.clearTimeout(t.A),t.A=null)}function yh(t){return t.g?t.g.readyState:0}function vh(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case ch:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Ed){return null}}function bh(t){let e="";return Gl(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function wh(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=bh(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Eu(t,e,n))}function _h(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xh(t){this.Ga=0,this.j=[],this.l=new Lc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_h("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_h("baseRetryDelayMs",5e3,t),this.hb=_h("retryDelaySeedMs",1e4,t),this.eb=_h("forwardChannelMaxRetries",2,t),this.xa=_h("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Uu(t&&t.concurrentRequestLimit),this.Ja=new Ju,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Sh(t){if(Eh(t),3==t.H){var e=t.W++,n=_u(t.I);if(Eu(n,"SID",t.K),Eu(n,"RID",e),Eu(n,"TYPE","terminate"),Ch(t,n),(e=new nu(t,t.l,e)).L=2,e.A=Iu(_u(n)),n=!1,al.navigator&&al.navigator.sendBeacon)try{n=al.navigator.sendBeacon(e.A.toString(),"")}catch(r){}!n&&al.Image&&((new Image).src=e.A,n=!0),n||(e.g=Bh(e.l,null),e.g.ha(e.A)),e.G=Date.now(),du(e)}Vh(t)}function kh(t){t.g&&(Nh(t),t.g.cancel(),t.g=null)}function Eh(t){kh(t),t.u&&(al.clearTimeout(t.u),t.u=null),Oh(t),t.i.cancel(),t.m&&("number"===typeof t.m&&al.clearTimeout(t.m),t.m=null)}function Ih(t){if(!Wu(t.i)&&!t.m){t.m=!0;var e=t.Na;_c||kc(),xc||(_c(),xc=!0),Sc.add(e,t),t.C=0}}function Th(t,e){var n;n=e?e.m:t.W++;const r=_u(t.I);Eu(r,"SID",t.K),Eu(r,"RID",n),Eu(r,"AID",t.V),Ch(t,r),t.o&&t.s&&wh(r,t.o,t.s),n=new nu(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Dh(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Gu(t.i,n),au(n,r,e)}function Ch(t,e){t.na&&Gl(t.na,(function(t,n){Eu(e,n,t)})),t.h&&vu({},(function(t,n){Eu(e,n,t)}))}function Dh(t,e,n){n=Math.min(t.j.length,n);var r=t.h?pl(t.h.Va,t.h,t):null;t:{var i=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=e,0>n)e=Math.max(0,i[o].g-100),s=!1;else try{Zu(a,t,"req"+n+"_")}catch(Uf){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,r}function Ah(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;_c||kc(),xc||(_c(),xc=!0),Sc.add(e,t),t.A=0}}function Mh(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=Hc(pl(t.Ma,t),Rh(t,t.A)),t.A++,!0)}function Nh(t){null!=t.B&&(al.clearTimeout(t.B),t.B=null)}function Ph(t){t.g=new nu(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=_u(t.wa);Eu(e,"RID","rpc"),Eu(e,"SID",t.K),Eu(e,"AID",t.V),Eu(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Eu(e,"TO",t.qa),Eu(e,"TYPE","xmlhttp"),Ch(t,e),t.o&&t.s&&wh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Iu(_u(e)),n.u=null,n.S=!0,lu(n,t)}function Oh(t){null!=t.v&&(al.clearTimeout(t.v),t.v=null)}function Lh(t,e){var n=null;if(t.g==e){Oh(t),Nh(t),t.g=null;var r=2}else{if(!Ku(t.i,e))return;n=e.F,Qu(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;fc(r=zc(),new Wc(r,n)),Ih(t)}else Ah(t);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function(t,e){return!(Hu(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=Hc(pl(t.Na,t,e),Rh(t,t.C)),t.C++,!0))}(t,e)||2==r&&Mh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Fh(t,5);break;case 4:Fh(t,10);break;case 3:Fh(t,6);break;default:Fh(t,2)}}function Rh(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Fh(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=pl(t.pb,t);n||(n=new wu("//www.google.com/images/cleardot.gif"),al.location&&"http"==al.location.protocol||xu(n,"https"),Iu(n)),function(t,e){const n=new Lc;if(al.Image){const r=new Image;r.onload=gl(th,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gl(th,n,r,"TestLoadImage: error",!1,e),r.onabort=gl(th,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gl(th,n,r,"TestLoadImage: timeout",!1,e),al.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else qc(2);t.H=0,t.h&&t.h.za(e),Vh(t),Eh(t)}function Vh(t){if(t.H=0,t.ma=[],t.h){const e=Yu(t.i);0==e.length&&0==t.j.length||(wl(t.ma,e),wl(t.ma,t.j),t.i.i.length=0,bl(t.j),t.j.length=0),t.h.ya()}}function zh(t,e,n){var r=n instanceof wu?_u(n):new wu(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Su(r,r.m);else{var i=al.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new wu(null);r&&xu(s,r),e&&(s.g=e),i&&Su(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Eu(r,n,e),Eu(r,"VER",t.ra),Ch(t,r),r}function Bh(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new lh(new eh({ob:n})):new lh(t.va)).Oa(t.J),e}function jh(){}function Uh(){if(Al&&!(10<=Number(Bl)))throw Error("Environmental error: no available transport.")}function qh(t,e){dc.call(this),this.g=new xh(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Sl(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Sl(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Kh(this)}function Wh(t){Zc.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Hh(){tu.call(this),this.status=1}function Kh(t){this.g=t}function Gh(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Qh(t,e,n){n||(n=0);var r=Array(16);if("string"===typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=(n=(i=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}function Yh(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=0|t[i];r&&s==e||(n[i]=s,r=!1)}this.g=n}(rl=lh.prototype).Oa=function(t){this.M=t},rl.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xc.g(),this.C=this.u?Yc(this.u):Yc(Xc),this.g.onreadystatechange=pl(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void dh(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),i=al.FormData&&t instanceof al.FormData,!(0<=vl(hh,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{mh(this),0<this.B&&((this.L=function(t){return Al&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pl(this.ua,this)):this.A=Cc(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){dh(this,s)}},rl.ua=function(){"undefined"!=typeof ol&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fc(this,"timeout"),this.abort(8))},rl.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fc(this,"complete"),fc(this,"abort"),gh(this))},rl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gh(this,!0)),lh.$.N.call(this)},rl.La=function(){this.s||(this.G||this.v||this.l?ph(this):this.kb())},rl.kb=function(){ph(this)},rl.isActive=function(){return!!this.g},rl.da=function(){try{return 2<yh(this)?this.g.status:-1}catch($u){return-1}},rl.ja=function(){try{return this.g?this.g.responseText:""}catch($u){return""}},rl.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ah(e)}},rl.Ia=function(){return this.m},rl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(rl=xh.prototype).ra=8,rl.H=1,rl.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new nu(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Ql(s),$l(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Dh(this,i,e),Eu(n=_u(this.I),"RID",t),Eu(n,"CVER",22),this.F&&Eu(n,"X-HTTP-Session-Id",this.F),Ch(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(bh(s)))+"&"+e:this.o&&wh(n,this.o,s)),Gu(this.i,i),this.bb&&Eu(n,"TYPE","init"),this.P?(Eu(n,"$req",e),Eu(n,"SID","null"),i.aa=!0,au(i,n,null)):au(i,n,e),this.H=2}}else 3==this.H&&(t?Th(this,t):0==this.j.length||Wu(this.i)||Th(this))},rl.Ma=function(){if(this.u=null,Ph(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Hc(pl(this.jb,this),t)}},rl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qc(10),kh(this),Ph(this))},rl.ib=function(){null!=this.v&&(this.v=null,kh(this),Mh(this),qc(19))},rl.pb=function(t){t?(this.l.info("Successfully pinged google.com"),qc(2)):(this.l.info("Failed to ping google.com"),qc(1))},rl.isActive=function(){return!!this.h&&this.h.isActive(this)},(rl=jh.prototype).Ba=function(){},rl.Aa=function(){},rl.za=function(){},rl.ya=function(){},rl.isActive=function(){return!0},rl.Va=function(){},Uh.prototype.g=function(t,e){return new qh(t,e)},ml(qh,dc),qh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;qc(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=zh(t,null,t.Y),Ih(t)},qh.prototype.close=function(){Sh(this.g)},qh.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=gc(t),t=n);e.j.push(new ju(e.fb++,t)),3==e.H&&Ih(e)},qh.prototype.N=function(){this.g.h=null,delete this.j,Sh(this.g),delete this.g,qh.$.N.call(this)},ml(Wh,Zc),ml(Hh,tu),ml(Kh,jh),Kh.prototype.Ba=function(){fc(this.g,"a")},Kh.prototype.Aa=function(t){fc(this.g,new Wh(t))},Kh.prototype.za=function(t){fc(this.g,new Hh)},Kh.prototype.ya=function(){fc(this.g,"b")},ml(Gh,(function(){this.blockSize=-1})),Gh.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Gh.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=n;)Qh(this,t,s),s+=this.blockSize;if("string"===typeof t){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Qh(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Qh(this,r),i=0;break}}this.h=i,this.i+=e},Gh.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var $h={};function Xh(t){return-128<=t&&128>t?function(t,e){var n=$h;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new Yh([0|t],0>t?-1:0)})):new Yh([0|t],0>t?-1:0)}function Jh(t){if(isNaN(t)||!isFinite(t))return td;if(0>t)return sd(Jh(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Zh;return new Yh(e,0)}var Zh=4294967296,td=Xh(0),ed=Xh(1),nd=Xh(16777216);function rd(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function id(t){return-1==t.h}function sd(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Yh(n,~t.h).add(ed)}function od(t,e){return t.add(sd(e))}function ad(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ld(t,e){this.g=t,this.h=e}function cd(t,e){if(rd(e))throw Error("division by zero");if(rd(t))return new ld(td,td);if(id(t))return e=cd(sd(t),e),new ld(sd(e.g),sd(e.h));if(id(e))return e=cd(t,sd(e)),new ld(sd(e.g),e.h);if(30<t.g.length){if(id(t)||id(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ed,r=e;0>=r.X(t);)n=ud(n),r=ud(r);var i=hd(n,1),s=hd(r,1);for(r=hd(r,2),n=hd(n,2);!rd(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=hd(r,1),n=hd(n,1)}return e=od(t,i.R(e)),new ld(i,e)}for(i=td;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Jh(n)).R(e);id(o)||0<o.X(t);)o=(s=Jh(n-=r)).R(e);rd(s)&&(s=ed),i=i.add(s),t=od(t,o)}return new ld(i,t)}function ud(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Yh(n,t.h)}function hd(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Yh(i,t.h)}(rl=Yh.prototype).ea=function(){if(id(this))return-sd(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Zh+r)*e,e*=Zh}return t},rl.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(rd(this))return"0";if(id(this))return"-"+sd(this).toString(t);for(var e=Jh(Math.pow(t,6)),n=this,r="";;){var i=cd(n,e).g,s=((0<(n=od(n,i.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(rd(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},rl.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},rl.X=function(t){return id(t=od(this,t))?-1:rd(t)?0:1},rl.abs=function(){return id(this)?sd(this):this},rl.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&t.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Yh(n,-2147483648&n[n.length-1]?-1:0)},rl.R=function(t){if(rd(this)||rd(t))return td;if(id(this))return id(t)?sd(this).R(sd(t)):sd(sd(this).R(t));if(id(t))return sd(this.R(sd(t)));if(0>this.X(nd)&&0>t.X(nd))return Jh(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=t.D(i)>>>16,l=65535&t.D(i);n[2*r+2*i]+=o*l,ad(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ad(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ad(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ad(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Yh(n,0)},rl.gb=function(t){return cd(this,t).h},rl.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Yh(n,this.h&t.h)},rl.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Yh(n,this.h|t.h)},rl.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Yh(n,this.h^t.h)},Uh.prototype.createWebChannel=Uh.prototype.g,qh.prototype.send=qh.prototype.u,qh.prototype.open=qh.prototype.m,qh.prototype.close=qh.prototype.close,Kc.NO_ERROR=0,Kc.TIMEOUT=8,Kc.HTTP_ERROR=6,Gc.COMPLETE="complete",$c.EventType=Jc,Jc.OPEN="a",Jc.CLOSE="b",Jc.ERROR="c",Jc.MESSAGE="d",dc.prototype.listen=dc.prototype.O,lh.prototype.listenOnce=lh.prototype.P,lh.prototype.getLastError=lh.prototype.Sa,lh.prototype.getLastErrorCode=lh.prototype.Ia,lh.prototype.getStatus=lh.prototype.da,lh.prototype.getResponseJson=lh.prototype.Wa,lh.prototype.getResponseText=lh.prototype.ja,lh.prototype.send=lh.prototype.ha,lh.prototype.setWithCredentials=lh.prototype.Oa,Gh.prototype.digest=Gh.prototype.l,Gh.prototype.reset=Gh.prototype.reset,Gh.prototype.update=Gh.prototype.j,Yh.prototype.add=Yh.prototype.add,Yh.prototype.multiply=Yh.prototype.R,Yh.prototype.modulo=Yh.prototype.gb,Yh.prototype.compare=Yh.prototype.X,Yh.prototype.toNumber=Yh.prototype.ea,Yh.prototype.toString=Yh.prototype.toString,Yh.prototype.getBits=Yh.prototype.D,Yh.fromNumber=Jh,Yh.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return sd(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Jh(Math.pow(n,8)),i=td,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),a=parseInt(e.substring(s,s+o),n);8>o?(o=Jh(Math.pow(n,o)),i=i.R(o).add(Jh(a))):i=(i=i.R(r)).add(Jh(a))}return i};var dd=sl.createWebChannelTransport=function(){return new Uh},fd=sl.getStatEventTarget=function(){return zc()},pd=sl.ErrorCode=Kc,gd=sl.EventType=Gc,md=sl.Event=Fc,yd=sl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vd=(sl.FetchXmlHttpFactory=eh,sl.WebChannel=$c),bd=sl.XhrIo=lh,wd=sl.Md5=Gh,_d=sl.Integer=Yh;const xd="@firebase/firestore";class Sd{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Sd.UNAUTHENTICATED=new Sd(null),Sd.GOOGLE_CREDENTIALS=new Sd("google-credentials-uid"),Sd.FIRST_PARTY=new Sd("first-party-uid"),Sd.MOCK_USER=new Sd("mock-user");let kd="10.10.0";const Ed=new Go("@firebase/firestore");function Id(){return Ed.logLevel}function Td(t){if(Ed.logLevel<=Uo.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(Ad);Ed.debug("Firestore (".concat(kd,"): ").concat(t),...i)}}function Cd(t){if(Ed.logLevel<=Uo.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(Ad);Ed.error("Firestore (".concat(kd,"): ").concat(t),...i)}}function Dd(t){if(Ed.logLevel<=Uo.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const i=n.map(Ad);Ed.warn("Firestore (".concat(kd,"): ").concat(t),...i)}}function Ad(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function Md(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const e="FIRESTORE (".concat(kd,") INTERNAL ASSERTION FAILED: ")+t;throw Cd(e),new Error(e)}function Nd(t,e){t||Md()}function Pd(t,e){return t}const Od={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ld extends To{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Rd{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Fd{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))}}class Vd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Sd.UNAUTHENTICATED)))}shutdown(){}}class zd{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Bd{constructor(t){this.t=t,this.currentUser=Sd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new Rd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rd,t.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Td("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Td("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rd)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Td("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Nd("string"==typeof e.accessToken),new Fd(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Nd(null===t||"string"==typeof t),new Sd(t)}}class jd{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Sd.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ud{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new jd(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Sd.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qd{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wd{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Td("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));const n=t.token!==this.R;return this.R=t.token,Td("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{Td("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):Td("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Nd("string"==typeof t.token),this.R=t.token,new qd(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hd(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Kd{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Hd(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%62))}return n}}function Gd(t,e){return t<e?-1:t>e?1:0}function Qd(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}function Yd(t){return t+"\0"}class $d{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ld(Od.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ld(Od.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ld(Od.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ld(Od.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $d.fromMillis(Date.now())}static fromDate(t){return $d.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new $d(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Gd(this.nanoseconds,t.nanoseconds):Gd(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xd{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Xd(t)}static min(){return new Xd(new $d(0,0))}static max(){return new Xd(new $d(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jd{constructor(t,e,n){void 0===e?e=0:e>t.length&&Md(),void 0===n?n=t.length-e:n>t.length-e&&Md(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Jd.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Jd?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Zd extends Jd{construct(t,e,n){return new Zd(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const t=[];for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ld(Od.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));t.push(...i.split("/").filter((t=>t.length>0)))}return new Zd(t)}static emptyPath(){return new Zd([])}}const tf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ef extends Jd{construct(t,e,n){return new ef(t,e,n)}static isValidIdentifier(t){return tf.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ef.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ef(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ld(Od.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Ld(Od.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Ld(Od.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Ld(Od.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ef(e)}static emptyPath(){return new ef([])}}class nf{constructor(t){this.path=t}static fromPath(t){return new nf(Zd.fromString(t))}static fromName(t){return new nf(Zd.fromString(t).popFirst(5))}static empty(){return new nf(Zd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Zd.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Zd.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new nf(new Zd(t.slice()))}}class rf{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}}function sf(t){return t.fields.find((t=>2===t.kind))}function of(t){return t.fields.filter((t=>2!==t.kind))}rf.UNKNOWN_ID=-1;class af{constructor(t,e){this.fieldPath=t,this.kind=e}}class lf{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new lf(0,hf.min())}}function cf(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Xd.fromTimestamp(1e9===r?new $d(n+1,0):new $d(n,r));return new hf(i,nf.empty(),e)}function uf(t){return new hf(t.readTime,t.key,-1)}class hf{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new hf(Xd.min(),nf.empty(),-1)}static max(){return new hf(Xd.max(),nf.empty(),-1)}}function df(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=nf.comparator(t.documentKey,e.documentKey),0!==n?n:Gd(t.largestBatchId,e.largestBatchId))}const ff="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function gf(t){if(t.code!==Od.FAILED_PRECONDITION||t.message!==ff)throw t;Td("LocalStore","Unexpectedly lost primary lease")}class mf{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Md(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new mf(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof mf?e:mf.resolve(e)}catch(t){return mf.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):mf.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):mf.reject(e)}static resolve(t){return new mf(((e,n)=>{e(t)}))}static reject(t){return new mf(((e,n)=>{n(t)}))}static waitFor(t){return new mf(((e,n)=>{let r=0,i=0,s=!1;t.forEach((t=>{++r,t.next((()=>{++i,s&&i===r&&e()}),(t=>n(t)))})),s=!0,i===r&&e()}))}static or(t){let e=mf.resolve(!1);for(const n of t)e=e.next((t=>t?mf.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new mf(((n,r)=>{const i=t.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;e(t[l]).next((t=>{s[l]=t,++o,o===i&&n(s)}),(t=>r(t)))}}))}static doWhile(t,e){return new mf(((n,r)=>{const i=()=>{!0===t()?e().next((()=>{i()}),r):n()};i()}))}}class yf{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Rd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new wf(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=Ef(e.target.error);this.V.reject(new wf(t,n))}}static open(t,e,n,r){try{return new yf(e,t.transaction(r,n))}catch(t){throw new wf(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Td("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new xf(e)}}class vf{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===vf.S(So())&&Cd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Td("SimpleDb","Removing database:",t),Sf(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!Io())return!1;if(vf.C())return!0;const t=So(),e=vf.S(t),n=0<e&&e<10,r=vf.v(t),i=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||i)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(Td("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=t=>{const n=t.target.result;e(n)},r.onblocked=()=>{n(new wf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=e=>{const r=e.target.error;"VersionError"===r.name?n(new Ld(Od.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ld(Od.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new wf(t,r))},r.onupgradeneeded=t=>{Td("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,r.transaction,t.oldVersion,this.version).next((()=>{Td("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=t=>this.L(t)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,r){const i="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=yf.open(this.db,t,i?"readonly":"readwrite",n),s=r(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),mf.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(Td("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class bf{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Sf(this.k.delete())}}class wf extends Ld{constructor(t,e){super(Od.UNAVAILABLE,"IndexedDB transaction '".concat(t,"' failed: ").concat(e)),this.name="IndexedDbTransactionError"}}function _f(t){return"IndexedDbTransactionError"===t.name}class xf{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Td("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Td("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Sf(n)}add(t){return Td("SimpleDb","ADD",this.store.name,t,t),Sf(this.store.add(t))}get(t){return Sf(this.store.get(t)).next((e=>(void 0===e&&(e=null),Td("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Td("SimpleDb","DELETE",this.store.name,t),Sf(this.store.delete(t))}count(){return Td("SimpleDb","COUNT",this.store.name),Sf(this.store.count())}W(t,e){const n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const t=r.getAll(n.range);return new mf(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new mf(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){Td("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const r=this.cursor(n);return this.G(r,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.G(r,e)}Z(t){const e=this.cursor({});return new mf(((n,r)=>{e.onerror=t=>{const e=Ef(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next((t=>{t?r.continue():n()})):n()}}))}G(t,e){const n=[];return new mf(((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new bf(i),o=e(i.primaryKey,i.value,s);if(o instanceof mf){const t=o.catch((t=>(s.done(),mf.reject(t))));n.push(t)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>mf.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Sf(t){return new mf(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=Ef(t.target.error);n(e)}}))}let kf=!1;function Ef(t){const e=vf.S(So());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Ld("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(e,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return kf||(kf=!0,setTimeout((()=>{throw t}),0)),t}}return t}class If{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(t){Td("IndexBackfiller","Scheduled in ".concat(t,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{Td("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(t){_f(t)?Td("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await gf(t)}await this.ee(6e4)}))}}class Tf{constructor(t,e){this.localStore=t,this.persistence=e}async te(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.ne(e,t)))}ne(t,e){const n=new Set;let r=e,i=!0;return mf.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return Td("IndexBackfiller","Processing collection: ".concat(e)),this.re(t,e,r).next((t=>{r-=t,n.add(e)}));i=!1})))).next((()=>e-r))}re(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((r=>this.localStore.localDocuments.getNextDocuments(t,e,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(t,i).next((()=>this.ie(r,n))).next((n=>(Td("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>i.size))}))))}ie(t,e){let n=t;return e.changes.forEach(((t,e)=>{const r=uf(e);df(r,n)>0&&(n=r)})),new hf(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}class Cf{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Df(t){return null==t}function Af(t){return 0===t&&1/t==-1/0}function Mf(t){return"number"==typeof t&&Number.isInteger(t)&&!Af(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Nf(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Of(e)),e=Pf(t.get(n),e);return Of(e)}function Pf(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const e=t.charAt(i);switch(e){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=e}}return n}function Of(t){return t+"\x01\x01"}function Lf(t){const e=t.length;if(Nd(e>=2),2===e)return Nd("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Zd.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const e=t.indexOf("\x01",s);switch((e<0||e>n)&&Md(),t.charAt(e+1)){case"\x01":const n=t.substring(s,e);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=t.substring(s,e),i+="\0";break;case"\x11":i+=t.substring(s,e+1);break;default:Md()}s=e+2}return new Zd(r)}Cf._e=-1;const Rf=["userId","batchId"];function Ff(t,e){return[t,Nf(e)]}function Vf(t,e,n){return[t,Nf(e),n]}const zf={},Bf=["prefixPath","collectionGroup","readTime","documentId"],jf=["prefixPath","collectionGroup","documentId"],Uf=["collectionGroup","readTime","prefixPath","documentId"],qf=["canonicalId","targetId"],Wf=["targetId","path"],Hf=["path","targetId"],Kf=["collectionId","parent"],Gf=["indexId","uid"],Qf=["uid","sequenceNumber"],Yf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$f=["indexId","uid","orderedDocumentKey"],Xf=["userId","collectionPath","documentId"],Jf=["userId","collectionPath","largestBatchId"],Zf=["userId","collectionGroup","largestBatchId"],tp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ep=[...tp,"documentOverlays"],np=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rp=np,ip=[...rp,"indexConfiguration","indexState","indexEntries"];class sp extends pf{constructor(t,e){super(),this.ae=t,this.currentSequenceNumber=e}}function op(t,e){const n=Pd(t);return vf.M(n.ae,e)}function ap(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lp(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class up{constructor(t,e){this.comparator=t,this.root=e||dp.EMPTY}insert(t,e){return new up(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,dp.BLACK,null,null))}remove(t){return new up(this.comparator,this.root.remove(t,this.comparator).copy(null,null,dp.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push("".concat(e,":").concat(n)),!1))),"{".concat(t.join(", "),"}")}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hp(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hp(this.root,t,this.comparator,!1)}getReverseIterator(){return new hp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hp(this.root,t,this.comparator,!0)}}class hp{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class dp{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:dp.RED,this.left=null!=r?r:dp.EMPTY,this.right=null!=i?i:dp.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new dp(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dp.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return dp.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,dp.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,dp.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Md();if(this.right.isRed())throw Md();const t=this.left.check();if(t!==this.right.check())throw Md();return t+(this.isRed()?0:1)}}dp.EMPTY=null,dp.RED=!0,dp.BLACK=!1,dp.EMPTY=new class{constructor(){this.size=0}get key(){throw Md()}get value(){throw Md()}get color(){throw Md()}get left(){throw Md()}get right(){throw Md()}copy(t,e,n,r,i){return this}insert(t,e,n){return new dp(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fp{constructor(t){this.comparator=t,this.data=new up(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pp(this.data.getIterator())}getIteratorFrom(t){return new pp(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof fp))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new fp(this.comparator);return e.data=t,e}}class pp{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gp(t){return t.hasNext()?t.getNext():void 0}class mp{constructor(t){this.fields=t,t.sort(ef.comparator)}static empty(){return new mp([])}unionWith(t){let e=new fp(ef.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new mp(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Qd(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class yp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vp{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new yp("Invalid base64 string: "+t):t}}(t);return new vp(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new vp(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Gd(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vp.EMPTY_BYTE_STRING=new vp("");const bp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wp(t){if(Nd(!!t),"string"==typeof t){let e=0;const n=bp.exec(t);if(Nd(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_p(t.seconds),nanos:_p(t.nanos)}}function _p(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function xp(t){return"string"==typeof t?vp.fromBase64String(t):vp.fromUint8Array(t)}function Sp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kp(t){const e=t.mapValue.fields.__previous_value__;return Sp(e)?kp(e):e}function Ep(t){const e=wp(t.mapValue.fields.__local_write_time__.timestampValue);return new $d(e.seconds,e.nanos)}class Ip{constructor(t,e,n,r,i,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Tp{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Tp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Tp&&t.projectId===this.projectId&&t.database===this.database}}const Cp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dp={nullValue:"NULL_VALUE"};function Ap(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sp(t)?4:Wp(t)?9007199254740991:10:Md()}function Mp(t,e){if(t===e)return!0;const n=Ap(t);if(n!==Ap(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ep(t).isEqual(Ep(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=wp(t.timestampValue),r=wp(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return xp(t.bytesValue).isEqual(xp(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return _p(t.geoPointValue.latitude)===_p(e.geoPointValue.latitude)&&_p(t.geoPointValue.longitude)===_p(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return _p(t.integerValue)===_p(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=_p(t.doubleValue),r=_p(e.doubleValue);return n===r?Af(n)===Af(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Qd(t.arrayValue.values||[],e.arrayValue.values||[],Mp);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ap(n)!==ap(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Mp(n[i],r[i])))return!1;return!0}(t,e);default:return Md()}}function Np(t,e){return void 0!==(t.values||[]).find((t=>Mp(t,e)))}function Pp(t,e){if(t===e)return 0;const n=Ap(t),r=Ap(e);if(n!==r)return Gd(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gd(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=_p(t.integerValue||t.doubleValue),r=_p(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Op(t.timestampValue,e.timestampValue);case 4:return Op(Ep(t),Ep(e));case 5:return Gd(t.stringValue,e.stringValue);case 6:return function(t,e){const n=xp(t),r=xp(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=Gd(n[i],r[i]);if(0!==t)return t}return Gd(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=Gd(_p(t.latitude),_p(e.latitude));return 0!==n?n:Gd(_p(t.longitude),_p(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=Pp(n[i],r[i]);if(t)return t}return Gd(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Cp.mapValue&&e===Cp.mapValue)return 0;if(t===Cp.mapValue)return 1;if(e===Cp.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=Gd(r[o],s[o]);if(0!==t)return t;const e=Pp(n[r[o]],i[s[o]]);if(0!==e)return e}return Gd(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Md()}}function Op(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Gd(t,e);const n=wp(t),r=wp(e),i=Gd(n.seconds,r.seconds);return 0!==i?i:Gd(n.nanos,r.nanos)}function Lp(t){return Rp(t)}function Rp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=wp(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return xp(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return nf.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Rp(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+="".concat(i,":").concat(Rp(t.fields[i]));return n+"}"}(t.mapValue):Md()}function Fp(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function Vp(t){return!!t&&"integerValue"in t}function zp(t){return!!t&&"arrayValue"in t}function Bp(t){return!!t&&"nullValue"in t}function jp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Up(t){return!!t&&"mapValue"in t}function qp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lp(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=qp(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Wp(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hp(t){return"nullValue"in t?Dp:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Fp(Tp.empty(),nf.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Md()}function Kp(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Fp(Tp.empty(),nf.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Cp:Md()}function Gp(t,e){const n=Pp(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Qp(t,e){const n=Pp(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Yp{constructor(t){this.value=t}static empty(){return new Yp({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Up(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=qp(e)}setAll(t){let e=ef.emptyPath(),n={},r=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=qp(t):r.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());Up(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Mp(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Up(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){lp(e,((e,n)=>t[e]=n));for(const r of n)delete t[r]}clone(){return new Yp(qp(this.value))}}function $p(t){const e=[];return lp(t.fields,((t,n)=>{const r=new ef([t]);if(Up(n)){const t=$p(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new mp(e)}class Xp{constructor(t,e,n,r,i,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Xp(t,0,Xd.min(),Xd.min(),Xd.min(),Yp.empty(),0)}static newFoundDocument(t,e,n,r){return new Xp(t,1,e,Xd.min(),n,r,0)}static newNoDocument(t,e){return new Xp(t,2,e,Xd.min(),Xd.min(),Yp.empty(),0)}static newUnknownDocument(t,e){return new Xp(t,3,e,Xd.min(),Xd.min(),Yp.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Xd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yp.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xd.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Xp&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Xp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Jp{constructor(t,e){this.position=t,this.inclusive=e}}function Zp(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?nf.comparator(nf.fromName(o.referenceValue),n.key):Pp(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function tg(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mp(t.position[n],e.position[n]))return!1;return!0}class eg{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=t,this.dir=e}}function ng(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class rg{}class ig extends rg{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new pg(t,e,n):"array-contains"===e?new vg(t,n):"in"===e?new bg(t,n):"not-in"===e?new wg(t,n):"array-contains-any"===e?new _g(t,n):new ig(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new gg(t,n):new mg(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Pp(e,this.value)):null!==e&&Ap(this.value)===Ap(e)&&this.matchesComparison(Pp(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Md()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sg extends rg{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new sg(t,e)}matches(t){return og(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function og(t){return"and"===t.op}function ag(t){return"or"===t.op}function lg(t){return cg(t)&&og(t)}function cg(t){for(const e of t.filters)if(e instanceof sg)return!1;return!0}function ug(t){if(t instanceof ig)return t.field.canonicalString()+t.op.toString()+Lp(t.value);if(lg(t))return t.filters.map((t=>ug(t))).join(",");{const e=t.filters.map((t=>ug(t))).join(",");return"".concat(t.op,"(").concat(e,")")}}function hg(t,e){return t instanceof ig?function(t,e){return e instanceof ig&&t.op===e.op&&t.field.isEqual(e.field)&&Mp(t.value,e.value)}(t,e):t instanceof sg?function(t,e){return e instanceof sg&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&hg(n,e.filters[r])),!0)}(t,e):void Md()}function dg(t,e){const n=t.filters.concat(e);return sg.create(n,t.op)}function fg(t){return t instanceof ig?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(Lp(t.value))}(t):t instanceof sg?function(t){return t.op.toString()+" {"+t.getFilters().map(fg).join(" ,")+"}"}(t):"Filter"}class pg extends ig{constructor(t,e,n){super(t,e,n),this.key=nf.fromName(n.referenceValue)}matches(t){const e=nf.comparator(t.key,this.key);return this.matchesComparison(e)}}class gg extends ig{constructor(t,e){super(t,"in",e),this.keys=yg("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class mg extends ig{constructor(t,e){super(t,"not-in",e),this.keys=yg("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function yg(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>nf.fromName(t.referenceValue)))}class vg extends ig{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return zp(e)&&Np(e.arrayValue,this.value)}}class bg extends ig{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Np(this.value.arrayValue,e)}}class wg extends ig{constructor(t,e){super(t,"not-in",e)}matches(t){if(Np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Np(this.value.arrayValue,e)}}class _g extends ig{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!zp(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Np(this.value.arrayValue,t)))}}class xg{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Sg(t){return new xg(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function kg(t){const e=Pd(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>ug(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Lp(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Lp(t))).join(",")),e.ce=t}return e.ce}function Eg(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ng(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hg(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tg(t.startAt,e.startAt)&&tg(t.endAt,e.endAt)}function Ig(t){return nf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function Tg(t,e){return t.filters.filter((t=>t instanceof ig&&t.field.isEqual(e)))}function Cg(t,e,n){let r=Dp,i=!0;for(const s of Tg(t,e)){let t=Dp,e=!0;switch(s.op){case"<":case"<=":t=Hp(s.value);break;case"==":case"in":case">=":t=s.value;break;case">":t=s.value,e=!1;break;case"!=":case"not-in":t=Dp}Gp({value:r,inclusive:i},{value:t,inclusive:e})<0&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];Gp({value:r,inclusive:i},{value:t,inclusive:n.inclusive})<0&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}function Dg(t,e,n){let r=Cp,i=!0;for(const s of Tg(t,e)){let t=Cp,e=!0;switch(s.op){case">=":case">":t=Kp(s.value),e=!1;break;case"==":case"in":case"<=":t=s.value;break;case"<":t=s.value,e=!1;break;case"!=":case"not-in":t=Cp}Qp({value:r,inclusive:i},{value:t,inclusive:e})>0&&(r=t,i=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];Qp({value:r,inclusive:i},{value:t,inclusive:n.inclusive})>0&&(r=t,i=n.inclusive);break}return{value:r,inclusive:i}}class Ag{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Mg(t,e,n,r,i,s,o,a){return new Ag(t,e,n,r,i,s,o,a)}function Ng(t){return new Ag(t)}function Pg(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Og(t){return null!==t.collectionGroup}function Lg(t){const e=Pd(t);if(null===e.le){e.le=[];const t=new Set;for(const i of e.explicitOrderBy)e.le.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new fp(ef.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.le.push(new eg(r,n))})),t.has(ef.keyField().canonicalString())||e.le.push(new eg(ef.keyField(),n))}return e.le}function Rg(t){const e=Pd(t);return e.he||(e.he=Fg(e,Lg(t))),e.he}function Fg(t,e){if("F"===t.limitType)return Sg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new eg(t.field,e)}));const n=t.endAt?new Jp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jp(t.startAt.position,t.startAt.inclusive):null;return Sg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vg(t,e){const n=t.filters.concat([e]);return new Ag(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zg(t,e,n){return new Ag(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bg(t,e){return Eg(Rg(t),Rg(e))&&t.limitType===e.limitType}function jg(t){return"".concat(kg(Rg(t)),"|lt:").concat(t.limitType)}function Ug(t){return"Query(target=".concat(function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((t=>fg(t))).join(", "),"]")),Df(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((t=>function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t))).join(", "),"]")),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Lp(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Lp(t))).join(",")),"Target(".concat(e,")")}(Rg(t)),"; limitType=").concat(t.limitType,")")}function qg(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):nf.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Lg(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=Zp(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Lg(t),e))&&!(t.endAt&&!function(t,e,n){const r=Zp(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Lg(t),e))}(t,e)}function Wg(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hg(t){return(e,n)=>{let r=!1;for(const i of Lg(t)){const t=Kg(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function Kg(t,e,n){const r=t.field.isKeyField()?nf.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Pp(r,i):Md()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Md()}}class Gg{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){lp(this.inner,((e,n)=>{for(const[r,i]of n)t(r,i)}))}isEmpty(){return cp(this.inner)}size(){return this.innerSize}}const Qg=new up(nf.comparator);function Yg(){return Qg}const $g=new up(nf.comparator);function Xg(){let t=$g;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.insert(i.key,i);return t}function Jg(t){let e=$g;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Zg(){return em()}function tm(){return em()}function em(){return new Gg((t=>t.toString()),((t,e)=>t.isEqual(e)))}const nm=new up(nf.comparator),rm=new fp(nf.comparator);function im(){let t=rm;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of n)t=t.add(i);return t}const sm=new fp(Gd);function om(){return sm}function am(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(e)?"-0":e}}function lm(t){return{integerValue:""+t}}function cm(t,e){return Mf(e)?lm(e):am(t,e)}class um{constructor(){this._=void 0}}function hm(t,e,n){return t instanceof pm?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Sp(e)&&(e=kp(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof gm?mm(t,e):t instanceof ym?vm(t,e):function(t,e){const n=fm(t,e),r=wm(n)+wm(t.Ie);return Vp(n)&&Vp(t.Ie)?lm(r):am(t.serializer,r)}(t,e)}function dm(t,e,n){return t instanceof gm?mm(t,e):t instanceof ym?vm(t,e):n}function fm(t,e){return t instanceof bm?function(t){return Vp(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class pm extends um{}class gm extends um{constructor(t){super(),this.elements=t}}function mm(t,e){const n=_m(e);for(const r of t.elements)n.some((t=>Mp(t,r)))||n.push(r);return{arrayValue:{values:n}}}class ym extends um{constructor(t){super(),this.elements=t}}function vm(t,e){let n=_m(e);for(const r of t.elements)n=n.filter((t=>!Mp(t,r)));return{arrayValue:{values:n}}}class bm extends um{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function wm(t){return _p(t.integerValue||t.doubleValue)}function _m(t){return zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class xm{constructor(t,e){this.field=t,this.transform=e}}class Sm{constructor(t,e){this.version=t,this.transformResults=e}}class km{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new km}static exists(t){return new km(void 0,t)}static updateTime(t){return new km(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Em(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Im{}function Tm(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Fm(t.key,km.none()):new Nm(t.key,t.data,km.none());{const n=t.data,r=Yp.empty();let i=new fp(ef.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),i=i.add(t)}return new Pm(t.key,r,new mp(i.toArray()),km.none())}}function Cm(t,e,n){t instanceof Nm?function(t,e,n){const r=t.value.clone(),i=Lm(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Pm?function(t,e,n){if(!Em(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Lm(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Om(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Dm(t,e,n,r){return t instanceof Nm?function(t,e,n,r){if(!Em(t.precondition,e))return n;const i=t.value.clone(),s=Rm(t.fieldTransforms,r,e);return i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pm?function(t,e,n,r){if(!Em(t.precondition,e))return n;const i=Rm(t.fieldTransforms,r,e),s=e.data;return s.setAll(Om(t)),s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Em(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Am(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=fm(r.transform,t||null);null!=i&&(null===n&&(n=Yp.empty()),n.set(r.field,i))}return n||null}function Mm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Qd(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof gm&&e instanceof gm||t instanceof ym&&e instanceof ym?Qd(t.elements,e.elements,Mp):t instanceof bm&&e instanceof bm?Mp(t.Ie,e.Ie):t instanceof pm&&e instanceof pm}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nm extends Im{constructor(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pm extends Im{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Om(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Lm(t,e,n){const r=new Map;Nd(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,dm(o,a,n[i]))}return r}function Rm(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,hm(t,s,e))}return r}class Fm extends Im{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vm extends Im{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zm{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&Cm(e,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Dm(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Dm(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=tm();return this.mutations.forEach((r=>{const i=t.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=e.has(r.key)?null:o;const a=Tm(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Xd.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),im())}isEqual(t){return this.batchId===t.batchId&&Qd(this.mutations,t.mutations,((t,e)=>Mm(t,e)))&&Qd(this.baseMutations,t.baseMutations,((t,e)=>Mm(t,e)))}}class Bm{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Nd(t.mutations.length===n.length);let r=nm;const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Bm(t,e,n,r)}}class jm{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Um{constructor(t,e){this.count=t,this.unchangedNames=e}}var qm,Wm;function Hm(t){switch(t){default:return Md();case Od.CANCELLED:case Od.UNKNOWN:case Od.DEADLINE_EXCEEDED:case Od.RESOURCE_EXHAUSTED:case Od.INTERNAL:case Od.UNAVAILABLE:case Od.UNAUTHENTICATED:return!1;case Od.INVALID_ARGUMENT:case Od.NOT_FOUND:case Od.ALREADY_EXISTS:case Od.PERMISSION_DENIED:case Od.FAILED_PRECONDITION:case Od.ABORTED:case Od.OUT_OF_RANGE:case Od.UNIMPLEMENTED:case Od.DATA_LOSS:return!0}}function Km(t){if(void 0===t)return Cd("GRPC error has no .code"),Od.UNKNOWN;switch(t){case qm.OK:return Od.OK;case qm.CANCELLED:return Od.CANCELLED;case qm.UNKNOWN:return Od.UNKNOWN;case qm.DEADLINE_EXCEEDED:return Od.DEADLINE_EXCEEDED;case qm.RESOURCE_EXHAUSTED:return Od.RESOURCE_EXHAUSTED;case qm.INTERNAL:return Od.INTERNAL;case qm.UNAVAILABLE:return Od.UNAVAILABLE;case qm.UNAUTHENTICATED:return Od.UNAUTHENTICATED;case qm.INVALID_ARGUMENT:return Od.INVALID_ARGUMENT;case qm.NOT_FOUND:return Od.NOT_FOUND;case qm.ALREADY_EXISTS:return Od.ALREADY_EXISTS;case qm.PERMISSION_DENIED:return Od.PERMISSION_DENIED;case qm.FAILED_PRECONDITION:return Od.FAILED_PRECONDITION;case qm.ABORTED:return Od.ABORTED;case qm.OUT_OF_RANGE:return Od.OUT_OF_RANGE;case qm.UNIMPLEMENTED:return Od.UNIMPLEMENTED;case qm.DATA_LOSS:return Od.DATA_LOSS;default:return Md()}}(Wm=qm||(qm={}))[Wm.OK=0]="OK",Wm[Wm.CANCELLED=1]="CANCELLED",Wm[Wm.UNKNOWN=2]="UNKNOWN",Wm[Wm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wm[Wm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wm[Wm.NOT_FOUND=5]="NOT_FOUND",Wm[Wm.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wm[Wm.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wm[Wm.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wm[Wm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wm[Wm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wm[Wm.ABORTED=10]="ABORTED",Wm[Wm.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wm[Wm.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wm[Wm.INTERNAL=13]="INTERNAL",Wm[Wm.UNAVAILABLE=14]="UNAVAILABLE",Wm[Wm.DATA_LOSS=15]="DATA_LOSS";let Gm=null;function Qm(){return new TextEncoder}const Ym=new _d([4294967295,4294967295],0);function $m(t){const e=Qm().encode(t),n=new wd;return n.update(e),new Uint8Array(n.digest())}function Xm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _d([n,r],0),new _d([i,s],0)]}class Jm{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Zm("Invalid padding: ".concat(e));if(n<0)throw new Zm("Invalid hash count: ".concat(n));if(t.length>0&&0===this.hashCount)throw new Zm("Invalid hash count: ".concat(n));if(0===t.length&&0!==e)throw new Zm("Invalid padding when bitmap length is 0: ".concat(e));this.Te=8*t.length-e,this.Ee=_d.fromNumber(this.Te)}de(t,e,n){let r=t.add(e.multiply(_d.fromNumber(n)));return 1===r.compare(Ym)&&(r=new _d([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=$m(t),[n,r]=Xm(e);for(let i=0;i<this.hashCount;i++){const t=this.de(n,r,i);if(!this.Ae(t))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),s=new Jm(i,r,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=$m(t),[n,r]=Xm(e);for(let i=0;i<this.hashCount;i++){const t=this.de(n,r,i);this.Re(t)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Zm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ty{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,ey.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ty(Xd.min(),r,new up(Gd),Yg(),im())}}class ey{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new ey(n,e,im(),im(),im())}}class ny{constructor(t,e,n,r){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=r}}class ry{constructor(t,e){this.targetId=t,this.fe=e}}class iy{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vp.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class sy{constructor(){this.ge=0,this.pe=ly(),this.ye=vp.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=im(),e=im(),n=im();return this.pe.forEach(((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Md()}})),new ey(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=ly()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Nd(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class oy{constructor(t){this.Be=t,this.ke=new Map,this.qe=Yg(),this.Qe=ay(),this.Ke=new up(Gd)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Le(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:Md()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,r=this.Ye(e);if(r){const i=r.target;if(Ig(i))if(0===n){const t=new nf(i.path);this.We(e,t,Xp.newNoDocument(t,Xd.min()))}else Nd(1===n);else{const r=this.Ze(e);if(r!==n){const n=this.Xe(t),i=n?this.et(n,t,r):1;if(0!==i){this.He(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}null==Gm||Gm.tt(function(t,e,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},d=e.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==r?void 0:r.mightContain(t))&&void 0!==e&&e}}),h}(r,t.fe,this.Be.nt(),n,i))}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=e;let s,o;try{s=xp(n).toUint8Array()}catch(t){if(t instanceof yp)return Dd("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new Jm(s,r,i)}catch(t){return Dd(t instanceof Zm?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Be.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.mightContain(s)||(this.We(e,n,null),r++)})),r}it(t){const e=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Ig(i.target)){const e=new nf(i.target.path);null!==this.qe.get(e)||this.st(r,e)||this.We(r,e,Xp.newNoDocument(e,t))}n.De&&(e.set(r,n.ve()),n.Fe())}}));let n=im();this.Qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const r=new ty(t,e,this.Ke,this.qe,n);return this.qe=Yg(),this.Qe=ay(),this.Ke=new up(Gd),r}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const r=this.ze(t);this.st(t,e)?r.Me(e,1):r.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new sy,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new fp(Gd),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||Td("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Be._t(t)}He(t){this.ke.set(t,new sy),this.Be.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Be.getRemoteKeysForTarget(t).has(e)}}function ay(){return new up(nf.comparator)}function ly(){return new up(nf.comparator)}const cy={asc:"ASCENDING",desc:"DESCENDING"},uy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hy={and:"AND",or:"OR"};class dy{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function fy(t,e){return t.useProto3Json||Df(e)?e:{value:e}}function py(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function gy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function my(t,e){return py(t,e.toTimestamp())}function yy(t){return Nd(!!t),Xd.fromTimestamp(function(t){const e=wp(t);return new $d(e.seconds,e.nanos)}(t))}function vy(t,e){return by(t,e).canonicalString()}function by(t,e){const n=function(t){return new Zd(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function wy(t){const e=Zd.fromString(t);return Nd(Uy(e)),e}function _y(t,e){return vy(t.databaseId,e.path)}function xy(t,e){const n=wy(e);if(n.get(1)!==t.databaseId.projectId)throw new Ld(Od.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ld(Od.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nf(Iy(n))}function Sy(t,e){return vy(t.databaseId,e)}function ky(t){const e=wy(t);return 4===e.length?Zd.emptyPath():Iy(e)}function Ey(t){return new Zd(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Iy(t){return Nd(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ty(t,e,n){return{name:_y(t,e),fields:n.value.mapValue.fields}}function Cy(t,e,n){const r=xy(t,e.name),i=yy(e.updateTime),s=e.createTime?yy(e.createTime):Xd.min(),o=new Yp({mapValue:{fields:e.fields}}),a=Xp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Dy(t,e){let n;if(e instanceof Nm)n={update:Ty(t,e.key,e.value)};else if(e instanceof Fm)n={delete:_y(t,e.key)};else if(e instanceof Pm)n={update:Ty(t,e.key,e.data),updateMask:jy(e.fieldMask)};else{if(!(e instanceof Vm))return Md();n={verify:_y(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof pm)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gm)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ym)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bm)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw Md()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:my(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Md()}(t,e.precondition)),n}function Ay(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?km.updateTime(yy(t.updateTime)):void 0!==t.exists?km.exists(t.exists):km.none()}(e.currentDocument):km.none(),r=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)Nd("REQUEST_TIME"===e.setToServerValue),n=new pm;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new gm(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new ym(t)}else"increment"in e?n=new bm(t,e.increment):Md();const r=ef.fromServerFormat(e.fieldPath);return new xm(r,n)}(t,e))):[];if(e.update){e.update.name;const i=xy(t,e.update.name),s=new Yp({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new mp(e.map((t=>ef.fromServerFormat(t))))}(e.updateMask);return new Pm(i,s,t,n,r)}return new Nm(i,s,n,r)}if(e.delete){const r=xy(t,e.delete);return new Fm(r,n)}if(e.verify){const r=xy(t,e.verify);return new Vm(r,n)}return Md()}function My(t,e){return{documents:[Sy(t,e.path)]}}function Ny(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sy(t,i);const s=function(t){if(0!==t.length)return By(sg.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Vy(t.field),direction:Ly(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fy(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:i}}function Py(t){let e=ky(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Nd(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=Oy(t);return e instanceof sg&&lg(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new eg(zy(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Df(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new Jp(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new Jp(n,e)}(n.endAt)),Mg(e,i,o,s,a,"F",l,c)}function Oy(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=zy(t.unaryFilter.field);return ig.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=zy(t.unaryFilter.field);return ig.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zy(t.unaryFilter.field);return ig.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zy(t.unaryFilter.field);return ig.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Md()}}(t):void 0!==t.fieldFilter?function(t){return ig.create(zy(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Md()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return sg.create(t.compositeFilter.filters.map((t=>Oy(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Md()}}(t.compositeFilter.op))}(t):Md()}function Ly(t){return cy[t]}function Ry(t){return uy[t]}function Fy(t){return hy[t]}function Vy(t){return{fieldPath:t.canonicalString()}}function zy(t){return ef.fromServerFormat(t.fieldPath)}function By(t){return t instanceof ig?function(t){if("=="===t.op){if(jp(t.value))return{unaryFilter:{field:Vy(t.field),op:"IS_NAN"}};if(Bp(t.value))return{unaryFilter:{field:Vy(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(jp(t.value))return{unaryFilter:{field:Vy(t.field),op:"IS_NOT_NAN"}};if(Bp(t.value))return{unaryFilter:{field:Vy(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vy(t.field),op:Ry(t.op),value:t.value}}}(t):t instanceof sg?function(t){const e=t.getFilters().map((t=>By(t)));return 1===e.length?e[0]:{compositeFilter:{op:Fy(t.op),filters:e}}}(t):Md()}function jy(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Uy(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class qy{constructor(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xd.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Xd.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vp.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new qy(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new qy(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Wy{constructor(t){this.ct=t}}function Hy(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ky(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(t,e){return{name:_y(t,e.key),fields:e.data.value.mapValue.fields,updateTime:py(t,e.version.toTimestamp()),createTime:py(t,e.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Gy(e.version)};else{if(!e.isUnknownDocument())return Md();r.unknownDocument={path:n.path.toArray(),version:Gy(e.version)}}return r}function Ky(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Gy(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qy(t){const e=new $d(t.seconds,t.nanoseconds);return Xd.fromTimestamp(e)}function Yy(t,e){const n=(e.baseMutations||[]).map((e=>Ay(t.ct,e)));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];if(s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform){const n=e.mutations[s+1];t.updateTransforms=n.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((e=>Ay(t.ct,e))),i=$d.fromMillis(e.localWriteTimeMs);return new zm(e.batchId,i,n,r)}function $y(t){const e=Qy(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Qy(t.lastLimboFreeSnapshotVersion):Xd.min();let r;return r=function(t){return void 0!==t.documents}(t.query)?function(t){return Nd(1===t.documents.length),Rg(Ng(ky(t.documents[0])))}(t.query):function(t){return Rg(Py(t))}(t.query),new qy(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,vp.fromBase64String(t.resumeToken))}function Xy(t,e){const n=Gy(e.snapshotVersion),r=Gy(e.lastLimboFreeSnapshotVersion);let i;i=Ig(e.target)?My(t.ct,e.target):Ny(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kg(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Jy(t){const e=Py({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?zg(e,e.limit,"L"):e}function Zy(t,e){return new jm(e.largestBatchId,Ay(t.ct,e.overlayMutation))}function tv(t,e){const n=e.path.lastSegment();return[t,Nf(e.path.popLast()),n]}function ev(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Gy(r.readTime),documentKey:Nf(r.documentKey.path),largestBatchId:r.largestBatchId}}class nv{getBundleMetadata(t,e){return rv(t).get(e).next((t=>{if(t)return function(t){return{id:t.bundleId,createTime:Qy(t.createTime),version:t.version}}(t)}))}saveBundleMetadata(t,e){return rv(t).put(function(t){return{bundleId:t.id,createTime:Gy(yy(t.createTime)),version:t.version}}(e))}getNamedQuery(t,e){return iv(t).get(e).next((t=>{if(t)return function(t){return{name:t.name,query:Jy(t.bundledQuery),readTime:Qy(t.readTime)}}(t)}))}saveNamedQuery(t,e){return iv(t).put(function(t){return{name:t.name,readTime:Gy(yy(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function rv(t){return op(t,"bundles")}function iv(t){return op(t,"namedQueries")}class sv{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const n=e.uid||"";return new sv(t,n)}getOverlay(t,e){return ov(t).get(tv(this.userId,e)).next((t=>t?Zy(this.serializer,t):null))}getOverlays(t,e){const n=Zg();return mf.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const r=[];return n.forEach(((n,i)=>{const s=new jm(e,i);r.push(this.ht(t,s))})),mf.waitFor(r)}removeOverlaysForBatchId(t,e,n){const r=new Set;e.forEach((t=>r.add(Nf(t.getCollectionPath()))));const i=[];return r.forEach((e=>{const r=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);i.push(ov(t).H("collectionPathOverlayIndex",r))})),mf.waitFor(i)}getOverlaysForCollection(t,e,n){const r=Zg(),i=Nf(e),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return ov(t).W("collectionPathOverlayIndex",s).next((t=>{for(const e of t){const t=Zy(this.serializer,e);r.set(t.getKey(),t)}return r}))}getOverlaysForCollectionGroup(t,e,n,r){const i=Zg();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return ov(t).Y({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=Zy(this.serializer,e);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(t,e){return ov(t).put(function(t,e,n){const[r,i,s]=tv(e,n.mutation.key);return{userId:e,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Dy(t.ct,n.mutation)}}(this.serializer,this.userId,e))}}function ov(t){return op(t,"documentOverlays")}class av{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(_p(t.integerValue));else if("doubleValue"in t){const n=_p(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),Af(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At("".concat(n.seconds||"")),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(xp(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?Wp(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):Md()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const r of Object.keys(n))this.Rt(r,e),this.It(n[r],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const r of n)this.It(r,e)}gt(t,e){this.Et(e,37),nf.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}function lv(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function cv(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const r=lv(255&t[n]);if(e+=r,8!==r)break}return e}(t);return Math.ceil(e/8)}av.bt=new av;class uv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ct(n.value),n=e.next();this.vt()}Ft(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Mt(n.value),n=e.next();this.xt()}Ot(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ct(t);else if(t<2048)this.Ct(960|t>>>6),this.Ct(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ct(480|t>>>12),this.Ct(128|63&t>>>6),this.Ct(128|63&t);else{const t=e.codePointAt(0);this.Ct(240|t>>>18),this.Ct(128|63&t>>>12),this.Ct(128|63&t>>>6),this.Ct(128|63&t)}}this.vt()}Nt(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Mt(t);else if(t<2048)this.Mt(960|t>>>6),this.Mt(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Mt(480|t>>>12),this.Mt(128|63&t>>>6),this.Mt(128|63&t);else{const t=e.codePointAt(0);this.Mt(240|t>>>18),this.Mt(128|63&t>>>12),this.Mt(128|63&t>>>6),this.Mt(128|63&t)}}this.xt()}Lt(t){const e=this.Bt(t),n=cv(e);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=255&e[r]}qt(t){const e=this.Bt(t),n=cv(e);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Bt(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let r=1;r<e.length;++r)e[r]^=n?255:0;return e}Ct(t){const e=255&t;0===e?(this.Kt(0),this.Kt(255)):255===e?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){const e=255&t;0===e?(this.Ut(0),this.Ut(255)):255===e?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class hv{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Lt(t)}Tt(){this.Gt.Qt()}}class dv{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}}class fv{constructor(){this.Gt=new uv,this.zt=new hv(this.Gt),this.jt=new dv(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return 0===t?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class pv{constructor(t,e,n,r){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=r}Jt(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new pv(this.indexId,this.documentKey,this.arrayValue,n)}}function gv(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=mv(t.arrayValue,e.arrayValue),0!==n?n:(n=mv(t.directionalValue,e.directionalValue),0!==n?n:nf.comparator(t.documentKey,e.documentKey)))}function mv(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class yv{constructor(t){this.Yt=new fp(((t,e)=>ef.comparator(t.field,e.field))),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(const e of t.filters){const t=e;t.isInequality()?this.Yt=this.Yt.add(t):this.Xt.push(t)}}get en(){return this.Yt.size>1}tn(t){if(Nd(t.collectionGroup===this.collectionId),this.en)return!1;const e=sf(t);if(void 0!==e&&!this.nn(e))return!1;const n=of(t);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const t=this.Yt.getIterator().getNext();if(!r.has(t.field.canonicalString())){const e=n[i];if(!this.rn(t,e)||!this.sn(this.Zt[s++],e))return!1}++i}for(;i<n.length;++i){const t=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],t))return!1}return!0}on(){if(this.en)return null;let t=new fp(ef.comparator);const e=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)e.push(new af(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new af(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new af(n.field,"asc"===n.dir?0:1)));return new rf(rf.UNKNOWN_ID,this.collectionId,e,lf.empty())}nn(t){for(const e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function vv(t){var e,n;if(Nd(t instanceof ig||t instanceof sg),t instanceof ig){if(t instanceof bg){const r=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>ig.create(t.field,"==",e))))||[];return sg.create(r,"or")}return t}const r=t.filters.map((t=>vv(t)));return sg.create(r,t.op)}function bv(t){if(0===t.getFilters().length)return[];const e=Sv(vv(t));return Nd(xv(e)),wv(e)||_v(e)?[e]:e.getFilters()}function wv(t){return t instanceof ig}function _v(t){return t instanceof sg&&lg(t)}function xv(t){return wv(t)||_v(t)||function(t){if(t instanceof sg&&ag(t)){for(const e of t.getFilters())if(!wv(e)&&!_v(e))return!1;return!0}return!1}(t)}function Sv(t){if(Nd(t instanceof ig||t instanceof sg),t instanceof ig)return t;if(1===t.filters.length)return Sv(t.filters[0]);const e=t.filters.map((t=>Sv(t)));let n=sg.create(e,t.op);return n=Iv(n),xv(n)?n:(Nd(n instanceof sg),Nd(og(n)),Nd(n.filters.length>1),n.filters.reduce(((t,e)=>kv(t,e))))}function kv(t,e){let n;return Nd(t instanceof ig||t instanceof sg),Nd(e instanceof ig||e instanceof sg),n=t instanceof ig?e instanceof ig?function(t,e){return sg.create([t,e],"and")}(t,e):Ev(t,e):e instanceof ig?Ev(e,t):function(t,e){if(Nd(t.filters.length>0&&e.filters.length>0),og(t)&&og(e))return dg(t,e.getFilters());const n=ag(t)?t:e,r=ag(t)?e:t,i=n.filters.map((t=>kv(t,r)));return sg.create(i,"or")}(t,e),Iv(n)}function Ev(t,e){if(og(e))return dg(e,t.getFilters());{const n=e.filters.map((e=>kv(t,e)));return sg.create(n,"or")}}function Iv(t){if(Nd(t instanceof ig||t instanceof sg),t instanceof ig)return t;const e=t.getFilters();if(1===e.length)return Iv(e[0]);if(cg(t))return t;const n=e.map((t=>Iv(t))),r=[];return n.forEach((e=>{e instanceof ig?r.push(e):e instanceof sg&&(e.op===t.op?r.push(...e.filters):r.push(e))})),1===r.length?r[0]:sg.create(r,t.op)}class Tv{constructor(){this._n=new Cv}addToCollectionParentIndex(t,e){return this._n.add(e),mf.resolve()}getCollectionParents(t,e){return mf.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return mf.resolve()}deleteFieldIndex(t,e){return mf.resolve()}deleteAllFieldIndexes(t){return mf.resolve()}createTargetIndexes(t,e){return mf.resolve()}getDocumentsMatchingTarget(t,e){return mf.resolve(null)}getIndexType(t,e){return mf.resolve(0)}getFieldIndexes(t,e){return mf.resolve([])}getNextCollectionGroupToUpdate(t){return mf.resolve(null)}getMinOffset(t,e){return mf.resolve(hf.min())}getMinOffsetFromCollectionGroup(t,e){return mf.resolve(hf.min())}updateCollectionGroup(t,e,n){return mf.resolve()}updateIndexEntries(t,e){return mf.resolve()}}class Cv{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new fp(Zd.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new fp(Zd.comparator)).toArray()}}const Dv=new Uint8Array(0);class Av{constructor(t,e){this.databaseId=e,this.an=new Cv,this.un=new Gg((t=>kg(t)),((t,e)=>Eg(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener((()=>{this.an.add(e)}));const i={collectionId:n,parent:Nf(r)};return Mv(t).put(i)}return mf.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[Yd(e),""],!1,!0);return Mv(t).W(r).next((t=>{for(const r of t){if(r.collectionId!==e)break;n.push(Lf(r.parent))}return n}))}addFieldIndex(t,e){const n=Pv(t),r=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete r.indexId;const i=n.add(r);if(e.indexState){const n=Ov(t);return i.next((t=>{n.put(ev(t,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return i.next()}deleteFieldIndex(t,e){const n=Pv(t),r=Ov(t),i=Nv(t);return n.delete(e.indexId).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=Pv(t),n=Nv(t),r=Ov(t);return e.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(t,e){return mf.forEach(this.cn(e),(e=>this.getIndexType(t,e).next((n=>{if(0===n||1===n){const n=new yv(e).on();if(null!=n)return this.addFieldIndex(t,n)}}))))}getDocumentsMatchingTarget(t,e){const n=Nv(t);let r=!0;const i=new Map;return mf.forEach(this.cn(e),(e=>this.ln(t,e).next((t=>{r&&(r=!!t),i.set(e,t)})))).next((()=>{if(r){let t=im();const r=[];return mf.forEach(i,((i,s)=>{Td("IndexedDbIndexManager","Using index ".concat(function(t){return"id=".concat(t.indexId,"|cg=").concat(t.collectionGroup,"|f=").concat(t.fields.map((t=>"".concat(t.fieldPath,":").concat(t.kind))).join(","))}(i)," to execute ").concat(kg(e)));const o=function(t,e){const n=sf(e);if(void 0===n)return null;for(const r of Tg(t,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(t,e){const n=new Map;for(const r of of(e))for(const e of Tg(t,r.fieldPath))switch(e.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,i),l=function(t,e){const n=[];let r=!0;for(const i of of(e)){const e=0===i.kind?Cg(t,i.fieldPath,t.startAt):Dg(t,i.fieldPath,t.startAt);n.push(e.value),r&&(r=e.inclusive)}return new Jp(n,r)}(s,i),c=function(t,e){const n=[];let r=!0;for(const i of of(e)){const e=0===i.kind?Dg(t,i.fieldPath,t.endAt):Cg(t,i.fieldPath,t.endAt);n.push(e.value),r&&(r=e.inclusive)}return new Jp(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return mf.forEach(f,(i=>n.j(i,e.limit).next((e=>{e.forEach((e=>{const n=nf.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),r.push(n))}))}))))})).next((()=>r))}return mf.resolve(null)}))}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:bv(sg.create(t.filters,"and")).map((e=>Sg(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.un.set(t,e),e)}In(t,e,n,r,i,s,o){const a=(null!=e?e.length:1)*Math.max(n.length,i.length),l=a/(null!=e?e.length:1),c=[];for(let u=0;u<a;++u){const a=e?this.Tn(e[u/l]):Dv,h=this.En(t,a,n[u%l],r),d=this.dn(t,a,i[u%l],s),f=o.map((e=>this.En(t,a,e,!0)));c.push(...this.createRange(h,d,f))}return c}En(t,e,n,r){const i=new pv(t,nf.empty(),e,n);return r?i:i.Jt()}dn(t,e,n,r){const i=new pv(t,nf.empty(),e,n);return r?i.Jt():i}ln(t,e){const n=new yv(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next((t=>{let e=null;for(const r of t)n.tn(r)&&(!e||r.fields.length>e.fields.length)&&(e=r);return e}))}getIndexType(t,e){let n=2;const r=this.cn(e);return mf.forEach(r,(e=>this.ln(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new fp(ef.comparator),n=!1;for(const r of t.filters)for(const t of r.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const r of t.orderBy)r.field.isKeyField()||(e=e.add(r.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&r.length>1&&2===n?1:n))}An(t,e){const n=new fv;for(const r of of(t)){const t=e.data.field(r.fieldPath);if(null==t)return null;const i=n.Ht(r.kind);av.bt.Pt(t,i)}return n.Wt()}Tn(t){const e=new fv;return av.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){const n=new fv;return av.bt.Pt(Fp(this.databaseId,e),n.Ht(function(t){const e=of(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Wt()}Pn(t,e,n){if(null===n)return[];let r=[];r.push(new fv);let i=0;for(const s of of(t)){const t=n[i++];for(const n of r)if(this.Vn(e,s.fieldPath)&&zp(t))r=this.mn(r,s,t);else{const e=n.Ht(s.kind);av.bt.Pt(t,e)}}return this.fn(r)}hn(t,e,n){return this.Pn(t,e,n.position)}fn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Wt();return e}mn(t,e,n){const r=[...t],i=[];for(const s of n.arrayValue.values||[])for(const t of r){const n=new fv;n.seed(t.Wt()),av.bt.Pt(s,n.Ht(e.kind)),i.push(n)}return i}Vn(t,e){return!!t.filters.find((t=>t instanceof ig&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=Pv(t),r=Ov(t);return(e?n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.W()).next((t=>{const e=[];return mf.forEach(t,(t=>r.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new lf(e.sequenceNumber,new hf(Qy(e.readTime),new nf(Lf(e.documentKey)),e.largestBatchId)):lf.empty(),r=t.fields.map((t=>{let[e,n]=t;return new af(ef.fromServerFormat(e),n)}));return new rf(t.indexId,t.collectionGroup,r,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:Gd(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const r=Pv(t),i=Ov(t);return this.gn(t).next((t=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>mf.forEach(e,(e=>i.put(ev(e.indexId,this.uid,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return mf.forEach(e,((e,r)=>{const i=n.get(e.collectionGroup);return(i?mf.resolve(i):this.getFieldIndexes(t,e.collectionGroup)).next((i=>(n.set(e.collectionGroup,i),mf.forEach(i,(n=>this.pn(t,e,n).next((e=>{const i=this.yn(r,n);return e.isEqual(i)?mf.resolve():this.wn(t,r,n,e,i)})))))))}))}Sn(t,e,n,r){return Nv(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,e.key),documentKey:e.key.path.toArray()})}bn(t,e,n,r){return Nv(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,e.key),e.key.path.toArray()])}pn(t,e,n){const r=Nv(t);let i=new fp(gv);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,e)])},((t,r)=>{i=i.add(new pv(n.indexId,e,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(t,e){let n=new fp(gv);const r=this.An(e,t);if(null==r)return n;const i=sf(e);if(null!=i){const s=t.data.field(i.fieldPath);if(zp(s))for(const i of s.arrayValue.values||[])n=n.add(new pv(e.indexId,t.key,this.Tn(i),r))}else n=n.add(new pv(e.indexId,t.key,Dv,r));return n}wn(t,e,n,r,i){Td("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,r,i){const s=t.getIterator(),o=e.getIterator();let a=gp(s),l=gp(o);for(;a||l;){let t=!1,e=!1;if(a&&l){const r=n(a,l);r<0?e=!0:r>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(r(l),l=gp(o)):e?(i(a),a=gp(s)):(a=gp(s),l=gp(o))}}(r,i,gv,(r=>{s.push(this.Sn(t,e,n,r))}),(r=>{s.push(this.bn(t,e,n,r))})),mf.waitFor(s)}gn(t){let e=1;return Ov(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,r)=>{r.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>gv(t,e))).filter(((t,e,n)=>!e||0!==gv(t,n[e-1])));const r=[];r.push(t);for(const s of n){const n=gv(s,t),i=gv(s,e);if(0===n)r[0]=t.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(e);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const t=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Dv,[]],e=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Dv,[]];i.push(IDBKeyRange.bound(t,e))}return i}Dn(t,e){return gv(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Lv)}getMinOffset(t,e){return mf.mapArray(this.cn(e),(e=>this.ln(t,e).next((t=>t||Md())))).next(Lv)}}function Mv(t){return op(t,"collectionParents")}function Nv(t){return op(t,"indexEntries")}function Pv(t){return op(t,"indexConfiguration")}function Ov(t){return op(t,"indexState")}function Lv(t){Nd(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;df(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hf(e.readTime,e.documentKey,n)}const Rv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fv{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new Fv(t,Fv.DEFAULT_COLLECTION_PERCENTILE,Fv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Vv(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((t,e,n)=>(a++,n.delete())));s.push(l.next((()=>{Nd(1===a)})));const c=[];for(const u of n.mutations){const t=Vf(e,u.key.path,n.batchId);s.push(i.delete(t)),c.push(u.key)}return mf.waitFor(s).next((()=>c))}function zv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Md();e=t.noDocument}return JSON.stringify(e).length}Fv.DEFAULT_COLLECTION_PERCENTILE=10,Fv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fv.DEFAULT=new Fv(41943040,Fv.DEFAULT_COLLECTION_PERCENTILE,Fv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fv.DISABLED=new Fv(-1,0,0);class Bv{constructor(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(t,e,n,r){Nd(""!==t.uid);const i=t.isAuthenticated()?t.uid:"";return new Bv(i,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uv(t).Y({index:"userMutationsIndex",range:n},((t,n,r)=>{e=!1,r.done()})).next((()=>e))}addMutationBatch(t,e,n,r){const i=qv(t),s=Uv(t);return s.add({}).next((o=>{Nd("number"==typeof o);const a=new zm(o,e,n,r),l=function(t,e,n){const r=n.baseMutations.map((e=>Dy(t.ct,e))),i=n.mutations.map((e=>Dy(t.ct,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new fp(((t,e)=>Gd(t.canonicalString(),e.canonicalString())));for(const t of r){const e=Vf(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),c.push(s.put(l)),c.push(i.put(e,zf))}return u.forEach((e=>{c.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),mf.waitFor(c).next((()=>a))}))}lookupMutationBatch(t,e){return Uv(t).get(e).next((t=>t?(Nd(t.userId===this.userId),Yy(this.serializer,t)):null))}vn(t,e){return this.Cn[e]?mf.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.Cn[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Uv(t).Y({index:"userMutationsIndex",range:r},((t,e,r)=>{e.userId===this.userId&&(Nd(e.batchId>=n),i=Yy(this.serializer,e)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Uv(t).Y({index:"userMutationsIndex",range:e,reverse:!0},((t,e,r)=>{n=e.batchId,r.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uv(t).W("userMutationsIndex",e).next((t=>t.map((t=>Yy(this.serializer,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=Ff(this.userId,e.path),r=IDBKeyRange.lowerBound(n),i=[];return qv(t).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Lf(a);if(o===this.userId&&e.path.isEqual(c))return Uv(t).get(l).next((t=>{if(!t)throw Md();Nd(t.userId===this.userId),i.push(Yy(this.serializer,t))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new fp(Gd);const r=[];return e.forEach((e=>{const i=Ff(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=qv(t).Y({range:s},((t,r,i)=>{const[s,o,a]=t,l=Lf(o);s===this.userId&&e.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),mf.waitFor(r).next((()=>this.Fn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,i=Ff(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new fp(Gd);return qv(t).Y({range:s},((t,e,i)=>{const[s,a,l]=t,c=Lf(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(t,o)))}Fn(t,e){const n=[],r=[];return e.forEach((e=>{r.push(Uv(t).get(e).next((t=>{if(null===t)throw Md();Nd(t.userId===this.userId),n.push(Yy(this.serializer,t))})))})),mf.waitFor(r).next((()=>n))}removeMutationBatch(t,e){return Vv(t.ae,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.Mn(e.batchId)})),mf.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return mf.resolve();const n=IDBKeyRange.lowerBound(function(t){return[t]}(this.userId)),r=[];return qv(t).Y({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=Lf(t[1]);r.push(e)}else n.done()})).next((()=>{Nd(0===r.length)}))}))}containsKey(t,e){return jv(t,this.userId,e)}xn(t){return Wv(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function jv(t,e,n){const r=Ff(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return qv(t).Y({range:s,J:!0},((t,n,r)=>{const[s,a,l]=t;s===e&&a===i&&(o=!0),r.done()})).next((()=>o))}function Uv(t){return op(t,"mutations")}function qv(t){return op(t,"documentMutations")}function Wv(t){return op(t,"mutationQueues")}class Hv{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Hv(0)}static Ln(){return new Hv(-1)}}class Kv{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Bn(t).next((e=>{const n=new Hv(e.highestTargetId);return e.highestTargetId=n.next(),this.kn(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.Bn(t).next((t=>Xd.fromTimestamp(new $d(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.Bn(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.Bn(t).next((r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.kn(t,r))))}addTargetData(t,e){return this.qn(t,e).next((()=>this.Bn(t).next((n=>(n.targetCount+=1,this.Qn(e,n),this.kn(t,n))))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Gv(t).delete(e.targetId))).next((()=>this.Bn(t))).next((e=>(Nd(e.targetCount>0),e.targetCount-=1,this.kn(t,e))))}removeTargets(t,e,n){let r=0;const i=[];return Gv(t).Y(((s,o)=>{const a=$y(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(t,a)))})).next((()=>mf.waitFor(i))).next((()=>r))}forEachTarget(t,e){return Gv(t).Y(((t,n)=>{const r=$y(n);e(r)}))}Bn(t){return Qv(t).get("targetGlobalKey").next((t=>(Nd(null!==t),t)))}kn(t,e){return Qv(t).put("targetGlobalKey",e)}qn(t,e){return Gv(t).put(Xy(this.serializer,e))}Qn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Bn(t).next((t=>t.targetCount))}getTargetData(t,e){const n=kg(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Gv(t).Y({range:r,index:"queryTargetsIndex"},((t,n,r)=>{const s=$y(n);Eg(e,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(t,e,n){const r=[],i=Yv(t);return e.forEach((e=>{const s=Nf(e.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(t,n,e))})),mf.waitFor(r)}removeMatchingKeys(t,e,n){const r=Yv(t);return mf.forEach(e,(e=>{const i=Nf(e.path);return mf.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=Yv(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Yv(t);let i=im();return r.Y({range:n,J:!0},((t,e,n)=>{const r=Lf(t[1]),s=new nf(r);i=i.add(s)})).next((()=>i))}containsKey(t,e){const n=Nf(e.path),r=IDBKeyRange.bound([n],[Yd(n)],!1,!0);let i=0;return Yv(t).Y({index:"documentTargetsIndex",J:!0,range:r},((t,e,n)=>{let[r,s]=t;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(t,e){return Gv(t).get(e).next((t=>t?$y(t):null))}}function Gv(t){return op(t,"targets")}function Qv(t){return op(t,"targetGlobal")}function Yv(t){return op(t,"targetDocuments")}function $v(t,e){let[n,r]=t,[i,s]=e;const o=Gd(n,i);return 0===o?Gd(r,s):o}class Xv{constructor(t){this.Kn=t,this.buffer=new fp($v),this.$n=0}Un(){return++this.$n}Wn(t){const e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();$v(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Jv{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(t){Td("LruGarbageCollector","Garbage collection scheduled in ".concat(t,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_f(t)?Td("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await gf(t)}await this.zn(3e5)}))}}class Zv{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return mf.resolve(Cf._e);const n=new Xv(e);return this.jn.forEachTarget(t,(t=>n.Wn(t.sequenceNumber))).next((()=>this.jn.Jn(t,(t=>n.Wn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.jn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Td("LruGarbageCollector","Garbage collection skipped; disabled"),mf.resolve(Rv)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Td("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Rv):this.Yn(t,e)))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(Td("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(e)),r=this.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),this.nthSequenceNumber(t,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(t,n,e)))).next((e=>(i=e,a=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(l=Date.now(),Id()<=Uo.DEBUG&&Td("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(t," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),mf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t}))))}}function tb(t,e){return new Zv(t,e)}class eb{constructor(t,e){this.db=t,this.garbageCollector=tb(this,e)}Hn(t){const e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Zn(t){let e=0;return this.Jn(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,((t,n)=>e(n)))}addReference(t,e,n){return nb(t,n)}removeReference(t,e,n){return nb(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return nb(t,e)}er(t,e){return function(t,e){let n=!1;return Wv(t).Z((r=>jv(t,r,e).next((t=>(t&&(n=!0),mf.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(t,((s,o)=>{if(o<=e){const e=this.er(t,s).next((e=>{if(!e)return i++,n.getEntry(t,s).next((()=>(n.removeEntry(s,Xd.min()),Yv(t).delete(function(t){return[0,Nf(t.path)]}(s)))))}));r.push(e)}})).next((()=>mf.waitFor(r))).next((()=>n.apply(t))).next((()=>i))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return nb(t,e)}Xn(t,e){const n=Yv(t);let r,i=Cf._e;return n.Y({index:"documentTargetsIndex"},((t,n)=>{let[s,o]=t,{path:a,sequenceNumber:l}=n;0===s?(i!==Cf._e&&e(new nf(Lf(r)),i),i=l,r=a):i=Cf._e})).next((()=>{i!==Cf._e&&e(new nf(Lf(r)),i)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function nb(t,e){return Yv(t).put(function(t,e){return{targetId:0,path:Nf(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}class rb{constructor(){this.changes=new Gg((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Xp.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?mf.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ib{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return lb(t).put(n)}removeEntry(t,e,n){return lb(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Ky(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.tr(t,n))))}getEntry(t,e){let n=Xp.newInvalidDocument(e);return lb(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cb(e))},((t,r)=>{n=this.nr(e,r)})).next((()=>n))}rr(t,e){let n={size:0,document:Xp.newInvalidDocument(e)};return lb(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cb(e))},((t,r)=>{n={document:this.nr(e,r),size:zv(r)}})).next((()=>n))}getEntries(t,e){let n=Yg();return this.ir(t,e,((t,e)=>{const r=this.nr(t,e);n=n.insert(t,r)})).next((()=>n))}sr(t,e){let n=Yg(),r=new up(nf.comparator);return this.ir(t,e,((t,e)=>{const i=this.nr(t,e);n=n.insert(t,i),r=r.insert(t,zv(e))})).next((()=>({documents:n,_r:r})))}ir(t,e,n){if(e.isEmpty())return mf.resolve();let r=new fp(hb);e.forEach((t=>r=r.add(t)));const i=IDBKeyRange.bound(cb(r.first()),cb(r.last())),s=r.getIterator();let o=s.getNext();return lb(t).Y({index:"documentKeyIndex",range:i},((t,e,r)=>{const i=nf.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&hb(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?r.U(cb(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,e,n,r,i){const s=e.path,o=[s.popLast().toArray(),s.lastSegment(),Ky(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lb(t).W(IDBKeyRange.bound(o,a,!0)).next((t=>{null==i||i.incrementDocumentReadCount(t.length);let n=Yg();for(const i of t){const t=this.nr(nf.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);t.isFoundDocument()&&(qg(e,t)||r.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,r){let i=Yg();const s=ub(e,n),o=ub(e,hf.max());return lb(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((t,e,n)=>{const s=this.nr(nf.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(t){return new ob(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return ab(t).get("remoteDocumentGlobalKey").next((t=>(Nd(!!t),t)))}tr(t,e){return ab(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){const t=function(t,e){let n;if(e.document)n=Cy(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=nf.fromSegments(e.noDocument.path),r=Qy(e.noDocument.readTime);n=Xp.newNoDocument(t,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Md();{const t=nf.fromSegments(e.unknownDocument.path),r=Qy(e.unknownDocument.version);n=Xp.newUnknownDocument(t,r)}}return e.readTime&&n.setReadTime(function(t){const e=new $d(t[0],t[1]);return Xd.fromTimestamp(e)}(e.readTime)),n}(this.serializer,e);if(!t.isNoDocument()||!t.version.isEqual(Xd.min()))return t}return Xp.newInvalidDocument(t)}}function sb(t){return new ib(t)}class ob extends rb{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new Gg((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,r=new fp(((t,e)=>Gd(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(e.push(this.ar.removeEntry(t,i,o.readTime)),s.isValidDocument()){const a=Hy(this.ar.serializer,s);r=r.add(i.path.popLast());const l=zv(a);n+=l-o.size,e.push(this.ar.addEntry(t,i,a))}else if(n-=o.size,this.trackRemovals){const n=Hy(this.ar.serializer,s.convertToNoDocument(Xd.min()));e.push(this.ar.addEntry(t,i,n))}})),r.forEach((n=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.ar.updateMetadata(t,n)),mf.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next((t=>(this.ur.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.ar.sr(t,e).next((t=>{let{documents:e,_r:n}=t;return n.forEach(((t,n)=>{this.ur.set(t,{size:n,readTime:e.get(t).readTime})})),e}))}}function ab(t){return op(t,"remoteDocumentGlobal")}function lb(t){return op(t,"remoteDocumentsV14")}function cb(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ub(t,e){const n=e.documentKey.path.toArray();return[t,Ky(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hb(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Gd(n[s],r[s]),i)return i;return i=Gd(n.length,r.length),i||(i=Gd(n[n.length-2],r[r.length-2]),i||Gd(n[n.length-1],r[r.length-1]))}class db{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class fb{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Dm(n.mutation,t,mp.empty(),$d.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,im()).next((()=>e))))}getLocalViewOfDocuments(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:im();const r=Zg();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Xg();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Zg();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,im())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let i=Yg();const s=em(),o=em();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Pm)?i=i.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),Dm(o.mutation,e,o.mutation.getFieldMask(),$d.now())):s.set(e.key,mp.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new db(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=em();let r=new up(((t,e)=>t-e)),i=im();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||mp.empty();o=i.applyToLocalView(s,o),n.set(t,o);const a=(r.get(i.batchId)||im()).add(t);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=tm();l.forEach((t=>{if(!i.has(t)){const r=Tm(e.get(t),n.get(t));null!==r&&c.set(t,r),i=i.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return mf.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return nf.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Og(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-i.size):mf.resolve(Zg());let o=-1,a=i;return s.next((e=>mf.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?mf.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,im()))).next((t=>({batchId:o,changes:Jg(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new nf(e)).next((t=>{let e=Xg();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const i=e.collectionGroup;let s=Xg();return this.indexManager.getCollectionParents(t,i).next((o=>mf.forEach(o,(o=>{const a=function(t,e){return new Ag(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(i));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,r)))).next((t=>{i.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,Xp.newInvalidDocument(r)))}));let n=Xg();return t.forEach(((t,r)=>{const s=i.get(t);void 0!==s&&Dm(s.mutation,r,mp.empty(),$d.now()),qg(e,r)&&(n=n.insert(t,r))})),n}))}}class pb{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return mf.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:yy(t.createTime)}}(e)),mf.resolve()}getNamedQuery(t,e){return mf.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:Jy(t.bundledQuery),readTime:yy(t.readTime)}}(e)),mf.resolve()}}class gb{constructor(){this.overlays=new up(nf.comparator),this.hr=new Map}getOverlay(t,e){return mf.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Zg();return mf.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.ht(t,e,r)})),mf.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),mf.resolve()}getOverlaysForCollection(t,e,n){const r=Zg(),i=e.length+1,s=new nf(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===i&&t.largestBatchId>n&&r.set(t.getKey(),t)}return mf.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let i=new up(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=Zg(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Zg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return mf.resolve(o)}ht(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new jm(e,n));let i=this.hr.get(e);void 0===i&&(i=im(),this.hr.set(e,i)),this.hr.set(e,i.add(n.key))}}class mb{constructor(){this.Pr=new fp(yb.Ir),this.Tr=new fp(yb.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new yb(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new yb(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new nf(new Zd([])),n=new yb(e,t),r=new yb(e,t+1),i=[];return this.Tr.forEachInRange([n,r],(t=>{this.Ar(t),i.push(t.key)})),i}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new nf(new Zd([])),n=new yb(e,t),r=new yb(e,t+1);let i=im();return this.Tr.forEachInRange([n,r],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new yb(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class yb{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return nf.comparator(t.key,e.key)||Gd(t.pr,e.pr)}static Er(t,e){return Gd(t.pr,e.pr)||nf.comparator(t.key,e.key)}}class vb{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new fp(yb.Ir)}checkEmpty(t){return mf.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zm(i,e,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new yb(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return mf.resolve(s)}lookupMutationBatch(t,e){return mf.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),i=r<0?0:r;return mf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return mf.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return mf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new yb(e,0),r=new yb(e,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(t=>{const e=this.Sr(t.pr);i.push(e)})),mf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new fp(Gd);return e.forEach((t=>{const e=new yb(t,0),r=new yb(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,r],(t=>{n=n.add(t.pr)}))})),mf.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;nf.isDocumentKey(i)||(i=i.child(""));const s=new yb(new nf(i),0);let o=new fp(Gd);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.pr)),!0)}),s),mf.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Nd(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return mf.forEach(e.mutations,(r=>{const i=new yb(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new yb(e,0),r=this.wr.firstAfterOrEqual(n);return mf.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,mf.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class bb{constructor(t){this.vr=t,this.docs=new up(nf.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return mf.resolve(n?n.document.mutableCopy():Xp.newInvalidDocument(e))}getEntries(t,e){let n=Yg();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Xp.newInvalidDocument(t))})),mf.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let i=Yg();const s=e.path,o=new nf(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||df(uf(o),n)<=0||(r.has(o.key)||qg(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return mf.resolve(i)}getAllFromCollectionGroup(t,e,n,r){Md()}Fr(t,e){return mf.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new wb(this)}getSize(t){return mf.resolve(this.size)}}class wb extends rb{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)})),mf.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}class _b{constructor(t){this.persistence=t,this.Mr=new Gg((t=>kg(t)),Eg),this.lastRemoteSnapshotVersion=Xd.min(),this.highestTargetId=0,this.Or=0,this.Nr=new mb,this.targetCount=0,this.Lr=Hv.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),mf.resolve()}getLastRemoteSnapshotVersion(t){return mf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return mf.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),mf.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),mf.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Hv(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,mf.resolve()}updateTargetData(t,e){return this.qn(e),mf.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,mf.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),mf.waitFor(i).next((()=>r))}getTargetCount(t){return mf.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return mf.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),mf.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((e=>{i.push(r.markPotentiallyOrphaned(t,e))})),mf.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),mf.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return mf.resolve(n)}containsKey(t,e){return mf.resolve(this.Nr.containsKey(e))}}class xb{constructor(t,e){this.Br={},this.overlays={},this.kr=new Cf(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new _b(this),this.indexManager=new Tv,this.remoteDocumentCache=function(t){return new bb(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Wy(e),this.$r=new pb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new gb,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new vb(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){Td("MemoryPersistence","Starting transaction:",t);const r=new Sb(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((t=>this.referenceDelegate.Wr(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Gr(t,e){return mf.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class Sb extends pf{constructor(t){super(),this.currentSequenceNumber=t}}class kb{constructor(t){this.persistence=t,this.zr=new mb,this.jr=null}static Hr(t){return new kb(t)}get Jr(){if(this.jr)return this.jr;throw Md()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),mf.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),mf.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),mf.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mf.forEach(this.Jr,(n=>{const r=nf.fromPath(n);return this.Yr(t,r).next((t=>{t||e.removeEntry(r,Xd.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return mf.or([()=>mf.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class Eb{constructor(t){this.serializer=t}N(t,e,n,r){const i=new yf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rf,{unique:!0}),t.createObjectStore("documentMutations")}(t),Ib(t),function(t){t.createObjectStore("remoteDocuments")}(t));let s=mf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),Ib(t)),s=s.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xd.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(t,e){return e.store("mutations").W().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rf,{unique:!0});const r=e.store("mutations"),i=n.map((t=>r.put(t)));return mf.waitFor(i)}))}(t,i)))),s=s.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(t,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&r>=12&&(s=s.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:Xf});e.createIndex("collectionPathOverlayIndex",Jf,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",Zf,{unique:!1})}(t)}))),n<13&&r>=13&&(s=s.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:Bf});e.createIndex("documentKeyIndex",jf),e.createIndex("collectionGroupIndex",Uf)}(t))).next((()=>this.ii(t,i))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(t,i)))),n<15&&r>=15&&(s=s.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:Gf}).createIndex("sequenceNumberIndex",Qf,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Yf}).createIndex("documentKeyIndex",$f,{unique:!1})}(t)))),s}ei(t){let e=0;return t.store("remoteDocuments").Y(((t,n)=>{e+=zv(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.W().next((e=>mf.forEach(e,(e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>mf.forEach(n,(n=>{Nd(n.userId===e.userId);const r=Yy(this.serializer,n);return Vv(t,e.userId,r).next((()=>{}))}))))}))))}ti(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const r=[];return n.Y(((n,i)=>{const s=new Zd(n),o=function(t){return[0,Nf(t)]}(s);r.push(e.get(o).next((n=>n?mf.resolve():(n=>e.put({targetId:0,path:Nf(n),sequenceNumber:t.highestListenSequenceNumber}))(s))))})).next((()=>mf.waitFor(r)))}))}ni(t,e){t.createObjectStore("collectionParents",{keyPath:Kf});const n=e.store("collectionParents"),r=new Cv,i=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:Nf(r)})}};return e.store("remoteDocuments").Y({J:!0},((t,e)=>{const n=new Zd(t);return i(n.popLast())})).next((()=>e.store("documentMutations").Y({J:!0},((t,e)=>{let[n,r,s]=t;const o=Lf(r);return i(o.popLast())}))))}ri(t){const e=t.store("targets");return e.Y(((t,n)=>{const r=$y(n),i=Xy(this.serializer,r);return e.put(i)}))}ii(t,e){const n=e.store("remoteDocuments"),r=[];return n.Y(((t,n)=>{const i=e.store("remoteDocumentsV14"),s=function(t){return t.document?new nf(Zd.fromString(t.document.name).popFirst(5)):t.noDocument?nf.fromSegments(t.noDocument.path):t.unknownDocument?nf.fromSegments(t.unknownDocument.path):Md()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>mf.waitFor(r)))}si(t,e){const n=e.store("mutations"),r=sb(this.serializer),i=new xb(kb.Hr,this.serializer.ct);return n.W().next((t=>{const n=new Map;return t.forEach((t=>{var e;let r=null!==(e=n.get(t.userId))&&void 0!==e?e:im();Yy(this.serializer,t).keys().forEach((t=>r=r.add(t))),n.set(t.userId,r)})),mf.forEach(n,((t,n)=>{const s=new Sd(n),o=sv.lt(this.serializer,s),a=i.getIndexManager(s),l=Bv.lt(s,this.serializer,a,i.referenceDelegate);return new fb(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new sp(e,Cf._e),t).next()}))}))}}function Ib(t){t.createObjectStore("targetDocuments",{keyPath:Wf}).createIndex("documentTargetsIndex",Hf,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qf,{unique:!0}),t.createObjectStore("targetGlobal")}const Tb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cb{constructor(t,e,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=t=>Promise.resolve(),!Cb.D())throw new Ld(Od.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eb(this,r),this.Ti=e+"main",this.serializer=new Wy(a),this.Ei=new vf(this.Ti,this.ui,new Eb(this.serializer)),this.Qr=new Kv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sb(this.serializer),this.$r=new nv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Cd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ld(Od.FAILED_PRECONDITION,Tb);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Qr.getHighestSequenceNumber(t)))})).then((t=>{this.kr=new Cf(t,this._i)})).then((()=>{this.qr=!0})).catch((t=>(this.Ei&&this.Ei.close(),Promise.reject(t))))}fi(t){return this.Ii=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.B((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Ab(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(t).next((t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(t))).next((e=>this.isPrimary&&!e?this.yi(t).next((()=>!1)):!!e&&this.wi(t).next((()=>!0)))))).catch((t=>{if(_f(t))return Td("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Td("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.oi.enqueueRetryable((()=>this.Ii(t))),this.isPrimary=t}))}gi(t){return Db(t).get("owner").next((t=>mf.resolve(this.Si(t))))}bi(t){return Ab(t).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=op(t,"clientMetadata");return e.W().next((t=>{const n=this.vi(t,18e5),r=t.filter((t=>-1===n.indexOf(t)));return mf.forEach(r,(t=>e.delete(t.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const e of t)this.di.removeItem(this.Fi(e.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?mf.resolve(!0):Db(t).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new Ld(Od.FAILED_PRECONDITION,Tb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ab(t).W().next((t=>void 0===this.vi(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,r=this.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&Td("IndexedDbPersistence","Client ".concat(t?"is":"is not"," eligible for a primary lease.")),t)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new sp(t,Cf._e);return this.yi(e).next((()=>this.bi(e)))})),this.Ei.close(),this.Li()}vi(t,e){return t.filter((t=>this.Ci(t.updateTimeMs,e)&&!this.Mi(t.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(t=>Ab(t).W().next((t=>this.vi(t,18e5).map((t=>t.clientId))))))}get started(){return this.qr}getMutationQueue(t,e){return Bv.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Av(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return sv.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,n){Td("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",i=function(t){return 15===t?ip:14===t?rp:13===t?np:12===t?ep:11===t?tp:void Md()}(this.ui);let s;return this.Ei.runTransaction(t,r,i,(r=>(s=new sp(r,this.kr?this.kr.next():Cf._e),"readwrite-primary"===e?this.gi(s).next((t=>!!t||this.pi(s))).next((e=>{if(!e)throw Cd("Failed to obtain primary lease for action '".concat(t,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Ld(Od.FAILED_PRECONDITION,ff);return n(s)})).next((t=>this.wi(s).next((()=>t)))):this.ki(s).next((()=>n(s)))))).then((t=>(s.raiseOnCommittedEvent(),t)))}ki(t){return Db(t).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ld(Od.FAILED_PRECONDITION,Tb)}))}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Db(t).put("owner",e)}static D(){return vf.D()}yi(t){const e=Db(t);return e.get("owner").next((t=>this.Si(t)?(Td("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):mf.resolve()))}Ci(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(Cd("Detected an update time that is in the future: ".concat(t," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;Eo()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{const n=null!==(null===(e=this.di)||void 0===e?void 0:e.getItem(this.Fi(t)));return Td("IndexedDbPersistence","Client '".concat(t,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(t){return Cd("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){Cd("Failed to set zombie client id.",t)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(t){}}Fi(t){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(t)}}function Db(t){return op(t,"owner")}function Ab(t){return op(t,"clientMetadata")}function Mb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class Nb{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=im(),r=im();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Nb(t,e.fromCache,n,r)}}class Pb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Ob{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Eo()?8:vf.v(So())>0?6:4}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const i={result:null};return this.ji(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Hi(t,e,r,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new Pb;return this.Ji(t,e,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(t,e,n,r.size)}))})).next((()=>i.result))}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(Id()<=Uo.DEBUG&&Td("QueryEngine","SDK will not create cache indexes for query:",Ug(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),mf.resolve()):(Id()<=Uo.DEBUG&&Td("QueryEngine","Query:",Ug(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Id()<=Uo.DEBUG&&Td("QueryEngine","The SDK decides to create cache indexes for query:",Ug(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Rg(e))):mf.resolve())}ji(t,e){if(Pg(e))return mf.resolve(null);let n=Rg(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=zg(e,null,"F"),n=Rg(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const i=im(...r);return this.zi.getDocuments(t,i).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,r);return this.Xi(e,s,i,n.readTime)?this.ji(t,zg(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,r){return Pg(e)||r.isEqual(Xd.min())?mf.resolve(null):this.zi.getDocuments(t,n).next((i=>{const s=this.Zi(e,i);return this.Xi(e,s,n,r)?mf.resolve(null):(Id()<=Uo.DEBUG&&Td("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ug(e)),this.es(t,s,e,cf(r,-1)).next((t=>t)))}))}Zi(t,e){let n=new fp(Hg(t));return e.forEach(((e,r)=>{qg(t,r)&&(n=n.add(r))})),n}Xi(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(t,e,n){return Id()<=Uo.DEBUG&&Td("QueryEngine","Using full collection scan to execute query:",Ug(e)),this.zi.getDocumentsMatchingQuery(t,e,hf.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class Lb{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new up(Gd),this.rs=new Gg((t=>kg(t)),Eg),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}function Rb(t,e,n,r){return new Lb(t,e,n,r)}async function Fb(t,e){const n=Pd(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((i=>(r=i,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],s=[];let o=im();for(const t of r){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:i,addedBatchIds:s})))}))}))}function Vb(t){const e=Pd(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function zb(t,e,n){let r=im(),i=im();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Yg();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Xd.min())?(e.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),r=r.insert(n,s)):Td("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Bb(t,e){const n=Pd(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function jb(t,e){const n=Pd(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.Qr.getTargetData(t,e).next((i=>i?(r=i,mf.resolve(r)):n.Qr.allocateTargetId(t).next((i=>(r=new qy(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.ns.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}async function Ub(t,e,n){const r=Pd(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!_f(t))throw t;Td("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(t))}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function qb(t,e,n){const r=Pd(t);let i=Xd.min(),s=im();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=Pd(t),i=r.rs.get(n);return void 0!==i?mf.resolve(r.ns.get(i)):r.Qr.getTargetData(e,n)}(r,t,Rg(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>r.ts.getDocumentsMatchingQuery(t,e,n?i:Xd.min(),n?s:im()))).next((t=>(Kb(r,Wg(e),t),{documents:t,hs:s})))))}function Wb(t,e){const n=Pd(t),r=Pd(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(t=>r._t(t,e).next((t=>t?t.target:null))))}function Hb(t,e){const n=Pd(t),r=n.ss.get(e)||Xd.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.os.getAllFromCollectionGroup(t,e,cf(r,-1),Number.MAX_SAFE_INTEGER))).then((t=>(Kb(n,e,t),t)))}function Kb(t,e,n){let r=t.ss.get(e)||Xd.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.ss.set(e,r)}async function Gb(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:im();const r=await jb(t,Rg(Jy(e.bundledQuery))),i=Pd(t);return i.persistence.runTransaction("Save named query","readwrite",(t=>{const s=yy(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(t,e);const o=r.withResumeToken(vp.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(t,o).next((()=>i.Qr.removeMatchingKeysForTargetId(t,r.targetId))).next((()=>i.Qr.addMatchingKeys(t,n,r.targetId))).next((()=>i.$r.saveNamedQuery(t,e)))}))}function Qb(t,e){return"firestore_clients_".concat(t,"_").concat(e)}function Yb(t,e,n){let r="firestore_mutations_".concat(t,"_").concat(n);return e.isAuthenticated()&&(r+="_".concat(e.uid)),r}function $b(t,e){return"firestore_targets_".concat(t,"_").concat(e)}class Xb{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Es(t,e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ld(r.error.code,r.error.message))),s?new Xb(t,e,r.state,i):(Cd("SharedClientState","Failed to parse mutation state for ID '".concat(e,"': ").concat(n)),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Jb{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Es(t,e){const n=JSON.parse(e);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ld(n.error.code,n.error.message))),i?new Jb(t,n.state,r):(Cd("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(e)),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Zb{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=om();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Mf(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Zb(t,i):(Cd("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(e)),null)}}class tw{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new tw(e.clientId,e.onlineState):(Cd("SharedClientState","Failed to parse online state: ".concat(t)),null)}}class ew{constructor(){this.activeTargetIds=om()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class nw{constructor(t,e,n,r,i){this.window=t,this.oi=e,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new up(Gd),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Qb(this.persistenceKey,this.Vs),this.Ss=function(t){return"firestore_sequence_number_".concat(t)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new ew),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(t){return"firestore_online_state_".concat(t)}(this.persistenceKey),this.Fs=function(t){return"firestore_bundle_loaded_v2_".concat(t)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Bi();for(const n of t){if(n===this.Vs)continue;const t=this.getItem(Qb(this.persistenceKey,n));if(t){const e=Zb.Es(n,t);e&&(this.ps=this.ps.insert(e.clientId,e))}}this.Ms();const e=this.storage.getItem(this.vs);if(e){const t=this.xs(e);t&&this.Os(t)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Ls(t,"pending")}updateMutationState(t,e,n){this.Ls(t,e,n),this.Bs(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem($b(this.persistenceKey,t));if(n){const r=Jb.Es(t,n);r&&(e=r.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($b(this.persistenceKey,t))}updateQueryState(t,e,n){this.qs(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.Bs(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Td("SharedClientState","READ",t,e),e}setItem(t,e){Td("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Td("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){const e=t;if(e.storageArea===this.storage){if(Td("SharedClientState","EVENT",e.key,e.newValue),e.key===this.ws)return void Cd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.bs.test(e.key)){if(null==e.newValue){const t=this.$s(e.key);return this.Us(t,null)}{const t=this.Ws(e.key,e.newValue);if(t)return this.Us(t.clientId,t)}}else if(this.Ds.test(e.key)){if(null!==e.newValue){const t=this.Gs(e.key,e.newValue);if(t)return this.zs(t)}}else if(this.Cs.test(e.key)){if(null!==e.newValue){const t=this.js(e.key,e.newValue);if(t)return this.Hs(t)}}else if(e.key===this.vs){if(null!==e.newValue){const t=this.xs(e.newValue);if(t)return this.Os(t)}}else if(e.key===this.Ss){const t=function(t){let e=Cf._e;if(null!=t)try{const n=JSON.parse(t);Nd("number"==typeof n),e=n}catch(t){Cd("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==Cf._e&&this.sequenceNumberHandler(t)}else if(e.key===this.Fs){const t=this.Js(e.newValue);await Promise.all(t.map((t=>this.syncEngine.Ys(t))))}}else this.ys.push(e)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(t,e,n){const r=new Xb(this.currentUser,t,e,n),i=Yb(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ds())}Bs(t){const e=Yb(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){const e={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(e))}qs(t,e,n){const r=$b(this.persistenceKey,t),i=new Jb(t,e,n);this.setItem(r,i.ds())}Ks(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){const e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){const n=this.$s(t);return Zb.Es(n,e)}Gs(t,e){const n=this.Ds.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xb.Es(new Sd(i),r,e)}js(t,e){const n=this.Cs.exec(t),r=Number(n[1]);return Jb.Es(r,e)}xs(t){return tw.Es(t)}Js(t){return JSON.parse(t)}async zs(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);Td("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid))}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){const n=e?this.ps.insert(t,e):this.ps.remove(t),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((t=>{r.has(t)||s.push(t)})),r.forEach((t=>{i.has(t)||o.push(t)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=om();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class rw{constructor(){this.no=new ew,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new ew,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class iw{io(t){}shutdown(){}}class sw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Td("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Td("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ow=null;function aw(){return null===ow?ow=268435456+Math.round(2147483648*Math.random()):ow++,"0x"+ow.toString(16)}const lw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cw{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}const uw="WebChannelConnection";class hw extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(t,e,n,r,i){const s=aw(),o=this.bo(t,e.toUriEncodedString());Td("RestConnection","Sending RPC '".concat(t,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(t,o,a,n).then((e=>(Td("RestConnection","Received RPC '".concat(t,"' ").concat(s,": "),e),e)),(e=>{throw Dd("RestConnection","RPC '".concat(t,"' ").concat(s," failed with error: "),e,"url: ",o,"request:",n),e}))}vo(t,e,n,r,i,s){return this.So(t,e,n,r,i)}Do(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+kd,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=lw[t];return"".concat(this.fo,"/v1/").concat(e,":").concat(n)}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,r){const i=aw();return new Promise(((s,o)=>{const a=new bd;a.setWithCredentials(!0),a.listenOnce(gd.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case pd.NO_ERROR:const e=a.getResponseJson();Td(uw,"XHR for RPC '".concat(t,"' ").concat(i," received:"),JSON.stringify(e)),s(e);break;case pd.TIMEOUT:Td(uw,"RPC '".concat(t,"' ").concat(i," timed out")),o(new Ld(Od.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const n=a.getStatus();if(Td(uw,"RPC '".concat(t,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Od).indexOf(e)>=0?e:Od.UNKNOWN}(e.status);o(new Ld(t,e.message))}else o(new Ld(Od.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ld(Od.UNAVAILABLE,"Connection failed."));break;default:Md()}}finally{Td(uw,"RPC '".concat(t,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Td(uw,"RPC '".concat(t,"' ").concat(i," sending request:"),r),a.send(e,"POST",l,n,15)}))}Fo(t,e,n){const r=aw(),i=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=dd(),o=fd(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Td(uw,"Creating RPC '".concat(t,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new cw({lo:e=>{d?Td(uw,"Not sending because RPC '".concat(t,"' stream ").concat(r," is closed:"),e):(h||(Td(uw,"Opening RPC '".concat(t,"' stream ").concat(r," transport.")),u.open(),h=!0),Td(uw,"RPC '".concat(t,"' stream ").concat(r," sending:"),e),u.send(e))},ho:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(u,vd.EventType.OPEN,(()=>{d||Td(uw,"RPC '".concat(t,"' stream ").concat(r," transport opened."))})),p(u,vd.EventType.CLOSE,(()=>{d||(d=!0,Td(uw,"RPC '".concat(t,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,vd.EventType.ERROR,(e=>{d||(d=!0,Dd(uw,"RPC '".concat(t,"' stream ").concat(r," transport errored:"),e),f.Vo(new Ld(Od.UNAVAILABLE,"The operation could not be completed")))})),p(u,vd.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];Nd(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Td(uw,"RPC '".concat(t,"' stream ").concat(r," received error:"),o);const e=o.status;let n=function(t){const e=qm[t];if(void 0!==e)return Km(e)}(e),i=o.message;void 0===n&&(n=Od.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,f.Vo(new Ld(n,i)),u.close()}else Td(uw,"RPC '".concat(t,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,md.STAT_EVENT,(e=>{e.stat===yd.PROXY?Td(uw,"RPC '".concat(t,"' stream ").concat(r," detected buffering proxy")):e.stat===yd.NOPROXY&&Td(uw,"RPC '".concat(t,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function dw(){return"undefined"!=typeof window?window:null}function fw(){return"undefined"!=typeof document?document:null}function pw(t){return new dy(t,!0)}class gw{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=t,this.timerId=e,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,e-n);r>0&&Td("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(e," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class mw{constructor(t,e,n,r,i,s,o,a){this.oi=t,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new gw(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===Od.RESOURCE_EXHAUSTED?(Cd(e.toString()),Cd("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===Od.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((t=>{let[n,r]=t;this.Wo===e&&this.o_(n,r)}),(e=>{t((()=>{const t=new Ld(Od.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return Td("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(Td("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yw extends mw{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Md()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(Nd(void 0===e||"string"==typeof e),vp.fromBase64String(e||"")):(Nd(void 0===e||e instanceof Uint8Array),vp.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Od.UNKNOWN:Km(t.code);return new Ld(e,t.message||"")}(o);n=new iy(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=xy(t,r.document.name),s=yy(r.document.updateTime),o=r.document.createTime?yy(r.document.createTime):Xd.min(),a=new Yp({mapValue:{fields:r.document.fields}}),l=Xp.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ny(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=xy(t,r.document),s=r.readTime?yy(r.readTime):Xd.min(),o=Xp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ny([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=xy(t,r.document),s=r.removedTargetIds||[];n=new ny([],s,i,null)}else{if(!("filter"in e))return Md();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:i}=t,s=new Um(r,i),o=t.targetId;n=new ry(o,s)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Xd.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Xd.min():e.readTime?yy(e.readTime):Xd.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=Ey(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Ig(r)?{documents:My(t,r)}:{query:Ny(t,r).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=gy(t,e.resumeToken);const r=fy(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(Xd.min())>0){n.readTime=py(t,e.snapshotVersion.toTimestamp());const r=fy(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Md()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=Ey(this.serializer),e.removeTarget=t,this.t_(e)}}class vw extends mw{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(Nd(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=function(t,e){return t&&t.length>0?(Nd(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?yy(t.updateTime):yy(e);return n.isEqual(Xd.min())&&(n=yy(e)),new Sm(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=yy(t.commitTime);return this.listener.T_(n,e)}return Nd(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=Ey(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>Dy(this.serializer,t)))};this.t_(e)}}class bw extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Ld(Od.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(t,by(e,n),r,s,o)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Od.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ld(Od.UNKNOWN,t.toString())}))}vo(t,e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(t,by(e,n),r,o,a,i)})).catch((t=>{throw"FirebaseError"===t.name?(t.code===Od.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Ld(Od.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class ww{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Cd(e),this.g_=!1):Td("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class _w{constructor(t,e,n,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((t=>{n.enqueueAndForget((async()=>{Aw(this)&&(Td("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Pd(t);e.v_.add(4),await Sw(e),e.x_.set("Unknown"),e.v_.delete(4),await xw(e)}(this))}))})),this.x_=new ww(n,r)}}async function xw(t){if(Aw(t))for(const e of t.F_)await e(!0)}async function Sw(t){for(const e of t.F_)await e(!1)}function kw(t,e){const n=Pd(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Dw(n)?Cw(n):Qw(n).Jo()&&Iw(n,e))}function Ew(t,e){const n=Pd(t),r=Qw(n);n.C_.delete(e),r.Jo()&&Tw(n,e),0===n.C_.size&&(r.Jo()?r.Xo():Aw(n)&&n.x_.set("Unknown"))}function Iw(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xd.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qw(t).c_(e)}function Tw(t,e){t.O_.Oe(e),Qw(t).l_(e)}function Cw(t){t.O_=new oy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Qw(t).start(),t.x_.p_()}function Dw(t){return Aw(t)&&!Qw(t).Ho()&&t.C_.size>0}function Aw(t){return 0===Pd(t).v_.size}function Mw(t){t.O_=void 0}async function Nw(t){t.C_.forEach(((e,n)=>{Iw(t,e)}))}async function Pw(t,e){Mw(t),Dw(t)?(t.x_.S_(e),Cw(t)):t.x_.set("Unknown")}async function Ow(t,e,n){if(t.x_.set("Online"),e instanceof iy&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.C_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.C_.delete(r),t.O_.removeTarget(r))}(t,e)}catch(n){Td("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Lw(t,n)}else if(e instanceof ny?t.O_.$e(e):e instanceof ry?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Xd.min()))try{const e=await Vb(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.C_.get(r);i&&t.C_.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.C_.get(e);if(!r)return;t.C_.set(e,r.withResumeToken(vp.EMPTY_BYTE_STRING,r.snapshotVersion)),Tw(t,e);const i=new qy(r.target,e,n,r.sequenceNumber);Iw(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Td("RemoteStore","Failed to raise snapshot:",e),await Lw(t,e)}}async function Lw(t,e,n){if(!_f(e))throw e;t.v_.add(1),await Sw(t),t.x_.set("Offline"),n||(n=()=>Vb(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Td("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await xw(t)}))}function Rw(t,e){return e().catch((n=>Lw(t,n,e)))}async function Fw(t){const e=Pd(t),n=Yw(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Vw(e);)try{const t=await Bb(e.localStore,r);if(null===t){0===e.D_.length&&n.Xo();break}r=t.batchId,zw(e,t)}catch(t){await Lw(e,t)}Bw(e)&&jw(e)}function Vw(t){return Aw(t)&&t.D_.length<10}function zw(t,e){t.D_.push(e);const n=Yw(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Bw(t){return Aw(t)&&!Yw(t).Ho()&&t.D_.length>0}function jw(t){Yw(t).start()}async function Uw(t){Yw(t).d_()}async function qw(t){const e=Yw(t);for(const n of t.D_)e.I_(n.mutations)}async function Ww(t,e,n){const r=t.D_.shift(),i=Bm.from(r,e,n);await Rw(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Fw(t)}async function Hw(t,e){e&&Yw(t).P_&&await async function(t,e){if(function(t){return Hm(t)&&t!==Od.ABORTED}(e.code)){const n=t.D_.shift();Yw(t).Zo(),await Rw(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Fw(t)}}(t,e),Bw(t)&&jw(t)}async function Kw(t,e){const n=Pd(t);n.asyncQueue.verifyOperationInProgress(),Td("RemoteStore","RemoteStore received new credentials");const r=Aw(n);n.v_.add(3),await Sw(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await xw(n)}async function Gw(t,e){const n=Pd(t);e?(n.v_.delete(2),await xw(n)):e||(n.v_.add(2),await Sw(n),n.x_.set("Unknown"))}function Qw(t){return t.N_||(t.N_=function(t,e,n){const r=Pd(t);return r.R_(),new yw(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Po:Nw.bind(null,t),To:Pw.bind(null,t),u_:Ow.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),Dw(t)?Cw(t):t.x_.set("Unknown")):(await t.N_.stop(),Mw(t))}))),t.N_}function Yw(t){return t.L_||(t.L_=function(t,e,n){const r=Pd(t);return r.R_(),new vw(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{Po:Uw.bind(null,t),To:Hw.bind(null,t),E_:qw.bind(null,t),T_:Ww.bind(null,t)}),t.F_.push((async e=>{e?(t.L_.Zo(),await Fw(t)):(await t.L_.stop(),t.D_.length>0&&(Td("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]))}))),t.L_}class $w{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Rd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new $w(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ld(Od.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xw(t,e){if(Cd("AsyncQueue","".concat(e,": ").concat(t)),_f(t))return new Ld(Od.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}class Jw{constructor(t){this.comparator=t?(e,n)=>t(e,n)||nf.comparator(e.key,n.key):(t,e)=>nf.comparator(t.key,e.key),this.keyedMap=Xg(),this.sortedSet=new up(this.comparator)}static emptySet(t){return new Jw(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Jw))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Jw;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class Zw{constructor(){this.B_=new up(nf.comparator)}track(t){const e=t.doc.key,n=this.B_.get(e);n?0!==t.type&&3===n.type?this.B_=this.B_.insert(e,t):3===t.type&&1!==n.type?this.B_=this.B_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.B_=this.B_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.B_=this.B_.remove(e):1===t.type&&2===n.type?this.B_=this.B_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):Md():this.B_=this.B_.insert(e,t)}k_(){const t=[];return this.B_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class t_{constructor(t,e,n,r,i,s,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,r,i){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new t_(t,e,Jw.emptySet(e),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Bg(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class e_{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((t=>t.U_()))}}class n_{constructor(){this.queries=new Gg((t=>jg(t)),Bg),this.onlineState="Unknown",this.W_=new Set}}async function r_(t,e){const n=Pd(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new e_,r=e.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(t){const n=Xw(t,"Initialization of query '".concat(Ug(e.query),"' failed"));return void e.onError(n)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&a_(n)}async function i_(t,e){const n=Pd(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),0===s.Q_.length?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function s_(t,e){const n=Pd(t);let r=!1;for(const i of e){const t=i.query,e=n.queries.get(t);if(e){for(const t of e.Q_)t.z_(i)&&(r=!0);e.q_=i}}r&&a_(n)}function o_(t,e,n){const r=Pd(t),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(e)}function a_(t){t.W_.forEach((t=>{t.next()}))}var l_,c_;(c_=l_||(l_={})).j_="default",c_.Cache="cache";class u_{constructor(t,e,n){this.query=t,this.H_=e,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new t_(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),e=!0):this.X_(t,this.onlineState)&&(this.ea(t),e=!0),this.Y_=t,e}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let e=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),e=!0),e}X_(t,e){if(!t.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==e;return(!this.options.ta||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Z_(t){if(t.docChanges.length>0)return!0;const e=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}ea(t){t=t_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==l_.Cache}}class h_{constructor(t,e){this.na=t,this.byteLength=e}ra(){return"metadata"in this.na}}class d_{constructor(t){this.serializer=t}Ps(t){return xy(this.serializer,t)}Is(t){return t.metadata.exists?Cy(this.serializer,t.document,!1):Xp.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return yy(t)}}class f_{constructor(t,e,n){this.ia=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=p_(t)}sa(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.na.namedQuery)this.queries.push(t.na.namedQuery);else if(t.na.documentMetadata){this.documents.push({metadata:t.na.documentMetadata}),t.na.documentMetadata.exists||++e;const n=Zd.fromString(t.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.na.document&&(this.documents[this.documents.length-1].document=t.na.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}oa(t){const e=new Map,n=new d_(this.serializer);for(const r of t)if(r.metadata.queries){const t=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||im()).add(t);e.set(n,r)}}return e}async complete(){const t=await async function(t,e,n,r){const i=Pd(t);let s=im(),o=Yg();for(const c of n){const t=e.Ps(c.metadata.name);c.document&&(s=s.add(t));const n=e.Is(c);n.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(t,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await jb(i,function(t){return Rg(Ng(Zd.fromString("__bundle__/docs/".concat(t))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(t=>zb(t,a,o).next((e=>(a.apply(t),e))).next((e=>i.Qr.removeMatchingKeysForTargetId(t,l.targetId).next((()=>i.Qr.addMatchingKeys(t,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(t,e.cs,e.ls))).next((()=>e.cs))))))}(this.localStore,new d_(this.serializer),this.documents,this.ia.id),e=this.oa(this.documents);for(const n of this.queries)await Gb(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:t}}}function p_(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class g_{constructor(t){this.key=t}}class m_{constructor(t){this.key=t}}class y_{constructor(t,e){this.query=t,this.ua=e,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=im(),this.mutatedKeys=im(),this.ha=Hg(t),this.Pa=new Jw(this.ha)}get Ia(){return this.ua}Ta(t,e){const n=e?e.Ea:new Zw,r=e?e.Pa:this.Pa;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const c=r.get(t),u=qg(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||l&&this.ha(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const i=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const s=t.Ea.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Md()}};return n(t)-n(e)}(t.type,e.type)||this.ha(t.doc,e.doc))),this.Aa(n),r=null!=r&&r;const o=e&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,l=a!==this.ca;return this.ca=a,0!==s.length||l?{snapshot:new t_(this.query,t.Pa,i,s,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Zw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach((t=>this.ua=this.ua.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.ua=this.ua.delete(t))),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=im(),this.Pa.forEach((t=>{this.ma(t.key)&&(this.la=this.la.add(t.key))}));const e=[];return t.forEach((t=>{this.la.has(t)||e.push(new m_(t))})),this.la.forEach((n=>{t.has(n)||e.push(new g_(n))})),e}fa(t){this.ua=t.hs,this.la=im();const e=this.Ta(t.documents);return this.applyChanges(e,!0)}ga(){return t_.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class v_{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class b_{constructor(t){this.key=t,this.pa=!1}}class w_{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new Gg((t=>jg(t)),Bg),this.Sa=new Map,this.ba=new Set,this.Da=new up(nf.comparator),this.Ca=new Map,this.va=new mb,this.Fa={},this.Ma=new Map,this.xa=Hv.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function __(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=$_(t);let i;const s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await S_(r,e,n,!0),i}async function x_(t,e){const n=$_(t);await S_(n,e,!0,!1)}async function S_(t,e,n,r){const i=await jb(t.localStore,Rg(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await k_(t,e,s,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&kw(t.remoteStore,i),a}async function k_(t,e,n,r,i){t.Na=(e,n,r)=>async function(t,e,n,r){let i=e.view.Ta(n);i.Xi&&(i=await qb(t.localStore,e.query,!1).then((t=>{let{documents:n}=t;return e.view.Ta(n,i)})));const s=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,s,o);return R_(t,e.targetId,a.Va),a.snapshot}(t,e,n,r);const s=await qb(t.localStore,e,!0),o=new y_(e,s.hs),a=o.Ta(s.documents),l=ey.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,l);R_(t,n,c.Va);const u=new v_(e,n,o);return t.wa.set(e,u),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function E_(t,e,n){const r=Pd(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((t=>!Bg(t,e)))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ub(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ew(r.remoteStore,i.targetId),O_(r,i.targetId)})).catch(gf)):(O_(r,i.targetId),await Ub(r.localStore,i.targetId,!0))}async function I_(t,e){const n=Pd(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ew(n.remoteStore,r.targetId))}async function T_(t,e){const n=Pd(t);try{const t=await function(t,e){const n=Pd(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(vp.EMPTY_BYTE_STRING,Xd.min()).withLastLimboFreeSnapshotVersion(Xd.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(t,c))}));let a=Yg(),l=im();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(zb(t,s,e.documentUpdates).next((t=>{a=t.cs,l=t.ls}))),!r.isEqual(Xd.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return mf.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(n.ns=i,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.Ca.get(e);r&&(Nd(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.pa=!0:t.modifiedDocuments.size>0?Nd(r.pa):t.removedDocuments.size>0&&(Nd(r.pa),r.pa=!1))})),await z_(n,t,e)}catch(t){await gf(t)}}function C_(t,e,n){const r=Pd(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=Pd(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const i of n.Q_)i.G_(e)&&(r=!0)})),r&&a_(n)}(r.eventManager,e),t.length&&r.ya.u_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D_(t,e,n){const r=Pd(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ca.get(e),s=i&&i.key;if(s){let t=new up(nf.comparator);t=t.insert(s,Xp.newNoDocument(s,Xd.min()));const n=im().add(s),i=new ty(Xd.min(),new Map,new up(Gd),t,n);await T_(r,i),r.Da=r.Da.remove(s),r.Ca.delete(e),V_(r)}else await Ub(r.localStore,e,!1).then((()=>O_(r,e,n))).catch(gf)}async function A_(t,e){const n=Pd(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Pd(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=mf.resolve();return s.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);Nd(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=im();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);P_(n,r,null),N_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await z_(n,t)}catch(t){await gf(t)}}async function M_(t,e,n){const r=Pd(t);try{const t=await function(t,e){const n=Pd(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Nd(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);P_(r,e,n),N_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await z_(r,t)}catch(n){await gf(n)}}function N_(t,e){(t.Ma.get(e)||[]).forEach((t=>{t.resolve()})),t.Ma.delete(e)}function P_(t,e,n){const r=Pd(t);let i=r.Fa[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function O_(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach((e=>{t.va.containsKey(e)||L_(t,e)}))}function L_(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);null!==n&&(Ew(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),V_(t))}function R_(t,e,n){for(const r of n)r instanceof g_?(t.va.addReference(r.key,e),F_(t,r)):r instanceof m_?(Td("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||L_(t,r.key)):Md()}function F_(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(Td("SyncEngine","New document in limbo: "+n),t.ba.add(r),V_(t))}function V_(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new nf(Zd.fromString(e)),r=t.xa.next();t.Ca.set(r,new b_(n)),t.Da=t.Da.insert(n,r),kw(t.remoteStore,new qy(Rg(Ng(n.path)),r,"TargetPurposeLimboResolution",Cf._e))}}async function z_(t,e,n){const r=Pd(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((t,a)=>{o.push(r.Na(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){i.push(t);const e=Nb.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),r.ya.u_(i),await async function(t,e){const n=Pd(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>mf.forEach(e,(e=>mf.forEach(e.qi,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>mf.forEach(e.Qi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!_f(t))throw t;Td("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.ns.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(t,i)}}}(r.localStore,s))}async function B_(t,e){const n=Pd(t);if(!n.currentUser.isEqual(e)){Td("SyncEngine","User change. New user:",e.toKey());const t=await Fb(n.localStore,e);n.currentUser=e,function(t,e){t.Ma.forEach((t=>{t.forEach((t=>{t.reject(new Ld(Od.CANCELLED,e))}))})),t.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await z_(n,t.us)}}function j_(t,e){const n=Pd(t),r=n.Ca.get(e);if(r&&r.pa)return im().add(r.key);{let t=im();const r=n.Sa.get(e);if(!r)return t;for(const e of r){const r=n.wa.get(e);t=t.unionWith(r.view.Ia)}return t}}async function U_(t,e){const n=Pd(t),r=await qb(n.localStore,e.query,!0),i=e.view.fa(r);return n.isPrimaryClient&&R_(n,e.targetId,i.Va),i}async function q_(t,e){const n=Pd(t);return Hb(n.localStore,e).then((t=>z_(n,t)))}async function W_(t,e,n,r){const i=Pd(t),s=await function(t,e){const n=Pd(t),r=Pd(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>r.vn(t,e).next((e=>e?n.localDocuments.getDocuments(t,e):mf.resolve(null)))))}(i.localStore,e);null!==s?("pending"===n?await Fw(i.remoteStore):"acknowledged"===n||"rejected"===n?(P_(i,e,r||null),N_(i,e),function(t,e){Pd(Pd(t).mutationQueue).Mn(e)}(i.localStore,e)):Md(),await z_(i,s)):Td("SyncEngine","Cannot apply mutation batch with id: "+e)}async function H_(t,e,n){const r=Pd(t),i=[],s=[];for(const o of e){let t;const e=r.Sa.get(o);if(e&&0!==e.length){t=await jb(r.localStore,Rg(e[0]));for(const t of e){const e=r.wa.get(t),n=await U_(r,e);n.snapshot&&s.push(n.snapshot)}}else{const e=await Wb(r.localStore,o);t=await jb(r.localStore,e),await k_(r,K_(e),o,!1,t.resumeToken)}i.push(t)}return r.ya.u_(s),i}function K_(t){return Mg(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function G_(t){return function(t){return Pd(Pd(t).persistence).Bi()}(Pd(t).localStore)}async function Q_(t,e,n,r){const i=Pd(t);if(i.Oa)return void Td("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=await Hb(i.localStore,Wg(s[0])),r=ty.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,vp.EMPTY_BYTE_STRING);await z_(i,t,r);break}case"rejected":await Ub(i.localStore,e,!0),O_(i,e,r);break;default:Md()}}async function Y_(t,e,n){const r=$_(t);if(r.Oa){for(const t of e){if(r.Sa.has(t)&&r.sharedClientState.isActiveQueryTarget(t)){Td("SyncEngine","Adding an already active target "+t);continue}const e=await Wb(r.localStore,t),n=await jb(r.localStore,e);await k_(r,K_(e),n.targetId,!1,n.resumeToken),kw(r.remoteStore,n)}for(const t of n)r.Sa.has(t)&&await Ub(r.localStore,t,!1).then((()=>{Ew(r.remoteStore,t),O_(r,t)})).catch(gf)}}function $_(t){const e=Pd(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D_.bind(null,e),e.ya.u_=s_.bind(null,e.eventManager),e.ya.La=o_.bind(null,e.eventManager),e}function X_(t){const e=Pd(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=A_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M_.bind(null,e),e}class J_{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=pw(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Rb(this.persistence,new Ob,t.initialUser,this.serializer)}createPersistence(t){return new xb(kb.Hr,this.serializer)}createSharedClientState(t){return new rw}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Z_ extends J_{constructor(t,e,n){super(),this.ka=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ka.initialize(this,t),await X_(this.ka.syncEngine),await Fw(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(t){return Rb(this.persistence,new Ob,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new Jv(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const n=new Tf(e,this.persistence);return new If(t.asyncQueue,n)}createPersistence(t){const e=Mb(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fv.withCacheSize(this.cacheSizeBytes):Fv.DEFAULT;return new Cb(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,dw(),fw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new rw}}class tx extends Z_{constructor(t,e){super(t,e,!1),this.ka=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.ka.syncEngine;this.sharedClientState instanceof nw&&(this.sharedClientState.syncEngine={Zs:W_.bind(null,e),Xs:Q_.bind(null,e),eo:Y_.bind(null,e),Bi:G_.bind(null,e),Ys:q_.bind(null,e)},await this.sharedClientState.start()),await this.persistence.fi((async t=>{await async function(t,e){const n=Pd(t);if($_(n),X_(n),!0===e&&!0!==n.Oa){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await H_(n,t.toArray());n.Oa=!0,await Gw(n.remoteStore,!0);for(const r of e)kw(n.remoteStore,r)}else if(!1===e&&!1!==n.Oa){const t=[];let e=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?t.push(i):e=e.then((()=>(O_(n,i),Ub(n.localStore,i,!0)))),Ew(n.remoteStore,i)})),await e,await H_(n,t),function(t){const e=Pd(t);e.Ca.forEach(((t,n)=>{Ew(e.remoteStore,n)})),e.va.mr(),e.Ca=new Map,e.Da=new up(nf.comparator)}(n),n.Oa=!1,await Gw(n.remoteStore,!1)}}(this.ka.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start():t||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(t&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():t||this.indexBackfillerScheduler.stop())}))}createSharedClientState(t){const e=dw();if(!nw.D(e))throw new Ld(Od.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Mb(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new nw(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class ex{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>C_(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=B_.bind(null,this.syncEngine),await Gw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new n_}createDatastore(t){const e=pw(t.databaseInfo.databaseId),n=function(t){return new hw(t)}(t.databaseInfo);return function(t,e,n,r){return new bw(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,i){return new _w(t,e,n,r,i)}(this.localStore,this.datastore,t.asyncQueue,(t=>C_(this.syncEngine,t,0)),sw.D()?new sw:new iw)}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new w_(t,e,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=Pd(t);Td("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await Sw(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}function nx(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class rx{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Cd("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class ix{constructor(t,e){this.Ka=t,this.serializer=e,this.metadata=new Rd,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((t=>{t&&t.ra()?this.metadata.resolve(t.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==t?void 0:t.na))))}),(t=>this.metadata.reject(t)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const t=await this.Wa();if(null===t)return null;const e=this.$a.decode(t),n=Number(e);isNaN(n)&&this.Ga("length string (".concat(e,") is not valid number"));const r=await this.za(n);return new h_(JSON.parse(r),t.length+n)}ja(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const t=this.ja();t<0&&this.Ga("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async za(t){for(;this.buffer.length<t;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const e=this.$a.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}Ga(t){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(t))}async Ha(){const t=await this.Ka.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}class sx{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ld(Od.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(t,e){const n=Pd(t),r={documents:e.map((t=>_y(n.serializer,t)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,Zd.emptyPath(),r,e.length),s=new Map;i.forEach((t=>{const e=function(t,e){return"found"in e?function(t,e){Nd(!!e.found),e.found.name,e.found.updateTime;const n=xy(t,e.found.name),r=yy(e.found.updateTime),i=e.found.createTime?yy(e.found.createTime):Xd.min(),s=new Yp({mapValue:{fields:e.found.fields}});return Xp.newFoundDocument(n,r,i,s)}(t,e):"missing"in e?function(t,e){Nd(!!e.missing),Nd(!!e.readTime);const n=xy(t,e.missing),r=yy(e.readTime);return Xp.newNoDocument(n,r)}(t,e):Md()}(n.serializer,t);s.set(e.key.toString(),e)}));const o=[];return e.forEach((t=>{const e=s.get(t.toString());Nd(!!e),o.push(e)})),o}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastTransactionError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new Fm(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=nf.fromPath(e);this.mutations.push(new Vm(n,this.precondition(n)))})),await async function(t,e){const n=Pd(t),r={writes:e.map((t=>Dy(n.serializer,t)))};await n.So("Commit",n.serializer.databaseId,Zd.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Md();e=Xd.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ld(Od.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Xd.min())?km.exists(!1):km.updateTime(e):km.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Xd.min()))throw new Ld(Od.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return km.updateTime(e)}return km.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class ox{constructor(t,e,n,r,i){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new gw(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const t=new sx(this.datastore),e=this.Xa(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.eu(t)}))))})).catch((t=>{this.eu(t)}))}))}Xa(t){try{const e=this.updateFunction(t);return!Df(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}eu(t){this.Ja>0&&this.tu(t)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(t)}tu(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Hm(e)}return!1}}class ax{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Sd.UNAUTHENTICATED,this.clientId=Kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Td("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Td("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ld(Od.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Rd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Xw(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function lx(t,e){t.asyncQueue.verifyOperationInProgress(),Td("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await Fb(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function cx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hx(t);Td("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Kw(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Kw(e.remoteStore,n))),t._onlineComponents=e}function ux(t){return"FirebaseError"===t.name?t.code===Od.FAILED_PRECONDITION||t.code===Od.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function hx(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Td("FirestoreClient","Using user provided OfflineComponentProvider");try{await lx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!ux(n))throw n;Dd("Error using user provided cache. Falling back to memory cache: "+n),await lx(t,new J_)}}else Td("FirestoreClient","Using default OfflineComponentProvider"),await lx(t,new J_);return t._offlineComponents}async function dx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Td("FirestoreClient","Using user provided OnlineComponentProvider"),await cx(t,t._uninitializedComponentsProvider._online)):(Td("FirestoreClient","Using default OnlineComponentProvider"),await cx(t,new ex))),t._onlineComponents}function fx(t){return hx(t).then((t=>t.persistence))}function px(t){return hx(t).then((t=>t.localStore))}function gx(t){return dx(t).then((t=>t.remoteStore))}function mx(t){return dx(t).then((t=>t.syncEngine))}function yx(t){return dx(t).then((t=>t.datastore))}async function vx(t){const e=await dx(t),n=e.eventManager;return n.onListen=__.bind(null,e.syncEngine),n.onUnlisten=E_.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x_.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I_.bind(null,e.syncEngine),n}function bx(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Rd;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new rx({next:s=>{e.enqueueAndForget((()=>i_(t,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Ld(Od.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Ld(Od.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new u_(Ng(n.path),s,{includeMetadataChanges:!0,ta:!0});return r_(t,o)}(await vx(t),t.asyncQueue,e,n,r))),r.promise}function wx(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Rd;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,i){const s=new rx({next:n=>{e.enqueueAndForget((()=>i_(t,o))),n.fromCache&&"server"===r.source?i.reject(new Ld(Od.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new u_(n,s,{includeMetadataChanges:!0,ta:!0});return r_(t,o)}(await vx(t),t.asyncQueue,e,n,r))),r.promise}function _x(t,e,n,r){const i=function(t,e){let n;return n="string"==typeof t?Qm().encode(t):t,function(t,e){return new ix(t,e)}(function(t,e){if(t instanceof Uint8Array)return nx(t,e);if(t instanceof ArrayBuffer)return nx(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,pw(e));t.asyncQueue.enqueueAndForget((async()=>{!function(t,e,n){const r=Pd(t);(async function(t,e,n){try{const r=await e.getMetadata();if(await function(t,e){const n=Pd(t),r=yy(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.$r.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(r)>=0))}(t.localStore,r))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(p_(r));const i=new f_(r,t.localStore,e.serializer);let s=await e.Ba();for(;s;){const t=await i.sa(s);t&&n._updateProgress(t),s=await e.Ba()}const o=await i.complete();return await z_(t,o.aa,void 0),await function(t,e){const n=Pd(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.$r.saveBundleMetadata(t,e)))}(t.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(t){return Dd("SyncEngine","Loading bundle failed with ".concat(t)),n._failWith(t),Promise.resolve(new Set)}})(r,e,n).then((t=>{r.sharedClientState.notifyBundleLoaded(t)}))}(await mx(t),i,r)}))}function xx(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Sx=new Map;function kx(t,e,n){if(!n)throw new Ld(Od.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Ex(t,e,n,r){if(!0===e&&!0===r)throw new Ld(Od.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}function Ix(t){if(!nf.isDocumentKey(t))throw new Ld(Od.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function Tx(t){if(nf.isDocumentKey(t))throw new Ld(Od.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function Cx(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return"function"==typeof t?"a function":Md()}function Dx(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ld(Od.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cx(t);throw new Ld(Od.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}function Ax(t,e){if(e<=0)throw new Ld(Od.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(e,"."))}class Mx{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Ld(Od.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ld(Od.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ex("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xx(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Ld(Od.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (must not be NaN)"));if(t.timeoutSeconds<5)throw new Ld(Od.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (minimum allowed value is 5)"));if(t.timeoutSeconds>30)throw new Ld(Od.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(t.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nx{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ld(Od.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ld(Od.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mx(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Vd;switch(t.type){case"firstParty":return new Ud(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ld(Od.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Sx.get(t);e&&(Td("ComponentProvider","Removing Datastore"),Sx.delete(t),e.terminate())}(this),Promise.resolve()}}function Px(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(t=Dx(t,Nx))._getSettings(),o="".concat(e,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Dd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=Sd.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mo(JSON.stringify({alg:"none",type:"JWT"})),mo(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ld(Od.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Sd(s)}t._authCredentials=new zd(new Fd(e,n))}}class Ox{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ox(this.firestore,t,this._query)}}class Lx{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rx(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Lx(this.firestore,t,this._key)}}class Rx extends Ox{constructor(t,e,n){super(t,e,Ng(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Lx(this.firestore,null,new nf(t))}withConverter(t){return new Rx(this.firestore,t,this._path)}}function Fx(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=Ro(t),kx("collection","path",e),t instanceof Nx){const n=Zd.fromString(e,...r);return Tx(n),new Rx(t,null,n)}{if(!(t instanceof Lx||t instanceof Rx))throw new Ld(Od.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Zd.fromString(e,...r));return Tx(n),new Rx(t.firestore,null,n)}}function Vx(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=Ro(t),1===arguments.length&&(e=Kd.newId()),kx("doc","path",e),t instanceof Nx){const n=Zd.fromString(e,...r);return Ix(n),new Lx(t,null,new nf(n))}{if(!(t instanceof Lx||t instanceof Rx))throw new Ld(Od.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Zd.fromString(e,...r));return Ix(n),new Lx(t.firestore,t instanceof Rx?t.converter:null,new nf(n))}}function zx(t,e){return t=Ro(t),e=Ro(e),(t instanceof Lx||t instanceof Rx)&&(e instanceof Lx||e instanceof Rx)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Bx(t,e){return t=Ro(t),e=Ro(e),t instanceof Ox&&e instanceof Ox&&t.firestore===e.firestore&&Bg(t._query,e._query)&&t.converter===e.converter}class jx{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new gw(this,"async_queue_retry"),this.cu=()=>{const t=fw();t&&Td("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=fw();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const e=fw();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise((()=>{}));const e=new Rd;return this.hu((()=>this.iu&&this.au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.ru.push(t),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!_f(t))throw t;Td("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(t){const e=this.nu.then((()=>(this._u=!0,t().catch((t=>{this.ou=t,this._u=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw Cd("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this._u=!1,t))))));return this.nu=e,e}enqueueAfterDelay(t,e,n){this.lu(),this.uu.indexOf(t)>-1&&(e=0);const r=$w.createAndSchedule(this,t,e,n,(t=>this.Iu(t)));return this.su.push(r),r}lu(){this.ou&&Md()}verifyOperationInProgress(){}async Tu(){let t;do{t=this.nu,await t}while(t!==this.nu)}Eu(t){for(const e of this.su)if(e.timerId===t)return!0;return!1}du(t){return this.Tu().then((()=>{this.su.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.su)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Tu()}))}Au(t){this.uu.push(t)}Iu(t){const e=this.su.indexOf(t);this.su.splice(e,1)}}function Ux(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class qx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Wx extends Nx{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new jx,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kx(this),this._firestoreClient.terminate()}}function Hx(t){return t._firestoreClient||Kx(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Kx(t){var e,n,r;const i=t._freezeSettings(),s=function(t,e,n,r){return new Ip(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xx(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new ax(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Gx(t,e,n){const r=new Rd;return t.asyncQueue.enqueue((async()=>{try{await lx(t,n),await cx(t,e),r.resolve()}catch(t){const n=t;if(!ux(n))throw n;Dd("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Qx(t){return function(t){const e=new Rd;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e){const n=Pd(t);Aw(n.remoteStore)||Td("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=Pd(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const r=n.Ma.get(t)||[];r.push(e),n.Ma.set(t,r)}catch(t){const n=Xw(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}(await mx(t),e))),e.promise}(Hx(t=Dx(t,Wx)))}function Yx(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await fx(t),n=await gx(t);return e.setNetworkEnabled(!0),function(t){const e=Pd(t);return e.v_.delete(0),xw(e)}(n)}))}(Hx(t=Dx(t,Wx)))}function $x(t){return function(t){return t.asyncQueue.enqueue((async()=>{const e=await fx(t),n=await gx(t);return e.setNetworkEnabled(!1),async function(t){const e=Pd(t);e.v_.add(0),await Sw(e),e.x_.set("Offline")}(n)}))}(Hx(t=Dx(t,Wx)))}function Xx(t,e){return function(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=Pd(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.$r.getNamedQuery(t,e)))}(await px(t),e)))}(Hx(t=Dx(t,Wx)),e).then((e=>e?new Ox(t,null,e.query):null))}function Jx(t){if(t._initialized||t._terminated)throw new Ld(Od.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Zx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Zx(vp.fromBase64String(t))}catch(t){throw new Ld(Od.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new Zx(vp.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class tS{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Ld(Od.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ef(e)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class eS{constructor(t){this._methodName=t}}class nS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ld(Od.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ld(Od.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Gd(this._lat,t._lat)||Gd(this._long,t._long)}}const rS=/^__.*__$/;class iS{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Pm(t,this.data,this.fieldMask,e,this.fieldTransforms):new Nm(t,this.data,e,this.fieldTransforms)}}class sS{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Pm(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function oS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Md()}}class aS{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new aS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.mu({path:n,gu:!1});return r.pu(t),r}yu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return TS(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(0===t.length)throw this.Su("Document fields must not be empty");if(oS(this.Vu)&&rS.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class lS{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||pw(t)}Cu(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new aS({Vu:t,methodName:e,Du:n,path:ef.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cS(t){const e=t._freezeSettings(),n=pw(t._databaseId);return new lS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uS(t,e,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);SS("Data must be an object, but it was:",o,r);const a=_S(r,o);let l,c;if(s.merge)l=new mp(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=kS(e,r,n);if(!o.contains(i))throw new Ld(Od.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));CS(t,i)||t.push(i)}l=new mp(t),c=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=o.fieldTransforms;return new iS(new Yp(a),l,c)}class hS extends eS{_toFieldTransform(t){if(2!==t.Vu)throw 1===t.Vu?t.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):t.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hS}}function dS(t,e,n){return new aS({Vu:3,Du:e.settings.Du,methodName:t._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fS extends eS{_toFieldTransform(t){return new xm(t.path,new pm)}isEqual(t){return t instanceof fS}}class pS extends eS{constructor(t,e){super(t),this.vu=e}_toFieldTransform(t){const e=dS(this,t,!0),n=this.vu.map((t=>wS(t,e))),r=new gm(n);return new xm(t.path,r)}isEqual(t){return t instanceof pS&&Mo(this.vu,t.vu)}}class gS extends eS{constructor(t,e){super(t),this.vu=e}_toFieldTransform(t){const e=dS(this,t,!0),n=this.vu.map((t=>wS(t,e))),r=new ym(n);return new xm(t.path,r)}isEqual(t){return t instanceof gS&&Mo(this.vu,t.vu)}}class mS extends eS{constructor(t,e){super(t),this.Fu=e}_toFieldTransform(t){const e=new bm(t.serializer,cm(t.serializer,this.Fu));return new xm(t.path,e)}isEqual(t){return t instanceof mS&&this.Fu===t.Fu}}function yS(t,e,n,r){const i=t.Cu(1,e,n);SS("Data must be an object, but it was:",i,r);const s=[],o=Yp.empty();lp(r,((t,r)=>{const a=IS(e,t,n);r=Ro(r);const l=i.yu(a);if(r instanceof hS)s.push(a);else{const t=wS(r,l);null!=t&&(s.push(a),o.set(a,t))}}));const a=new mp(s);return new sS(o,a,i.fieldTransforms)}function vS(t,e,n,r,i,s){const o=t.Cu(1,e,n),a=[kS(e,r,n)],l=[i];if(s.length%2!=0)throw new Ld(Od.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(kS(e,s[d])),l.push(s[d+1]);const c=[],u=Yp.empty();for(let d=a.length-1;d>=0;--d)if(!CS(c,a[d])){const t=a[d];let e=l[d];e=Ro(e);const n=o.yu(t);if(e instanceof hS)c.push(t);else{const r=wS(e,n);null!=r&&(c.push(t),u.set(t,r))}}const h=new mp(c);return new sS(u,h,o.fieldTransforms)}function bS(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wS(n,t.Cu(r?4:3,e))}function wS(t,e){if(xS(t=Ro(t)))return SS("Unsupported field value:",e,t),_S(t,e);if(t instanceof eS)return function(t,e){if(!oS(e.Vu))throw e.Su("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Su("".concat(t._methodName,"() is not currently supported inside arrays"));const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=wS(i,e.wu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Ro(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cm(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=$d.fromDate(t);return{timestampValue:py(e.serializer,n)}}if(t instanceof $d){const n=new $d(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:py(e.serializer,n)}}if(t instanceof nS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zx)return{bytesValue:gy(e.serializer,t._byteString)};if(t instanceof Lx){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:vy(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Su("Unsupported field value: ".concat(Cx(t)))}(t,e)}function _S(t,e){const n={};return cp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lp(t,((t,r)=>{const i=wS(r,e.fu(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function xS(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $d||t instanceof nS||t instanceof Zx||t instanceof Lx||t instanceof eS)}function SS(t,e,n){if(!xS(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Cx(n);throw"an object"===r?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function kS(t,e,n){if((e=Ro(e))instanceof tS)return e._internalPath;if("string"==typeof e)return IS(t,e);throw TS("Field path arguments must be of type string or ",t,!1,void 0,n)}const ES=new RegExp("[~\\*/\\[\\]]");function IS(t,e,n){if(e.search(ES)>=0)throw TS("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new tS(...e.split("."))._internalPath}catch(ml){throw TS("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function TS(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Ld(Od.INVALID_ARGUMENT,a+t+l)}function CS(t,e){return t.some((t=>t.isEqual(e)))}class DS{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Lx(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new AS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(MS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class AS extends DS{data(){return super.data()}}function MS(t,e){return"string"==typeof e?IS(t,e):e instanceof tS?e._internalPath:e._delegate._internalPath}function NS(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Ld(Od.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PS{}class OS extends PS{}function LS(t,e){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];e instanceof PS&&n.push(e),n=n.concat(i),function(t){const e=t.filter((t=>t instanceof FS)).length,n=t.filter((t=>t instanceof RS)).length;if(e>1||e>0&&n>0)throw new Ld(Od.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)t=o._apply(t);return t}class RS extends OS{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new RS(t,e,n)}_apply(t){const e=this._parse(t);return HS(t._query,e),new Ox(t.firestore,t.converter,Vg(t._query,e))}_parse(t){const e=cS(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ld(Od.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){WS(o,s);const e=[];for(const n of o)e.push(qS(r,t,n));a={arrayValue:{values:e}}}else a=qS(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||WS(o,s),a=bS(n,e,o,"in"===s||"not-in"===s);return ig.create(i,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class FS extends PS{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new FS(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:sg.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const r=e.getFlattenedFilters();for(const i of r)HS(n,i),n=Vg(n,i)}(t._query,e),new Ox(t.firestore,t.converter,Vg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class VS extends OS{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new VS(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eg(e,n)}(t._query,this._field,this._direction);return new Ox(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new Ag(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class zS extends OS{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new zS(t,e,n)}_apply(t){return new Ox(t.firestore,t.converter,zg(t._query,this._limit,this._limitType))}}class BS extends OS{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new BS(t,e,n)}_apply(t){const e=US(t,this.type,this._docOrFields,this._inclusive);return new Ox(t.firestore,t.converter,function(t,e){return new Ag(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}class jS extends OS{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new jS(t,e,n)}_apply(t){const e=US(t,this.type,this._docOrFields,this._inclusive);return new Ox(t.firestore,t.converter,function(t,e){return new Ag(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function US(t,e,n,r){if(n[0]=Ro(n[0]),n[0]instanceof DS)return function(t,e,n,r,i){if(!r)throw new Ld(Od.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Lg(t))if(o.field.isKeyField())s.push(Fp(e,r.key));else{const t=r.data.field(o.field);if(Sp(t))throw new Ld(Od.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(t,"' (used as the orderBy) does not exist."))}s.push(t)}return new Jp(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=cS(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new Ld(Od.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Og(t)&&-1!==s.indexOf("/"))throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=t.path.child(Zd.fromString(s));if(!nf.isDocumentKey(n))throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new nf(n);a.push(Fp(e,i))}else{const t=bS(n,r,s);a.push(t)}}return new Jp(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}function qS(t,e,n){if("string"==typeof(n=Ro(n))){if(""===n)throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Og(e)&&-1!==n.indexOf("/"))throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=e.path.child(Zd.fromString(n));if(!nf.isDocumentKey(r))throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fp(t,new nf(r))}if(n instanceof Lx)return Fp(t,n._key);throw new Ld(Od.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Cx(n),"."))}function WS(t,e){if(!Array.isArray(t)||0===t.length)throw new Ld(Od.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function HS(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new Ld(Od.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new Ld(Od.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class KS{convertValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ap(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _p(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(xp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Md()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return lp(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new nS(_p(t.latitude),_p(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=kp(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ep(t));default:return null}}convertTimestamp(t){const e=wp(t);return new $d(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Zd.fromString(t);Nd(Uy(n));const r=new Tp(n.get(1),n.get(3)),i=new nf(n.popFirst(5));return r.isEqual(e)||Cd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),i}}function GS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class QS extends KS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zx(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lx(this.firestore,null,e)}}class YS{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $S extends DS{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const e=new XS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(MS("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class XS extends $S{data(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(t)}}class JS{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new YS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new XS(this._firestore,this._userDataWriter,n.key,n,new YS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const t=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ld(Od.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new XS(t._firestore,t._userDataWriter,n.doc.key,n.doc,new YS(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new XS(t._firestore,t._userDataWriter,e.doc.key,e.doc,new YS(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:ZS(e.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ZS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Md()}}function tk(t,e){return t instanceof $S&&e instanceof $S?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof JS&&e instanceof JS&&t._firestore===e._firestore&&Bx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class ek extends KS{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zx(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lx(this.firestore,null,e)}}function nk(t){t=Dx(t,Lx);const e=Dx(t.firestore,Wx),n=Hx(e),r=new ek(e);return function(t,e){const n=new Rd;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const r=await function(t,e){const n=Pd(t);return n.persistence.runTransaction("read document","readonly",(t=>n.localDocuments.getDocument(t,e)))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ld(Od.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=Xw(t,"Failed to get document '".concat(e," from cache"));n.reject(r)}}(await px(t),e,n))),n.promise}(n,t._key).then((n=>new $S(e,r,t._key,n,new YS(null!==n&&n.hasLocalMutations,!0),t.converter)))}function rk(t){t=Dx(t,Ox);const e=Dx(t.firestore,Wx),n=Hx(e),r=new ek(e);return function(t,e){const n=new Rd;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const r=await qb(t,e,!0),i=new y_(e,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const r=Xw(t,"Failed to execute query '".concat(e," against cache"));n.reject(r)}}(await px(t),e,n))),n.promise}(n,t._query).then((n=>new JS(e,r,t,n)))}function ik(t,e,n){t=Dx(t,Lx);const r=Dx(t.firestore,Wx),i=GS(t.converter,e,n);return lk(r,[uS(cS(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,km.none())])}function sk(t,e,n){t=Dx(t,Lx);const r=Dx(t.firestore,Wx),i=cS(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(e=Ro(e))||e instanceof tS?vS(i,"updateDoc",t._key,e,n,a):yS(i,"updateDoc",t._key,e),lk(r,[s.toMutation(t._key,km.exists(!0))])}function ok(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,s,o;t=Ro(t);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Ux(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Ux(n[l])){const t=n[l];n[l]=null===(i=t.next)||void 0===i?void 0:i.bind(t),n[l+1]=null===(s=t.error)||void 0===s?void 0:s.bind(t),n[l+2]=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}let u,h,d;if(t instanceof Lx)h=Dx(t.firestore,Wx),d=Ng(t._key.path),u={next:e=>{n[l]&&n[l](ck(h,t,e))},error:n[l+1],complete:n[l+2]};else{const e=Dx(t,Ox);h=Dx(e.firestore,Wx),d=e._query;const r=new ek(h);u={next:t=>{n[l]&&n[l](new JS(h,r,e,t))},error:n[l+1],complete:n[l+2]},NS(t._query)}return function(t,e,n,r){const i=new rx(r),s=new u_(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>r_(await vx(t),s))),()=>{i.Qa(),t.asyncQueue.enqueueAndForget((async()=>i_(await vx(t),s)))}}(Hx(h),d,c,u)}function ak(t,e){return function(t,e){const n=new rx(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){Pd(t).W_.add(e),e.next()}(await vx(t),n))),()=>{n.Qa(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){Pd(t).W_.delete(e)}(await vx(t),n)))}}(Hx(t=Dx(t,Wx)),Ux(e)?e:{next:e})}function lk(t,e){return function(t,e){const n=new Rd;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=X_(t);try{const t=await function(t,e){const n=Pd(t),r=$d.now(),i=e.reduce(((t,e)=>t.add(e.key)),im());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Yg(),l=im();return n.os.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{s=i;const o=[];for(const t of e){const e=Am(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Pm(t.key,e,$p(e.value.mapValue),km.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Jg(s)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Fa[t.currentUser.toKey()];r||(r=new up(Gd)),r=r.insert(e,n),t.Fa[t.currentUser.toKey()]=r}(r,t.batchId,n),await z_(r,t.changes),await Fw(r.remoteStore)}catch(t){const e=Xw(t,"Failed to persist write");n.reject(e)}}(await mx(t),e,n))),n.promise}(Hx(t),e)}function ck(t,e,n){const r=n.docs.get(e._key),i=new ek(t);return new $S(t,i,e._key,r,new YS(n.hasPendingWrites,n.fromCache),e.converter)}const uk={maxAttempts:5};class hk{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=cS(t)}set(t,e,n){this._verifyNotCommitted();const r=dk(t,this._firestore),i=GS(r.converter,e,n),s=uS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,km.none())),this}update(t,e,n){this._verifyNotCommitted();const r=dk(t,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(e=Ro(e))||e instanceof tS?vS(this._dataReader,"WriteBatch.update",r._key,e,n,o):yS(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(i.toMutation(r._key,km.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=dk(t,this._firestore);return this._mutations=this._mutations.concat(new Fm(e._key,km.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ld(Od.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dk(t,e){if((t=Ro(t)).firestore!==e)throw new Ld(Od.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class fk extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=cS(t)}get(t){const e=dk(t,this._firestore),n=new QS(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return Md();const r=t[0];if(r.isFoundDocument())return new DS(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new DS(this._firestore,n,e._key,null,e.converter);throw Md()}))}set(t,e,n){const r=dk(t,this._firestore),i=GS(r.converter,e,n),s=uS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(t,e,n){const r=dk(t,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(e=Ro(e))||e instanceof tS?vS(this._dataReader,"Transaction.update",r._key,e,n,o):yS(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,i),this}delete(t){const e=dk(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=dk(t,this._firestore),n=new ek(this._firestore);return super.get(t).then((t=>new $S(this._firestore,n,e._key,t._document,new YS(!1,!1),e.converter)))}}new WeakMap;!function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){kd=t}(Ma),xa(new Fo("firestore",((t,n)=>{let{instanceIdentifier:r,options:i}=n;const s=t.getProvider("app").getImmediate(),o=new Wx(new Bd(t.getProvider("auth-internal")),new Wd(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ld(Od.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tp(t.options.projectId,e)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Fa(xd,"4.5.1",t),Fa(xd,"4.5.1","esm2017")}();function pk(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ld("invalid-argument","Invalid options passed to function ".concat(t,"(): You cannot ")+'specify both "merge" and "mergeFields".');return e}function gk(){if("undefined"===typeof Uint8Array)throw new Ld("unimplemented","Uint8Arrays are not available in this environment.")}function mk(){if("undefined"==typeof atob)throw new Ld("unimplemented","Blobs are unavailable in Firestore in this environment.")}class yk{constructor(t){this._delegate=t}static fromBase64String(t){return mk(),new yk(Zx.fromBase64String(t))}static fromUint8Array(t){return gk(),new yk(Zx.fromUint8Array(t))}toBase64(){return mk(),this._delegate.toBase64()}toUint8Array(){return gk(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vk(t){return function(t,e){if("object"!==typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"===typeof n[r])return!0;return!1}(t,["next","error","complete"])}class bk{enableIndexedDbPersistence(t,e){return function(t,e){Jx(t=Dx(t,Wx));const n=Hx(t);if(n._uninitializedComponentsProvider)throw new Ld(Od.FAILED_PRECONDITION,"SDK cache is already specified.");Dd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new ex;return Gx(n,i,new Z_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(t){Jx(t=Dx(t,Wx));const e=Hx(t);if(e._uninitializedComponentsProvider)throw new Ld(Od.FAILED_PRECONDITION,"SDK cache is already specified.");Dd("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new ex;return Gx(e,r,new tx(r,n.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(t){if(t._initialized&&!t._terminated)throw new Ld(Od.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rd;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!vf.D())return Promise.resolve();const e=t+"main";await vf.delete(e)}(Mb(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}(t._delegate)}}class wk{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof Tp||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||Dd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Px(this._delegate,t,e,n)}enableNetwork(){return Yx(this._delegate)}disableNetwork(){return $x(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,Ex("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Qx(this._delegate)}onSnapshotsInSync(t){return ak(this._delegate,t)}get app(){if(!this._appCompat)throw new Ld("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Ok(this,Fx(this._delegate,t))}catch(e){throw Ik(e,"collection()","Firestore.collection()")}}doc(t){try{return new Ek(this,Vx(this._delegate,t))}catch(e){throw Ik(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Mk(this,function(t,e){if(t=Dx(t,Nx),kx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ld(Od.INVALID_ARGUMENT,"Invalid collection ID '".concat(e,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ox(t,null,function(t){return new Ag(Zd.emptyPath(),t)}(e))}(this._delegate,t))}catch(e){throw Ik(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(t,e,n){t=Dx(t,Wx);const r=Object.assign(Object.assign({},uk),n);return function(t){if(t.maxAttempts<1)throw new Ld(Od.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(t,e,n){const r=new Rd;return t.asyncQueue.enqueueAndForget((async()=>{const i=await yx(t);new ox(t.asyncQueue,i,n,e,r).Ya()})),r.promise}(Hx(t),(n=>e(new fk(t,n))),r)}(this._delegate,(e=>t(new xk(this,e))))}batch(){return Hx(this._delegate),new Sk(new hk(this._delegate,(t=>lk(this._delegate,t))))}loadBundle(t){return function(t,e){const n=Hx(t=Dx(t,Wx)),r=new qx;return _x(n,t._databaseId,e,r),r}(this._delegate,t)}namedQuery(t){return Xx(this._delegate,t).then((t=>t?new Mk(this,t):null))}}class _k extends KS{constructor(t){super(),this.firestore=t}convertBytes(t){return new yk(new Zx(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Ek.forKey(e,this.firestore,null)}}class xk{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new _k(t)}get(t){const e=Lk(t);return this._delegate.get(e).then((t=>new Dk(this._firestore,new $S(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter))))}set(t,e,n){const r=Lk(t);return n?(pk("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Lk(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,n,...i),this}delete(t){const e=Lk(t);return this._delegate.delete(e),this}}class Sk{constructor(t){this._delegate=t}set(t,e,n){const r=Lk(t);return n?(pk("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Lk(t);return 2===arguments.length?this._delegate.update(o,e):this._delegate.update(o,e,n,...i),this}delete(t){const e=Lk(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class kk{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new XS(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ak(this._firestore,n),null!==e&&void 0!==e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=kk.INSTANCES;let r=n.get(t);r||(r=new WeakMap,n.set(t,r));let i=r.get(e);return i||(i=new kk(t,new _k(t),e),r.set(e,i)),i}}kk.INSTANCES=new WeakMap;class Ek{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _k(t)}static forPath(t,e,n){if(t.length%2!==0)throw new Ld("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new Ek(e,new Lx(e._delegate,n,new nf(t)))}static forKey(t,e,n){return new Ek(e,new Lx(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new Ok(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Ok(this.firestore,Fx(this._delegate,t))}catch(e){throw Ik(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=Ro(t))instanceof Lx&&zx(this._delegate,t)}set(t,e){e=pk("DocumentReference.set",e);try{return e?ik(this._delegate,t,e):ik(this._delegate,t)}catch(n){throw Ik(n,"setDoc()","DocumentReference.set()")}}update(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?sk(this._delegate,t):sk(this._delegate,t,e,...r)}catch(s){throw Ik(s,"updateDoc()","DocumentReference.update()")}}delete(){return lk(Dx((t=this._delegate).firestore,Wx),[new Fm(t._key,km.none())]);var t}onSnapshot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=Tk(e),i=Ck(e,(t=>new Dk(this.firestore,new $S(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))));return ok(this._delegate,r,i)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?nk(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?function(t){t=Dx(t,Lx);const e=Dx(t.firestore,Wx);return bx(Hx(e),t._key,{source:"server"}).then((n=>ck(e,t,n)))}(this._delegate):function(t){t=Dx(t,Lx);const e=Dx(t.firestore,Wx);return bx(Hx(e),t._key).then((n=>ck(e,t,n)))}(this._delegate),e.then((t=>new Dk(this.firestore,new $S(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter))))}withConverter(t){return new Ek(this.firestore,t?this._delegate.withConverter(kk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Ik(t,e,n){return t.message=t.message.replace(e,n),t}function Tk(t){for(const e of t)if("object"===typeof e&&!vk(e))return e;return{}}function Ck(t,e){var n,r;let i;return i=vk(t[0])?t[0]:vk(t[1])?t[1]:"function"===typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{i.next&&i.next(e(t))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dk{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Ek(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return tk(this._delegate,t._delegate)}}class Ak extends Dk{data(t){const e=this._delegate.data(t);return this._delegate._converter||void 0!==e||Md(),e}}class Mk{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new _k(t)}where(t,e,n){try{return new Mk(this.firestore,LS(this._delegate,function(t,e,n){const r=e,i=MS("where",t);return RS._create(i,r,n)}(t,e,n)))}catch(r){throw Ik(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Mk(this.firestore,LS(this._delegate,function(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=MS("orderBy",t);return VS._create(n,e)}(t,e)))}catch(n){throw Ik(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Mk(this.firestore,LS(this._delegate,(Ax("limit",e=t),zS._create("limit",e,"F"))))}catch(e){throw Ik(e,"limit()","Query.limit()")}var e}limitToLast(t){try{return new Mk(this.firestore,LS(this._delegate,(Ax("limitToLast",e=t),zS._create("limitToLast",e,"L"))))}catch(e){throw Ik(e,"limitToLast()","Query.limitToLast()")}var e}startAt(){try{return new Mk(this.firestore,LS(this._delegate,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BS._create("startAt",e,!0)}(...arguments)))}catch(t){throw Ik(t,"startAt()","Query.startAt()")}}startAfter(){try{return new Mk(this.firestore,LS(this._delegate,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BS._create("startAfter",e,!1)}(...arguments)))}catch(t){throw Ik(t,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Mk(this.firestore,LS(this._delegate,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return jS._create("endBefore",e,!1)}(...arguments)))}catch(t){throw Ik(t,"endBefore()","Query.endBefore()")}}endAt(){try{return new Mk(this.firestore,LS(this._delegate,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return jS._create("endAt",e,!0)}(...arguments)))}catch(t){throw Ik(t,"endAt()","Query.endAt()")}}isEqual(t){return Bx(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null===t||void 0===t?void 0:t.source)?rk(this._delegate):"server"===(null===t||void 0===t?void 0:t.source)?function(t){t=Dx(t,Ox);const e=Dx(t.firestore,Wx),n=Hx(e),r=new ek(e);return wx(n,t._query,{source:"server"}).then((n=>new JS(e,r,t,n)))}(this._delegate):function(t){t=Dx(t,Ox);const e=Dx(t.firestore,Wx),n=Hx(e),r=new ek(e);return NS(t._query),wx(n,t._query).then((n=>new JS(e,r,t,n)))}(this._delegate),e.then((t=>new Pk(this.firestore,new JS(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))))}onSnapshot(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=Tk(e),i=Ck(e,(t=>new Pk(this.firestore,new JS(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot))));return ok(this._delegate,r,i)}withConverter(t){return new Mk(this.firestore,t?this._delegate.withConverter(kk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class Nk{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Ak(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Pk{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Mk(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((t=>new Ak(this._firestore,t)))}docChanges(t){return this._delegate.docChanges(t).map((t=>new Nk(this._firestore,t)))}forEach(t,e){this._delegate.forEach((n=>{t.call(e,new Ak(this._firestore,n))}))}isEqual(t){return tk(this._delegate,t._delegate)}}class Ok extends Mk{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ek(this.firestore,t):null}doc(t){try{return new Ek(this.firestore,void 0===t?Vx(this._delegate):Vx(this._delegate,t))}catch(e){throw Ik(e,"doc()","CollectionReference.doc()")}}add(t){return function(t,e){const n=Dx(t.firestore,Wx),r=Vx(t),i=GS(t.converter,e);return lk(n,[uS(cS(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,km.exists(!1))]).then((()=>r))}(this._delegate,t).then((t=>new Ek(this.firestore,t)))}isEqual(t){return zx(this._delegate,t._delegate)}withConverter(t){return new Ok(this.firestore,t?this._delegate.withConverter(kk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Lk(t){return Dx(t,Lx)}class Rk{constructor(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._delegate=new tS(...e)}static documentId(){return new Rk(ef.keyField().canonicalString())}isEqual(t){return(t=Ro(t))instanceof tS&&this._delegate._internalPath.isEqual(t._internalPath)}}class Fk{constructor(t){this._delegate=t}static serverTimestamp(){const t=new fS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Fk(t)}static delete(){const t=new hS("deleteField");return t._methodName="FieldValue.delete",new Fk(t)}static arrayUnion(){const t=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new pS("arrayUnion",e)}(...arguments);return t._methodName="FieldValue.arrayUnion",new Fk(t)}static arrayRemove(){const t=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new gS("arrayRemove",e)}(...arguments);return t._methodName="FieldValue.arrayRemove",new Fk(t)}static increment(t){const e=new mS("increment",t);return e._methodName="FieldValue.increment",new Fk(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Vk={Firestore:wk,GeoPoint:nS,Timestamp:$d,Blob:yk,Transaction:xk,WriteBatch:Sk,DocumentReference:Ek,DocumentSnapshot:Dk,Query:Mk,QueryDocumentSnapshot:Ak,QuerySnapshot:Pk,CollectionReference:Ok,FieldPath:Rk,FieldValue:Fk,setLogLevel:function(t){var e;e=t,Ed.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};var zk;(function(t,e){t.INTERNAL.registerComponent(new Fo("firestore-compat",(t=>{const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Vk)))})(zk=nl,((t,e)=>new wk(t,e,new bk))),zk.registerVersion("@firebase/firestore-compat","0.3.28");nl.initializeApp({apiKey:"AIzaSyB0WHiVa-WklF1ynL_yi63Pf0c92Stvit4",authDomain:"greencheck-6f8db.firebaseapp.com",projectId:"greencheck-6f8db",storageBucket:"greencheck-6f8db.appspot.com",messagingSenderId:"301219115750",appId:"1:301219115750:web:f0a25d38e42fe79b530127",measurementId:"G-ZY7B38G49W"});const Bk=nl.firestore();const jk=function(){const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(!1),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)(""),[h,d]=(0,e.useState)(""),[f,p]=(0,e.useState)(100),[g,m]=(0,e.useState)(""),[y,v]=(0,e.useState)(!1),[b,w]=(0,e.useState)(""),[_,x]=(0,e.useState)([]),[S,k]=(0,e.useState)([]),[E,I]=(0,e.useState)([]),[T,C]=(0,e.useState)([]),[D,A]=(0,e.useState)([]),[M,N]=(0,e.useState)([]),[P,O]=(0,e.useState)(100),[L,R]=(0,e.useState)(""),[F,V]=(0,e.useState)(100),[z,B]=(0,e.useState)("");(0,e.useEffect)((()=>{m(f>75?"green":f<51?"red":"yellow")}),[f]),(0,e.useEffect)((()=>{R(P>75?"green":P<51?"red":"yellow")}),[P]),(0,e.useEffect)((()=>{B(F>75?"green":F<51?"red":"yellow")}),[F]);const j=(t,e,n,r)=>{const i=[...t];i[e]=n,r(i)};return(0,uo.jsxs)("div",{className:"survey-form-container",children:[(0,uo.jsx)("div",{className:"header-bar",children:(0,uo.jsx)("h1",{className:"header-title",children:"Green Check"})}),(0,uo.jsx)("div",{className:"content",children:r?(0,uo.jsxs)("div",{className:"question-container",children:[(0,uo.jsx)("h2",{children:"Survey Report"}),(0,uo.jsxs)("p",{children:["Institution Name: ",t]}),s&&(0,uo.jsxs)(uo.Fragment,{children:[(0,uo.jsxs)("p",{style:{fontSize:"40px"},children:["Raw Material Green Rating: ",f,(0,uo.jsx)("div",{className:"circle",style:{backgroundColor:g}})]}),(0,uo.jsxs)("p",{children:["Feedstock Generation: ",a]}),(0,uo.jsxs)("p",{children:["Availability: ",c]}),(0,uo.jsxs)("p",{children:["Seasonability: ",h]})]}),(0,uo.jsxs)(uo.Fragment,{children:[(0,uo.jsxs)("p",{style:{fontSize:"40px"},children:["Solvents & Additives Green Rating: ",P,(0,uo.jsx)("div",{className:"circle",style:{backgroundColor:L}})]}),_.map(((t,e)=>(0,uo.jsxs)("p",{children:[t,(0,uo.jsxs)("p",{children:["Pictogram: ",S[e]]}),(0,uo.jsxs)("p",{children:["Signal Word: ",E[e]]}),(0,uo.jsxs)("p",{children:["Amount: ",T[e]]}),(0,uo.jsxs)("p",{children:["Occupational Hazard: ",M[e]]})]})))]}),(0,uo.jsxs)("p",{children:["Green Rating: ",F,(0,uo.jsx)("div",{className:"circle",style:{backgroundColor:z}})]}),(0,uo.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to add this to Firestore?"))try{await Bk.collection("surveyResponses").add({institutionName:t,feedstockGeneration:a,availability:c,seasonability:h,greenRatingRM:f,greenRating:F}),console.log("Data added to Firestore successfully")}catch(e){console.error("Error adding data to Firestore:",e)}},children:"Add to Database"}),(0,uo.jsx)("button",{onClick:()=>{i(!1),n(""),o(!1),l(""),u(""),d(""),p(100),v(!1),w(""),x([]),k([]),I([]),C([]),A([]),O(100),N([]),V(100)},children:"Go Back"}),(0,uo.jsx)(ho,{})]}):(0,uo.jsxs)("form",{onSubmit:t=>{t.preventDefault(),i(!0),_.map(((t,e)=>{switch(S[e]){case"Exclamation Mark":case"Flame":case"Environment":O((t=>t-1*D[e]));break;case"Corrosion":case"Flame over circle":O((t=>t-2*D[e]));break;case"Skull & Crossbones":case"Health hazard":O((t=>t-3*D[e]));break;case"Exploding Bomb":O((t=>t-4*D[e]))}switch(E[e]){case"Warning":O((t=>t-1*D[e]));break;case"Danger":O((t=>t-2*D[e]))}return"Vapour/Gas emission"===M[e]&&O((t=>t-3)),1})),"First"===a?p((t=>t-50)):"Third"===a&&p((t=>t-25)),"Difficult"===c&&p((t=>t-50)),"Seasonal"===h&&p((t=>t-25))},children:[(0,uo.jsx)("div",{className:"question-container",children:(0,uo.jsxs)("label",{children:["Institution Name:",(0,uo.jsx)("input",{type:"text",value:t,onChange:t=>n(t.target.value)})]})}),(0,uo.jsx)("br",{}),(0,uo.jsx)("div",{className:"question-container",children:(0,uo.jsxs)("label",{children:["Raw Material",(0,uo.jsx)("input",{type:"checkbox",checked:s,onChange:t=>o(t.target.checked)})]})}),s&&(0,uo.jsxs)("div",{className:"question-container",children:[(0,uo.jsxs)("label",{children:["Feedstock Generation:",(0,uo.jsxs)("select",{value:a,onChange:t=>l(t.target.value),children:[(0,uo.jsx)("option",{value:"",children:"Select..."}),(0,uo.jsx)("option",{value:"First",children:"First"}),(0,uo.jsx)("option",{value:"Second",children:"Second"}),(0,uo.jsx)("option",{value:"Third",children:"Third"})]})]}),(0,uo.jsx)("br",{}),(0,uo.jsxs)("label",{children:["Availability:",(0,uo.jsxs)("select",{value:c,onChange:t=>u(t.target.value),children:[(0,uo.jsx)("option",{value:"",children:"Select..."}),(0,uo.jsx)("option",{value:"Easy",children:"Easy"}),(0,uo.jsx)("option",{value:"Difficult",children:"Difficult"})]})]}),(0,uo.jsx)("br",{}),(0,uo.jsxs)("label",{children:["Seasonability:",(0,uo.jsxs)("select",{value:h,onChange:t=>d(t.target.value),children:[(0,uo.jsx)("option",{value:"",children:"Select..."}),(0,uo.jsx)("option",{value:"Seasonal",children:"Seasonal"}),(0,uo.jsx)("option",{value:"Not Seasonal",children:"Not Seasonal"})]})]}),(0,uo.jsx)("br",{})]}),(0,uo.jsx)("br",{}),(0,uo.jsx)("div",{className:"question-container",children:(0,uo.jsxs)("label",{children:["Solvents and Additives",(0,uo.jsx)("input",{type:"checkbox",checked:y,onChange:t=>v(t.target.checked)})]})}),y&&(0,uo.jsxs)("p",{children:[(0,uo.jsx)("div",{className:"question-container",children:(0,uo.jsxs)("label",{children:["Solvent Name:",(0,uo.jsx)("input",{type:"text",value:b,onChange:t=>w(t.target.value)}),(0,uo.jsx)("button",{type:"button",onClick:()=>{x((t=>[...t,b])),k((t=>[...t,""])),w("")},children:"Add Solvent"})]})}),_.map(((t,e)=>(0,uo.jsxs)("div",{className:"question-container",children:[t,(0,uo.jsxs)("label",{children:["Pictogram:",(0,uo.jsxs)("select",{value:S[e],onChange:t=>j(S,e,t.target.value,k),children:[(0,uo.jsx)("option",{value:"",children:"Select..."}),(0,uo.jsx)("option",{value:"Exclamation Mark",children:"Exclamation Mark"}),(0,uo.jsx)("option",{value:"Flame",children:"Flame"}),(0,uo.jsx)("option",{value:"Environment",children:"Environment"}),(0,uo.jsx)("option",{value:"Corrosion",children:"Corrosion"}),(0,uo.jsx)("option",{value:"Flame over circle",children:"Flame over circle"}),(0,uo.jsx)("option",{value:"Health hazard",children:"Health hazard"}),(0,uo.jsx)("option",{value:"Exploding Bomb",children:"Exploding Bomb"})]})]}),(0,uo.jsx)("br",{}),(0,uo.jsxs)("label",{children:["Signal Word:",(0,uo.jsxs)("select",{value:E[e],onChange:t=>j(E,e,t.target.value,I),children:[(0,uo.jsx)("option",{value:"",children:"None"}),(0,uo.jsx)("option",{value:"Warning",children:"Warning"}),(0,uo.jsx)("option",{value:"Danger",children:"Danger"})]})]}),(0,uo.jsx)("br",{}),(0,uo.jsxs)("label",{children:["Amount: ",(0,uo.jsxs)("div",{style:{fontSize:"30px"},children:["1 : ",(0,uo.jsx)("input",{type:"text",value:T[e],onChange:t=>{j(T,e,t.target.value,C),parseInt(t.target.value)<6?j(D,e,1,A):parseInt(t.target.value)<21?j(D,e,2,A):parseInt(t.target.value)<51?j(D,e,3,A):j(D,e,4,A)}})]})]}),(0,uo.jsx)("br",{}),(0,uo.jsxs)("label",{children:["Occupational Hazard:",(0,uo.jsxs)("select",{value:M[e],onChange:t=>j(M,e,t.target.value,N),children:[(0,uo.jsx)("option",{value:"",children:"Select..."}),(0,uo.jsx)("option",{value:"Zero Emission",children:"Zero Emission"}),(0,uo.jsx)("option",{value:"Vapour/Gas emission",children:"Vapour/Gas emission"})]})]})]})))]}),(0,uo.jsx)("br",{}),(0,uo.jsx)("button",{type:"submit",children:"Submit"})]})})]})};const Uk=function(){return(0,uo.jsx)("div",{className:"App",children:(0,uo.jsxs)("header",{className:"App-header",children:[(0,uo.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer"}),(0,uo.jsx)(jk,{})]})})},qk=t=>{t&&t instanceof Function&&n.e(453).then(n.bind(n,453)).then((e=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=e;n(t),r(t),i(t),s(t),o(t)}))};r.createRoot(document.getElementById("root")).render((0,uo.jsx)(e.StrictMode,{children:(0,uo.jsx)(Uk,{})})),qk()})()})();
//# sourceMappingURL=main.a9e13dd5.js.map